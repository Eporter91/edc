/*!CK:198438307!*//*1435548565,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["0DozC"]); }

__d("ChatTypeaheadEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ABANDONED_QUERY:"abandoned_query",NEW_QUERY:"new_query",RESULT_SELECTED:"result_selected"};},null);
__d("ChatQuietLinks",["Event","DOM","UserAgent_DEPRECATED","DataStore","Parent"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={},m={silenceLinks:function(q){n(q,this.removeEmptyHrefs.bind(this));},nukeLinks:function(q){n(q,this.removeAllHrefs.bind(this));},removeEmptyHrefs:function(q){o(q,function(r){return !r||r==='#';});},removeAllHrefs:function(q){o(q);}};function n(q,r){var s=!!i.chrome(),t=!!i.chrome()||i.ie()>=9||i.firefox()>=4;if(l[h.getID(q)])return;l[h.getID(q)]=true;if(!t)return;if(!s){r&&r(q);return;}g.listen(q,'mouseover',function u(v){var w=k.byTag(v.getTarget(),'a');if(w){var x=w.getAttribute('href');if(p(x)){j.set(w,'stashedHref',w.getAttribute('href'));w.removeAttribute('href');}}});g.listen(q,'mouseout',function u(v){var w=k.byTag(v.getTarget(),'a'),x=w&&j.remove(w,'stashedHref');if(p(x))w.setAttribute('href',x);});g.listen(q,'mousedown',function(u){if(!u.isDefaultRequested())return true;var v=k.byTag(u.getTarget(),'a'),w=v&&j.get(v,'stashedHref');if(p(w))v.setAttribute('href',w);});}function o(q,r){var s=h.scry(q,'a');if(r)s=s.filter(function(t){return r(t.getAttribute('href'));});s.forEach(function(t){t.removeAttribute('href');t.setAttribute('tabindex',0);});}function p(q){return q&&q!=='#';}e.exports=m;},null);
__d("ChatSidebarComposeLink.react",["ChatOpenTab","React","TooltipLink.react","URI","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h,m=l.PropTypes,n=h.createClass({displayName:"ChatSidebarComposeLink",propTypes:{className:m.string.isRequired},componentDidMount:function(){g.listenOpenEmptyTab(h.findDOMNode(this),'sidebar');},render:function(){var o=k._("New Message");return (h.createElement(i,{ajaxify:new j('/ajax/messaging/composer.php'),className:this.props.className,tooltip:o,rel:"dialog"}));}});e.exports=n;},null);
__d("ChatSidebarStore",["ChatDispatcher","ChatOptionsInitialData","ChatSidebarActions","FluxStore","performanceAbsoluteNow"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';for(var l in j)if(j.hasOwnProperty(l))n[l]=j[l];var m=j===null?null:j.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=j;function n(){j.call(this,g);this.$ChatSidebarStore0={initialized:false,initTime:k(),loaded:false,visible:true,enabled:!!h.sidebar_mode};this.$ChatSidebarStore1={};}n.prototype.__onDispatch=function(o){var p=o.type;this.$ChatSidebarStore1=Object.assign({},this.$ChatSidebarStore0);switch(p){case i.Types.INIT:if(!this.$ChatSidebarStore1.initialized)this.$ChatSidebarStore0.initTime=k();this.$ChatSidebarStore0.initialized=true;break;case i.Types.HIDE:this.$ChatSidebarStore0.visible=false;break;case i.Types.LOADED:this.$ChatSidebarStore0.loaded=true;break;case i.Types.SHOW:this.$ChatSidebarStore0.visible=true;break;case i.Types.SET_ENABLED:this.$ChatSidebarStore0.enabled=o.enabled;break;case i.Types.TOGGLE:this.$ChatSidebarStore0.enabled=!this.$ChatSidebarStore0.enabled;break;}for(var q in this.$ChatSidebarStore0)if(this.$ChatSidebarStore0.hasOwnProperty(q))if(this.$ChatSidebarStore0[q]!==this.$ChatSidebarStore1[q]){this.__emitChange();break;}};n.prototype.getPrevState=function(){return this.$ChatSidebarStore1;};n.prototype.getState=function(){return this.$ChatSidebarStore0;};n.prototype.isInitialized=function(){return this.$ChatSidebarStore0.initialized;};n.prototype.isLoaded=function(){return this.$ChatSidebarStore0.loaded;};n.prototype.isHidden=function(){return !this.$ChatSidebarStore0.visible;};n.prototype.isEnabled=function(){return this.$ChatSidebarStore0.enabled;};n.prototype.getInitTime=function(){return this.$ChatSidebarStore0.initTime;};e.exports=new n();},null);
__d("ChatSidebarVisibility",["ChatConfig","ChatSidebarStore","DOMDimensions","OrderedFriendsList"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g.get('sidebar.min_friends'),l=g.get('sidebar.minimum_width'),m=g.get('minisidebar.minimum_width'),n={getViewport:function(){return i.getViewportWithoutScrollbarDimensions();},hasLowFriendCount:function(){return j.getActiveList().length<=k;},isViewportCapable:function(){var o=n.getViewport();return o.width>l;},shouldShowSidebar:function(){return n.isViewportCapable()&&!h.isHidden()&&!n.hasLowFriendCount();},isViewportCapableForMiniSidebar:function(){var o=n.getViewport();return o.width>m&&o.width<=l;},shouldShowMiniSidebar:function(){return n.isViewportCapableForMiniSidebar()&&!h.isHidden()&&!n.hasLowFriendCount();}};e.exports=n;},null);
__d("SidebarFitWindowHeight",["Arbiter","ArbiterMixin","Event","Style","SubscriptionsHandler","UITinyViewportAction","Vector","mixin","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=n(h);for(var q in p)if(p.hasOwnProperty(q))s[q]=p[q];var r=p===null?null:p.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=p;function s(t){"use strict";this.$SidebarFitWindowHeight0=t;this.onViewportUpdate();l.subscribe('change',this.onViewportUpdate.bind(this));}s.prototype.onViewportUpdate=function(){"use strict";if(l.isTiny()){this.onScroll();var t=this.onScroll.bind(this);this.$SidebarFitWindowHeight1=new k();this.$SidebarFitWindowHeight1.addSubscriptions(i.listen(window,'scroll',t),g.subscribe('dom-scroll',t));}else{if(this.$SidebarFitWindowHeight2!==0){j.set(this.$SidebarFitWindowHeight0,'margin-top','0');this.$SidebarFitWindowHeight2=0;}this.$SidebarFitWindowHeight1&&this.$SidebarFitWindowHeight1.release();}};s.prototype.onScroll=function(){"use strict";o(this.updateScrollPosition.bind(this),this.resizeSidebar.bind(this),'SidebarFitWindowHeight/scroll');};s.prototype.updateScrollPosition=function(){"use strict";this.$SidebarFitWindowHeight3=m.getScrollPosition().y;this.$SidebarFitWindowHeight4||(this.$SidebarFitWindowHeight4=this.$SidebarFitWindowHeight0.offsetHeight);};s.prototype.resizeSidebar=function(){"use strict";var t=-Math.max(Math.min(this.$SidebarFitWindowHeight3,this.$SidebarFitWindowHeight4),0);j.set(this.$SidebarFitWindowHeight0,'margin-top',t+'px');if(t!=this.$SidebarFitWindowHeight2){this.$SidebarFitWindowHeight2=t;this.inform('resized',t);}};s.prototype.getOffset=function(){"use strict";return this.$SidebarFitWindowHeight2;};e.exports=s;},null);
__d("ChatSidebar",["Arbiter","ArbiterMixin","AsyncRequest","BanzaiODS","Bootloader","ChatConfig","ChatImpressionLogger","ChatSidebarActions","ChatSidebarComposeLink.react","ChatSidebarStore","ChatSidebarVisibility","CSS","DOM","DOMDimensions","Event","JSLogger","LitestandClassicPlaceHolders","MercuryConfig","Parent","PresencePrivacy","React","Run","ScrollableArea","SidebarFitWindowHeight","Style","ViewportBounds","createArrayFromMixed","csx","cx","debounce","emptyFunction","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la){b.__markCompiled&&b.__markCompiled();var ma='chat_sidebar_visibility',na,oa,pa=false,qa=false,ra,sa,ta,ua,va,wa,xa,ya,za=null,ab,bb=v.create('chat_sidebar');j.setEntitySample(ma,.0001);function cb(){r.removeClass(document.documentElement,'sidebarMode');if(!p.isInitialized()||(!mb.isVisible()&&!qa)){g.inform('reflow');return;}pa=false;qa=false;za=null;wa.hide();ya.getCore().reset();r.hide(ua);r.hide(sa);r.hide(ta);r.removeClass(document.documentElement,'miniSidebar');r.removeClass(ua,"_51xq");ra&&ra.setProps({shown:false},function(){return ib(false);});bb.log('minisidebar_hide');g.inform('sidebar/hide',mb);g.inform('reflow');}function db(){var nb=q.shouldShowSidebar(),ob=q.shouldShowMiniSidebar();if(p.isEnabled()&&(nb||ob)){if(nb){gb();hb();}else jb();}else cb();if(!p.isInitialized()){lb();n.init();}za=null;}function eb(){if(ya&&mb.isVisible())ya.getCore().getElement().focus();}function fb(nb){var ob=q.getViewport().height;nb.forEach(function(pb){if(pb&&pb!==na)ob-=t.getElementDimensions(pb).height;});if(ab)ob-=ab.getOffset();if(xa)ob-=t.getElementDimensions(xa).height;return Math.max(0,ob);}function gb(){if(mb.isVisible())return;r.hide(sa);r.show(ta);r.removeClass(document.documentElement,'miniSidebar');r.removeClass(ua,"_51xq");ra&&ra.setProps({shown:false},function(){return ib(false);});pa=true;qa=false;za=null;r.show(ua);r.addClass(document.documentElement,'sidebarMode');wa.show();bb.log('sidebar_show');g.inform('sidebar/show',mb);w.destroy('sidebar');}function hb(){var nb=fb(ga(ta.childNodes)),ob=wa.getItemHeight(),pb=8,qb=Math.floor((nb-pb)/ob);ea.set(na,'height',nb+'px');wa.setNumTopFriends(qb);if(x.ScrollableSidebarTypeaheadGK){ya.getView().setMaxHeight(nb);}else{var rb=Math.floor((nb-pb)/ob);rb=(rb-2)>0?rb-2:0;ya.getData().setMaxResults(rb);}g.inform('sidebar/resized',mb);g.inform('reflow');}function ib(nb){if(ua===null)return;r.conditionClass(ua,"_2e4g",nb);}function jb(){r.hide(ta);r.show(sa);r.show(ua);r.addClass(document.documentElement,'sidebarMode');r.addClass(document.documentElement,'miniSidebar');r.addClass(ua,"_51xq");var nb=fb([]);if(!ra){k.loadModules(["ChatMiniSidebar.react","ChatSearchSource"],function(ob,pb){if(!oa)oa=new pb({queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});ra=aa.render(aa.createElement(ob,{dataSource:oa,height:nb,maxEntries:50,onClickSearch:ib,onToggleSidebar:mb.toggle,shown:true}),sa);});}else ra.setProps({height:nb,shown:true});pa=false;qa=true;w.destroy('sidebar');bb.log('minisidebar_show');g.inform('minisidebar/show',mb);g.inform('reflow');}function kb(){new i('/ajax/chat/settings.php').setHandler(ka).setErrorHandler(ka).setData({sidebar_mode:p.isEnabled()}).setAllowCrossPageTransition(true).send();}function lb(){var nb=true;if(!p.isEnabled()){bb.log('state_not_enabled');nb=false;}if(!q.isViewportCapable())if(!q.isViewportCapableForMiniSidebar()){bb.log('state_not_shown_viewport_mini');nb=false;}if(nb)j.bumpEntityKey(ma,'state_viewport_can_show');if(p.isHidden()){bb.log('state_not_shown_hidden');nb=false;}if(q.hasLowFriendCount()){bb.log('state_not_shown_num_friends');nb=false;}var ob=nb?'state_shown':'state_not_shown';bb.log(ob);j.bumpEntityKey(ma,ob);}var mb={init:function(nb,ob,pb,qb){mb.init=ka;n.loaded();ua=nb;wa=ob;ya=pb;va=qb;na=s.find(nb,'div.fbChatSidebarBody');sa=s.find(nb,"._51x-");ta=s.find(nb,"._51x_");xa=s.find(nb,"._5qqe");var rb=s.find(nb,"._x1u");if(rb)aa.render(aa.createElement(o,{className:"_3a-4 _5q85"}),rb);if(l.get('sidebar_react_dropdown',false)){var sb=s.find(nb,"._1ltf");if(sb)ba.onAfterLoad(function(){k.loadModules(["ChatSidebarDropdown.react"],function(tb){aa.render(aa.createElement(tb,{isNormalSidebar:true,onToggleSidebar:function(){return n.toggle();}}),sb);});});}u.listen(window,'resize',db);ba.onAfterLoad(function(){k.loadModules(["ChatSidebarSheet"],function(tb){var ub=new tb(nb);ub.subscribe('updated',db);});});wa.setScrollContainer(y.byClass(wa.getRoot(),'uiScrollableAreaWrap'));wa.subscribe(['render','show','hide'],ja(function(tb){var ub=ca.getInstance(wa.getRoot());ub&&ub.adjustGripper();}));g.subscribe('chat/option-changed',function(tb,ub){if(ub.name==='hide_groups')db();});g.subscribe(['AppsDivebar/show-apps','AppsDivebar/hide-apps'],db);pb.getCore().subscribe('sidebar/typeahead/active',mb.updateOnActiveTypeahead);pb.subscribe('reset',function(){if(!pb.getCore().getValue()&&!wa.isVisible())mb.updateOnActiveTypeahead(null,false);});g.subscribeOnce('buddylist-nub/initialized',function(tb,ub){u.listen(ub.getButton(),'click',function(event){var vb=p.isHidden();n.show();n.enable();var wb=q.shouldShowSidebar()||q.shouldShowMiniSidebar();if(vb&&!wb)n.hide();return !wb;});});z.subscribe('privacy-user-presence-changed',db);db();m.init(wa);fa.addPersistentRight(mb.getVisibleWidth);mb.inform('sidebar/initialized',mb,g.BEHAVIOR_PERSISTENT);g.inform('sidebar/initialized',mb,g.BEHAVIOR_PERSISTENT);ab=new da(xa);ab.subscribe('resized',db);p.addListener(function(){var tb=p.getState(),ub=p.getPrevState();if(tb.enabled!==ub.enabled){if(tb.enabled){db();setTimeout(eb,0);}else cb();kb();}});},updateOnActiveTypeahead:function(nb,ob){if(!pa)return;if(ob){wa.hide();}else{wa.show();db();}},ensureLoaded:function(){if(!p.isEnabled())return;if(p.isLoaded())return;if(la('pagelet_sidebar'))return;d(['UIPagelet'],function(nb){var ob=s.create('div',{id:'pagelet_sidebar'});s.appendContent(document.body,ob);nb.loadFromEndpoint('SidebarPagelet','pagelet_sidebar');});n.loaded();},hide:function(){if(p.isHidden())return;n.hide();cb();},unhide:function(){if(!p.isHidden())return;n.show();db();},getVisibleWidth:function(){if((!pa&&!qa)||!ua)return 0;if(za===null){za=ua.offsetWidth;if(qa)za=206;}return za;},isVisible:function(){return pa;},resize:db,toggle:function(){n.toggle();}};Object.assign(mb,h);e.exports=mb;},null);
__d("ChatTypeaheadBehavior",["BanzaiLogger","ChatOpenTab","ChatTypeaheadEvent","CSS","MercuryTypeaheadConstants","Parent","Rect","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();function o(q,r){var s=l.byClass(q,"_4oes");if(s)j.conditionClass(s,"_5q83",r);}function p(q){"use strict";this._typeahead=q;this._loggedQuery=false;}p.prototype.enable=function(){"use strict";var q=this._typeahead;this._subscriptions=[q.subscribe('focus',function(){this._loggedQuery=false;q.getData().refreshData();o(q.getElement(),true);}.bind(this)),q.subscribe('blur',function(r){if(this._loggedQuery)g.log('ChatTypeaheadLoggerConfig',{event:i.ABANDONED_QUERY,max_results:q.getData().getMaxResults(),num_friend_results:q.getView().results.filter(function(s){return s.render_type===k.FRIEND_TYPE;}).length,query:q.getCore().value});q.getCore().reset();o(q.getElement(),false);this._loggedQuery=false;}.bind(this)),q.subscribe('respond',function(r,s){if(!this._loggedQuery&&q.getCore().getValue().length>0){g.log('ChatTypeaheadLoggerConfig',{event:i.NEW_QUERY});this._loggedQuery=true;}if(s.value&&s.value===q.getCore().getValue()){if(!s.results.length){var t=s.value.toLowerCase(),u=q.getData().getQueryCache();if(!s.isAsync&&!u.hasOwnProperty(t))return;q.getView().showNoResults();}j.addClass(q.getElement(),'hasValue');}}.bind(this)),q.subscribe('reset',function(){j.removeClass(q.getElement(),'hasValue');}),q.subscribe('select',function(r,s){var t=s.selected.uid;if(s.selected.mercury_thread&&!s.selected.mercury_thread.is_canonical)t=s.selected.mercury_thread.thread_fbid;q.getView().hide();g.log('ChatTypeaheadLoggerConfig',{event:i.RESULT_SELECTED,max_results:q.getData().getMaxResults(),result_type:s.selected.render_type});this._loggedQuery=false;h.openTabByType(t,s.selected.type,'typeahead');}.bind(this)),q.subscribe('highlight',function(r,s){if(s.index>=0){var t=q.getView().getItems()[s.index];if(t){var u=new m(t),v=t.offsetParent,w=u.boundWithin(new m(v)).getPositionVector();u.getPositionVector().sub(w).scrollElementBy(v);}}})];};p.prototype.disable=function(){"use strict";this._subscriptions.forEach(function(q){this._typeahead.unsubscribe(q);},this);this._subscriptions=null;};Object.assign(p.prototype,{_subscriptions:null});e.exports=p;},null);
__d("WebMessengerEvents",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=Object.assign(new g(),{MASTER_DOM_CHANGED:'master-dom-changed',DETAIL_DOM_CHANGED:'detail-dom-changed',FOCUS_COMPOSER:'focus-composer',FOCUS_SEARCH:'focus-search',FOCUS_AND_SELECT_SEARCH:'focus-and-select-search',STICKER_CLICKED:'sticker-clicked',SUBMIT_REPLY:'submit-reply',UPDATE_SELECTION:'update-selection',masterDOMChanged:function(){this.inform(h.MASTER_DOM_CHANGED);},detailDOMChanged:function(){this.inform(h.DETAIL_DOM_CHANGED);},focusComposer:function(){this.inform(h.FOCUS_COMPOSER);},focusSearch:function(){this.inform(h.FOCUS_SEARCH);},focusAndSelectSearch:function(){this.inform(h.FOCUS_AND_SELECT_SEARCH);},updateSelection:function(i){this.inform(h.UPDATE_SELECTION,i);},stickerClicked:function(i,j){this.inform(h.STICKER_CLICKED,{packID:i,stickerID:j});},submitReply:function(){this.inform(h.SUBMIT_REPLY);}});e.exports=h;},null);
__d("WebMessengerSubscriptionsHandler",["SubscriptionsHandler"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=new g('webmessenger');e.exports=h;},null);
__d("isWebMessengerURI",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){return (/^(\/messages)/).test(h.getPath());}e.exports=g;},null);
__d("WebMessengerWidthControl",["Arbiter","CSS","CSSClassTransition","DOM","DOMDimensions","Event","Style","URI","ViewportBounds","WebMessengerEvents","WebMessengerSubscriptionsHandler","$","cx","csx","isWebMessengerURI","requestAnimationFrame","setTimeoutAcrossTransitions","shield","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();var z=205,aa=981,ba=257,ca=18,da=848,ea=724,fa=.57,ga=56,ha,ia,ja;function ka(pa,qa,ra){this.masterChanged=pa;this.detailChaned=qa;q.addSubscriptions(l.listen(window,'resize',y(x(la,this,this),100)),g.subscribe(['sidebar/initialized','sidebar/show','sidebar/hide','minisidebar/show'],x(la,this,this),g.SUBSCRIBE_NEW));var sa=oa()?ga:0;if(ra)sa=z;this._width=oa()?0:da;ja=true;la(this,sa);}function la(pa,qa){var ra=o.getRight()+o.getLeft();ra=ra||qa||0;var sa=k.getViewportWithoutScrollbarDimensions().width-ra,ta=Math.round(Math.max(0,sa/2-aa/2));sa=aa+ta-ba;sa-=ca;sa=Math.max(ea,Math.min(da,sa));if(!isNaN(sa)&&pa._width!==sa){pa._width=sa;var ua=Math.round(sa/(1+fa)),va=sa-ua;pa.masterChanged(va);pa.detailChaned(ua);if(oa()){var wa=sa+ba;ma(function(){if(ia){document.body.className=ia;ia='';}na(wa+'px');h.removeClass(document.body,"_5uj5");ja&&p.detailDOMChanged();ja=false;},ia);}}}function ma(pa,qa){qa&&h.addClass(document.documentElement,"_5uj6");v(pa);qa&&w(h.removeClass.bind(null,document.documentElement,"_5uj6"),1000);}function na(pa){m.set(j.find(document,"div._uaw"),'width',pa);m.set(r('globalContainer'),'width',pa);}function oa(){if(!ha)ha=h.hasClass(document.body,"_6nw");return ha;}i.registerHandler(function(pa,qa,ra,sa){function ta(ua){return oa()&&u(new n(ua));}if(ta(sa)){ia=qa;return true;}else if(ta(ra)){ma(function(){pa.className=qa;na('');},true);return true;}});e.exports=ka;},null);
__d("Dock",["Event","shield","Arbiter","ArbiterMixin","ChatQuietLinks","CSS","DataStore","DOM","Parent","Scroll","Style","Toggler","Vector","csx","emptyFunction","WebMessengerWidthControl"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();b('WebMessengerWidthControl');function v(){}Object.assign(v,j,{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function(w){this.init=u;this.rootEl=w;this.calculateViewportDimensions();this.calculateFlyoutHeightOffset();k.removeEmptyHrefs(this.rootEl);g.listen(w,'click',this._onClick.bind(this));g.listen(window,'resize',this._onWindowResize.bind(this));r.subscribe(['show','hide'],function(x,y){var z=y.getActive();if(!n.contains(w,z))return;if(l.hasClass(z,'fbNub')){this.notifyNub(z,x);if(x==='show')this._resizeNubFlyout(z);}else{var aa=o.byClass(z,'fbNubFlyout');if(aa)l.conditionClass(aa,'menuOpened',x==='show');}}.bind(this));this.inform('init',{},i.BEHAVIOR_PERSISTENT);},calculateViewportDimensions:function(){return (this.viewportDimensions=s.getViewportDimensions());},calculateFlyoutHeightOffset:function(){this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+s.getElementDimensions(this.rootEl).y;var w=n.scry(document,"div._4f7n")[0];if(w){var x=q.isFixed(w)?'viewport':'document';this.flyoutHeightOffset+=s.getElementPosition(w,x).y+s.getElementDimensions(w).y;}},toggle:function(w){var x=this._findFlyout(w);if(!x)return;this.subscribe('init',function(){r.toggle(w);});},show:function(w){this.subscribe('init',function(){r.show(w);});},showNub:function(w){l.show(w);},hide:function(w){this.subscribe('init',function(){var x=r.getInstance(w);n.contains(w,x.getActive())&&x.hide();});},hideNub:function(w){l.hide(w);this.hide(w);},setUseMaxHeight:function(w,x){l.conditionClass(w,'maxHeight',x!==false);this._resizeNubFlyout(w);},_resizeNubFlyout:function(w){var x=this._findFlyout(w);if(!x||l.hasClass(w,'placeholder')||!(l.hasClass(w,'openToggler')||l.hasClass(w,'opened')))return;var y=n.find(x,'div.fbNubFlyoutOuter'),z=n.find(y,'div.fbNubFlyoutInner'),aa=n.find(z,'div.fbNubFlyoutBody'),ba=p.getTop(aa),ca=aa.offsetHeight;q.set(aa,'height','auto');var da=s.getElementDimensions(x),ea=s.getElementDimensions(aa),fa=this.getMaxFlyoutHeight(w);q.set(x,'max-height',fa+'px');q.set(y,'max-height',fa+'px');da=s.getElementDimensions(x);var ga=s.getElementDimensions(z),ha=ga.y-ea.y,ia=da.y-ha,ja=parseInt(aa.style.height||aa.clientHeight,10),ka=ia!==ja;if(da.y>ha&&ka)q.set(aa,'height',ia+'px');l.removeClass(x,'swapDirection');var la=s.getElementPosition(x).x;l.conditionClass(x,'swapDirection',function(){if(la<0)return true;return (la+da.x>this.viewportDimensions.x);}.bind(this)());if(ka&&ba+ca>=ea.y){p.setTop(aa,aa.scrollHeight);}else p.setTop(aa,ba);this.notifyNub(w,'resize');},getMaxFlyoutHeight:function(w){var x=this._findFlyout(w),y=s.getElementPosition(x,'viewport'),z=s.getElementDimensions(x),aa=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.flyoutHeightOffset)-(this.viewportDimensions.y-y.y-z.y);return Math.max(aa,0);},resizeAllFlyouts:function(){var w=this._getAllNubs(),x=w.length;while(x--)this._resizeNubFlyout(w[x]);},hideAllFlyouts:function(){var w=this._getAllNubs(),x=w.length;while(x--)this.hide(w[x]);},_getAllNubs:function(){var w=n.scry(this.rootEl,"div._50-v.openToggler");return w.concat(n.scry(this.rootEl,"div._50-v.opened"));},_onClick:function(event){var w=event.getTarget(),x=o.byClass(w,'fbNub');if(x){if(o.byClass(w,'fbNubFlyoutTitlebar')){var y=o.byTag(w,'a'),z=w.nodeName=='INPUT'&&w.getAttribute('type')=='submit';if(!y&&!z){this.hide(x);return false;}}this.notifyNub(x,'click');}},_onWindowResize:function(event){this.calculateViewportDimensions();this.resizeAllFlyouts();},_findFlyout:function(w){return l.hasClass(w,'fbNubFlyout')?w:n.scry(w,'div.fbNubFlyout')[0]||null;},registerNubController:function(w,x){m.set(w,'dock:nub:controller',x);x.subscribe('nub/button/content-changed',h(this.inform,this,'resize',w));x.subscribe('nub/flyout/content-changed',h(this._resizeNubFlyout,this,w));},unregisterNubController:function(w){m.remove(w,'dock:nub:controller');},notifyNub:function(w,x,y){var z=m.get(w,'dock:nub:controller');z&&z.inform(x,y);}});e.exports=a.Dock||v;},null);
__d("NubController",["ArbiterMixin","Dock"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(){}Object.assign(i.prototype,g,{init:function(j){this.el=j;h.registerNubController(j,this);return this;},buttonContentChanged:function(){this.inform('nub/button/content-changed');},flyoutContentChanged:function(){this.inform('nub/flyout/content-changed');},hide:function(){h.hide(this.el);},show:function(){h.show(this.el);}});e.exports=i;},null);
__d("DropdownContextualHelpLink",["DOM","ge"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={set:function(j){var k=h('navHelpCenter');if(k!==null)g.replace(k,j);}};e.exports=i;},null);
__d("ChatPerfInstrumentation",["BanzaiLogger","ChatPerfEvent","Promise","emptyFunction","performanceAbsoluteNow"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l={_startTime:(Number),init:function(){this._startTime=k();return new i(function(m){return m();});},_log:function(event){g.log('ChatPerfLoggerConfig',{event:event,duration:k()-this._startTime});},logTTI:function(){this.logTTI=j;this._log(h.TTI);},logCHAT_CONVERSATION_TTI:function(){this.logCHAT_CONVERSATION_TTI=j;this._log(h.CHAT_CONVERSATION_TTI);}};e.exports=l;},null);
__d("ChatBehavior",["Arbiter","AvailableList","AvailableListConstants","MercuryConstants"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=b('MercuryConstants').ChatNotificationConstants,k=false,l=h.getWebChatNotification&&h.getWebChatNotification(),m=k,n=true,o=Object.assign(new g(),{ON_CHANGED:'changed',notifiesUserMessages:function(){return l!==j.NO_USER_MESSAGE_NOTIFICATION;},ignoresRemoteTabRaise:function(){return m;},showsTabUnreadUI:function(){return n;}});function p(){o.inform(o.ON_CHANGED);}h.subscribe&&h.subscribe(i.ON_CHAT_NOTIFICATION_CHANGED,function(){var q=l,r=h.getWebChatNotification();l=r;if(q!=r)p();});g.subscribe('chat/set_does_page_occlude_tabs',function(q,r){m=!!r;p();});g.subscribe('chat/set_show_tab_unread_ui',function(q,r){n=!!r;p();});e.exports=o;},null);
__d("ChatCookieInterface",["ChatConfig","InitialServerTime","LogHistory","PresenceState","PresenceUtil","areJSONRepresentationsEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i.getInstance('chat_cookie'),n=h.serverTime,o=g.get('tab_max_load_age')||3600000,p=n-o,q={store:function(u,v){if(u.uct2==v.lastChangeTime)return u;var w=t(u,v),x={};if(!w){x.old_tabs=u&&u.t2&&JSON.stringify(u.t2);x.old_promoted=u&&u.lm2;x.old_time=u&&u.uct2;x.old_reason=u&&u.tr;x.old_window=u&&u.tw;var y=[];v.tabs.forEach(function(z){if(!z.fragile){var aa={i:z.id,si:z.server_id};if(z.raised)aa.r=1;y.push(aa);}});u.t2=y;u.lm2=v.promotedID;u.uct2=v.lastChangeTime;u.tr=v.lastChangeReason;u.tw=k.getSessionID();x.new_tabs=JSON.stringify(u.t2);x.new_promoted=u.lm2;x.new_time=u.uct2;x.new_reason=u.tr;x.new_window=u.tw;m.debug('store',x);}else{x.tabs=u&&u.t2&&JSON.stringify(u.t2);x.promoted=u&&u.lm2;x.time=u&&u.uct2;x.reason=u&&u.tr;x.window=u&&u.tw;x.last_change_time=v.lastChangeTime;x.last_change_reason=v.lastChangeReason;x.min_change_time=p;m.warn('store_bad_state',x);}return u;},load:function(u,v){if(!u){m.warn('load_bad_state',u);return false;}var w=t(u,v);if(!w||w===v.lastChangeTime)return false;var x={};x.old_tabs=JSON.stringify(v.tabs);x.old_promoted=v.promotedID;x.old_time=v.lastChangeTime;x.old_reason=v.lastChangeReason;x.window_id=k.getSessionID();x.cookie_tabs=u&&u.t2&&JSON.stringify(u.t2);x.cookie_promoted=u&&u.lm2;x.cookie_time=u&&u.uct2;x.cookie_reason=u&&u.tr;x.cookie_window=u&&u.tw;v.lastChangeTime=w;v.lastChangeReason='load';var y=r(v,u.t2,u.lm2||null);x.load_result=y;x.new_tabs=JSON.stringify(v.tabs);x.new_promoted=v.promotedID;x.new_time=v.lastChangeTime;x.new_reason=v.lastChangeReason;var event='load';if(!v.isInitialized)event+='_init';m.log(event,x);return y;}};function r(u,v,w){var x;if(!s(u,v,w))return false;var y=u.tabs.filter(function(ba){return !!ba.fragile;}),z={};u.promotedID=null;u.tabs=v.map(function(ba){var ca={id:ba.i,server_id:ba.si};if(ca.id==w)u.promotedID=ca.id;if(ba.r)ca.raised=true;z[ca.id]=ca;return ca;});u.tabs=u.tabs.filter(function(ba){return !!ba;});if(u.localRaised)for(var aa in u.localRaised)if(!z[aa]||!z[aa].raised)delete u.localRaised[aa];y=y.filter(function(ba){return !z[ba.id];});(x=u.tabs).push.apply(x,y);return true;}function s(u,v,w){if(w!=u.promotedID)return true;var x=u.tabs.filter(function(aa){return !aa.fragile;});if(v.length!=x.length)return true;for(var y=0,z=v.length;y<z;y++)if(!l(v[y],x[y]))return true;return false;}function t(u,v){var w=j.verifyNumber(u.uct2);if(!w||typeof w!=='number'){m.warn('bad_cookie_version',u);return null;}if(w<v.lastChangeTime||w<p)return null;return w;}e.exports=q;},null);
__d("ChatTabPresence",["AvailableList","ChatTabModel","MercuryIDs"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={};function k(l){var m=i.getUserIDFromThreadID(l);if(m&&g.shouldUpdateForID(m))g.updateForID(m);}h.addListener(function(){var l=h.get();l.tabs.forEach(function(m){if(m.raised&&!j[m.id])k(m.id);});j={};l.tabs.forEach(function(m){if(m.raised)j[m.id]=true;});});e.exports={};},null);
__d("ChatMentionsNotifications",["fbt","CurrentUser","MercuryParticipants"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={notifyIfMessageToMe:function(k){var l='fbid:'+h.getID(),m=k.body;i.get(l,function(n){var o=new RegExp(n.short_name,"i");if(o.test(m))j._notify(k);});},_notify:function(k){var l=48,m=k.body;if(m.length>l)m=m.substr(0,l-3)+"...";new Notification(g._("You were tagged in a message!"),{body:m,icon:"http://facebook.com//images/icons-large/fb-xl.png"});}};e.exports=j;},null);
__d("ChatTabViewInstances",["Map"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("swfobject",["AsyncRequest","Bootloader","CSS","htmlSpecialChars"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();if(typeof k=="undefined")var k={};if(typeof k.util=="undefined")k.util={};if(typeof k.SWFObjectUtil=="undefined")k.SWFObjectUtil={};k.SWFObject=function(m,n,o,p,q,r,s,t,u,v){if(!document.getElementById)return;this.DETECT_KEY=v?v:'detectflash';this.skipDetect=k.util.getRequestParameter(this.DETECT_KEY);this.params={};this.variables={};this.attributes=[];this.fallback_html='';this.fallback_js_fcn=function(){};if(m)this.setAttribute('swf',m);if(n)this.setAttribute('id',n);if(o)this.setAttribute('width',o);if(p)this.setAttribute('height',p);this.installedVer=k.SWFObjectUtil.getPlayerVersion();if(q){if(!(q instanceof Array))q=[q];var w;q.forEach(function(z){w=new k.PlayerVersion(z.toString().split('.'));if(w.major==this.installedVer.major){this.setAttribute('version',w);return;}else if(!this.getAttribute('version')||w.major<this.getAttribute('version').major)this.setAttribute('version',w);}.bind(this));}if(!window.opera&&document.all&&this.installedVer.major>7)if(!k.unloadSet){k.SWFObjectUtil.prepUnload=function(){var z=function(){},aa=function(){};window.attachEvent("onunload",k.SWFObjectUtil.cleanupSWFs);};window.attachEvent("onbeforeunload",k.SWFObjectUtil.prepUnload);k.unloadSet=true;}if(r)this.addParam('bgcolor',r);var x=s?s:'high';this.addParam('quality',x);this.setAttribute('useExpressInstall',false);this.setAttribute('doExpressInstall',false);var y=(t)?t:window.location;this.setAttribute('xiRedirectUrl',y);this.setAttribute('redirectUrl','');if(u)this.setAttribute('redirectUrl',u);};k.SWFObject.ieWorkaroundApplied=false;k.SWFObject.ensureIEWorkaroundAttached=function(){if(!k.SWFObject.ieWorkaroundApplied&&document.attachEvent){k.SWFObject.ieWorkaroundApplied=true;document.attachEvent('onpropertychange',k.SWFObject.onDocumentPropertyChange);}};k.SWFObject.onDocumentPropertyChange=function(event){if(event.propertyName=="title"){var m=document.title;if(m!=null&&m.indexOf('#!')!=-1){m=m.substring(0,m.indexOf('#!'));document.title=m;}}};Object.assign(k.SWFObject.prototype,{useExpressInstall:function(m){this.xiSWFPath=!m?"/swf/expressinstall.swf":m;this.setAttribute('useExpressInstall',true);},setAttribute:function(m,n){this.attributes[m]=n;},getAttribute:function(m){return this.attributes[m]||"";},addParam:function(m,n){this.params[m]=n;},getParams:function(){return this.params;},addVariable:function(m,n){this.variables[m]=n;},getVariable:function(m){return this.variables[m]||"";},getVariables:function(){return this.variables;},getVariablePairs:function(){var m=[],n,o=this.getVariables();for(n in o)m[m.length]=n+"="+o[n];return m.join('&');},getSWFHTML:function(){var m,n,o;if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute('swf',this.xiSWFPath);}n={type:'application/x-shockwave-flash',src:this.getAttribute('swf'),width:this.getAttribute('width'),height:this.getAttribute('height'),style:this.getAttribute('style')||'display: block;',id:this.getAttribute('id'),name:this.getAttribute('id')};var p=this.getParams();for(var q in p)n[q]=p[q];o=this.getVariablePairs();if(o)n.flashvars=o;m=l('embed',n,null);}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute('swf',this.xiSWFPath);}n={id:this.getAttribute('id'),classid:'clsid:D27CDB6E-AE6D-11cf-96B8-444553540000',width:this.getAttribute('width'),height:this.getAttribute('height'),style:this.getAttribute('style')||'display: block;'};var r=l('param',{name:'movie',value:this.getAttribute('swf')},null),p=this.getParams();for(var q in p)r+=l('param',{name:q,value:p[q]},null);o=this.getVariablePairs();if(o)r+=l('param',{name:'flashvars',value:o},null);m=l('object',n,r);}return m;},write:function(m){if(this.getAttribute('useExpressInstall')){var n=new k.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(n)&&!this.installedVer.versionIsValid(this.getAttribute('version'))){this.setAttribute('doExpressInstall',true);this.addVariable("MMredirectURL",escape(this.getAttribute('xiRedirectUrl')));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}var o=(typeof m=='string')?document.getElementById(m):m;if(!o)return false;i.addClass(o,'swfObject');o.setAttribute('data-swfid',this.getAttribute('id'));if(this.skipDetect||this.getAttribute('doExpressInstall')||this.installedVer.versionIsValid(this.getAttribute('version'))){k.SWFObject.ensureIEWorkaroundAttached();o.innerHTML=this.getSWFHTML();return true;}else{if(this.getAttribute('redirectUrl')!="")document.location.replace(this.getAttribute('redirectUrl'));var p=this.getAttribute('version').major+'.'+this.getAttribute('version').minor+'.'+this.getAttribute('version').release+'.'+this.getAttribute('version').build,q=this.installedVer.major+'.'+this.installedVer.minor+'.'+this.installedVer.release+'.'+this.installedVer.build;this.fallback_js_fcn(q,p);o.innerHTML=this.fallback_html;}return false;}});k.SWFObjectUtil.getPlayerVersion=function(){var m=new k.PlayerVersion([0,0,0,0]),n;if(navigator.plugins&&navigator.mimeTypes.length){for(var o=0;o<navigator.plugins.length;o++)try{var q=navigator.plugins[o];if(q.name=='Shockwave Flash'){n=new k.PlayerVersion(q.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+(r|d)|\s+b[0-9]+)/,".").split("."));if(typeof m=='undefined'||n.major>m.major||(n.major==m.major&&(n.minor>m.minor||(n.minor==m.minor&&(n.release>m.release||(n.release==m.release&&n.build>m.build))))))m=n;}}catch(p){}}else if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var r=1,s=3;while(r)try{s++;r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+s);m=new k.PlayerVersion([s,0,0]);}catch(t){r=null;}}else{try{var r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(u){try{var r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");m=new k.PlayerVersion([6,0,21]);r.AllowScriptAccess="always";}catch(v){if(m.major==6)return m;}try{r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(w){}}if(r!=null)m=new k.PlayerVersion(r.GetVariable("$version").split(" ")[1].split(","));}return m;};k.PlayerVersion=function(m){this.major=m[0]!=null?parseInt(m[0],10):0;this.minor=m[1]!=null?parseInt(m[1],10):0;this.release=m[2]!=null?parseInt(m[2],10):0;this.build=m[3]!=null?parseInt(m[3],10):0;};k.PlayerVersion.prototype.versionIsValid=function(m){if(this.major<m.major)return false;if(this.major>m.major)return true;if(this.minor<m.minor)return false;if(this.minor>m.minor)return true;if(this.release<m.release)return false;if(this.release>m.release)return true;if(this.build<m.build)return false;return true;};k.util={getRequestParameter:function(m){var n=document.location.search||document.location.hash;if(m==null)return n;if(n){var o=n.substring(1).split("&");for(var p=0;p<o.length;p++)if(o[p].substring(0,o[p].indexOf("="))==m)return o[p].substring((o[p].indexOf("=")+1));}return "";}};k.SWFObjectUtil.cleanupSWFs=function(){var m=document.getElementsByTagName("OBJECT");for(var n=m.length-1;n>=0;n--){m[n].style.display='none';for(var o in m[n])if(typeof m[n][o]=='function')m[n][o]=function(){};}};if(!document.getElementById&&document.all)document.getElementById=function(m){return document.all[m];};k.spawn_flash_update_dialog=function(){new g().setURI('/ajax/flash_update_dialog.php').setMethod('GET').setReadOnly(true).send();};k.showFlashErrorDialog=function(m,n){h.loadModules(["ErrorDialog"],function(o){o.show(m,n);});};function l(m,n,o){var p=/^[A-Za-z0-9\-]+$/;if(!m.match(p))throw new Error('Invalid tag '+m);var q='<'+m;for(var r in n){if(!r.match(p))throw new Error('Invalid attr '+r);q+=' '+r+'="'+j(n[r])+'"';}if(o===null){return q+'/>';}else return q+'>'+o+'</'+m+'>';}e.exports=a.deconcept||k;},null);
__d("SoundPlayer",["Arbiter","URI","createArrayFromMixed","swfobject"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=b('swfobject').SWFObject,k={},l=null,m=false,n='so_sound_player',o='/swf/SoundPlayer.swf?v=1',p='10.0.22.87',q=null;function r(z){var aa=new h(z);if(!aa.getDomain())return new h(window.location.href).setPath(aa.getPath()).toString();return z;}function s(z){var aa=new h(z).getPath();if(/\.mp3$/.test(aa))return 'audio/mpeg';if(/\.og[ga]$/.test(aa))return 'audio/ogg';return '';}function t(){if(!q){var z=document.createElement('audio');if(!z||!z.canPlayType)return null;z.setAttribute('preload','auto');document.body.appendChild(z);q=z;}return q;}function u(){var z=document[n]||window[n];if(z)if(!z.playSound&&z.length)z=z[0];return (z&&z.playSound&&z.loopSound)?z:null;}function v(){return m;}function w(z,aa,ba){l={path:z,sync:aa,loop:ba};}function x(){m=true;if(l){var z=u();if(l.loop){z.loopSound(l.path,l.sync);}else z.playSound(l.path,l.sync);}}var y={init:function(z){z=i(z);var aa;for(var ba=0;ba<z.length;++ba){aa=z[ba];if(k[aa])return;}var ca=t();for(ba=0;ca&&ba<z.length;++ba){aa=z[ba];if(ca.canPlayType(aa)){k[aa]=true;return;}}k['audio/mpeg']=true;if(u())return;try{g.registerCallback(x,['sound/player_ready','sound/ready']);var ea=document.createElement('div');ea.id='sound_player_holder';document.body.appendChild(ea);var fa=new j(o,n,'1px','1px',[p],'#ffffff');fa.addParam('allowscriptaccess','always');fa.addParam('wmode','transparent');fa.addVariable('swf_id',n);fa.fallback_html=' ';fa.write(ea.id);window[n]=fa;g.inform('sound/player_ready');}catch(da){}},play:function(z,aa){z=i(z);var ba=t(),ca,da;for(var ea=0;ba&&ea<z.length;++ea){ca=z[ea];da=s(ca);if(!ba.canPlayType(da))continue;y.init([da]);ba.src=r(ca);if(aa){ba.setAttribute('loop','');}else ba.removeAttribute('loop');ba.play();return;}for(ea=0;ea<z.length;++ea){ca=r(z[ea]);da=s(ca);if(da!='audio/mpeg')continue;y.init([da]);var fa=u();if(!v()){w(ca,true,aa);return;}else if(fa){if(aa){fa.loopSound(ca,true);}else fa.playSound(ca,true);return;}}},stop:function(z){z=i(z);for(var aa=0;aa<z.length;++aa){var ba=r(z[aa]),ca=t(),da=u();if(ca&&ca.src==ba){ca.pause();ca.removeAttribute('src');}else da&&da.stopSound(ba);}}};e.exports=y;},null);
__d("SoundSynchronizer",["SoundPlayer","WebStorage","createArrayFromMixed"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j='fb_sounds_playing3';function k(){var o=h.getLocalStorage();if(o)try{var q=o[j];if(q){q=JSON.parse(q);if(Array.isArray(q))return q;}}catch(p){}return [];}function l(o){var p=h.getLocalStorage();if(p){var q=k();q.push(o);while(q.length>5)q.shift();try{p[j]=JSON.stringify(q);}catch(r){}}}function m(o){return k().some(function(p){return p===o;});}var n={play:function(o,p,q){o=i(o);p=p||(o[0]+Math.floor(Date.now()/1000));if(m(p))return;g.play(o,q);l(p);},isSupported:function(){return !!h.getLocalStorage();}};e.exports=n;},null);
__d("SoundRPC",["Event","SoundSynchronizer"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(k,l,m){h.play(k,l,m);}var j={playLocal:i,playRemote:function(k,l,m,n){var o={paths:l,sync:m,loop:n};k.postMessage(JSON.stringify(o),'*');},supportsRPC:function(){return !!window.postMessage;},_listen:function(){g.listen(window,'message',function(k){if(!/\.facebook.com$/.test(k.origin))return;var l=JSON.parse(k.data||'{}');i(l.paths,l.sync,l.loop);});}};e.exports=j;},null);
__d("Sound",["SoundInitialData","SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent_DEPRECATED","isFacebookURI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=null,o={init:function(s){if(!n)h.init(s);},play:function(s,t,u){if(n){i.playRemote(n.contentWindow,s,t,false);}else i.playLocal(s,t,u);},stop:function(s){if(!n)h.stop(s);}},p=new k(location.href);if(p.getSubdomain()&&p.getSubdomain()!=='www')p.setSubdomain('www');var q=p.getDomain();function r(){if(l.ie()<9)return false;if(g.RPC_DISABLED)return false;return j.isSupported()&&i.supportsRPC();}if(m(p)&&location.host!==q&&r()){n=document.createElement('iframe');n.setAttribute('src','//'+q+'/sound_iframe.php');n.style.display='none';document.body.appendChild(n);}e.exports=o;},null);
__d("ChatNewMessageHandler",["ChatActivity","ChatMentionsNotifications","ChatTabModel","ChatTabViewInstances","JSLogger","MercuryAssert","MercuryBrowserAlerts","UserActivity","MercuryConfig","MercuryThreadlistConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=k.create('chat_new_message'),r={_notify:function(s,t,u){if(o.DesktopNotificationsGK)h.notifyIfMessageToMe(t);var v=j.get(s);u.view_is_visible=v&&v.isVisible();u.view_is_focused=v&&v.isFocused();if(!u.view_is_visible)q.log('message_to_hidden');u.is_active=g.isActive();m.messageReceived(t);},newMessage:function(s,t){l.isThreadID(s);var u=i.getTab(s),v={thread_id:s,message_id:t.message_id,to_new_tab:!u,to_raised_tab:u?!!u.raised:true};this._notify(s,t,v);q.log('message',v);}};m.subscribe('before-alert',function(s,event){var t=event.threadID,u=j.get(t),v=i.getTab(t),w=p.MESSAGE_NOTICE_INACTIVITY_THRESHOLD;if(v&&v.raised&&u&&u.isVisible()&&u.isFocused()&&n.isActive(w)){u.tryMarkAsRead();event.cancelAlert();}});e.exports=r;},null);
__d("ChatTabLRUManager",["ChatTabViewInstances","ChatTabModel","InitialServerTime","MercuryThreads"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=b('MercuryThreads').get(),k={getLRUVisibleTab:function(l){if(l.hasRoomForRaisedTab())return (void 0);var m=Object.keys(l.getTabsToShow()||{}),n=1*60,o=null,p=Infinity;for(var q=0;q<m.length;q++){var r=m[q],s=j.getThreadMetaNow(r);if(h.isTabPromoted(r))continue;if(!g.get(r).hasEmptyInput()||!s)continue;var t=(i.serverTime-s.timestamp)/1000;if(!s.timestamp||(s.timestamp&&s.timestamp<p&&t>n)){o=s.thread_id;p=s.timestamp;}}return o;}};e.exports=k;},null);
__d("ChatTabPolicy",["ChatBehavior","ChatConfig","JSLogger","MercuryActionType","MercuryLogMessageType","MercuryAssert","MercuryIDs","MercuryParticipantTypes","MercurySourceType","MercuryThreadInfo","MercuryThreadMode","MercuryViewer","MessagingTag","PresencePrivacy","ShortProfiles","MercuryThreadActions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();var v=b('MercuryThreadActions').get(),w=i.create('tab_policy');e.exports={messageIsAllowed:function(x,y,z){var aa=x.thread_id,ba=y.message_id;l.isThreadID(aa);l.isParticipantID(y.author);var ca;if(p.isMuted(x)){ca={thread_id:aa,message_id:ba,mute_settings:x.mute_settings};w.log('message_thread_muted',ca);return;}if(x.mode==q.OBJECT_ORIGINATED){ca={thread_id:aa,message_id:ba,mode:x.mode};w.log('message_object_originated',ca);return;}if(y.source==o.EMAIL||y.source==o.TITAN_EMAIL_REPLY){ca={thread_id:aa,message_id:ba,source:y.source};w.log('message_source_not_allowed',ca);return;}var da=m.getUserIDFromParticipantID(y.author);if(!da){w.log('message_bad_author',{thread_id:aa,message_id:ba,user:da});return;}if(y.action_type!=j.USER_GENERATED_MESSAGE&&!this._messageIsNewlyCreatedGroup(y,x)){ca={thread_id:aa,message_id:ba,type:y.action_type};w.log('message_non_user_generated',ca);return;}if(x.is_canonical_user&&!g.notifiesUserMessages()){w.log('message_jabber',{thread_id:aa,message_id:ba});v.markSeen(aa,true);return;}if(x.is_canonical&&!x.canonical_fbid){w.log('message_canonical_contact',{thread_id:aa,message_id:ba});return;}if(x.folder!=s.INBOX){w.log('message_folder',{thread_id:aa,message_id:ba,folder:x.folder});return;}var ea=m.getUserIDFromParticipantID(r.getID());u.getMulti([da,ea],function(fa){if(!t.allows(da)){w.log('message_privacy',{thread_id:aa,message_id:ba,user:da});return;}var ga=fa[da].employee&&fa[ea].employee,ha=h.get('IsWorkUser',false);if(!ga&&!ha&&!fa[da].isCommercePage&&fa[da].type!==n.FRIEND){w.log('message_non_friend',{thread_id:aa,message_id:ba,user:da});return;}z();});},_messageIsNewlyCreatedGroup:function(x,y){return x.action_type===j.LOG_MESSAGE&&x.log_message_type===k.THREAD_NAME&&y.message_count===1;}};},null);
__d("ChatTabViewEvents",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("ChatTabViewSelector",["Arbiter","CSS","ChatTabActions","CurrentUser","DOM","DataStore","Event","MenuDeprecated","MercuryThreadTitle.react","NubController","React","ChatTabTemplates","Toggler","copyProperties","MercuryThreadInformer","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=b('MercuryThreadInformer').get(),v=b('MercuryThreads').get();function w(x){var y=r[':fb:chat:tab:selector'].build(),z=y.getRoot(),aa=y.getNode('menu'),ba=k.find(aa,'.uiMenuInner'),ca={},da=new p().init(z);h.hide(z);k.insertBefore(x,z);function ea(ha){var ia=0;for(var ja in ca){var ka=ca[ja],la=v.getThreadMetaNow(ja),ma=ka.getNode('unreadCount'),na=(la&&la.unread_count)||0;ia+=na;if(na>9)na='+';h.conditionClass(ma,'invisible_elem',!na);k.setContent(ma,na);}var oa=y.getNode('numMessages');h.conditionShow(oa,ia);k.setContent(oa,ia);}this.setTabData=function(ha){var ia=ca;ca={};if(ha.length<1){h.hide(z);return;}h.show(z);k.empty(ba);ha.forEach(function(la){var ma=r[':fb:chat:tab:selector:item'].build(),na=ma.getNode('content');ca[la.id]=ma;v.getThreadMeta(la.id,function(pa){q.render(q.createElement(o,{thread:pa,useAndSeparator:true,viewer:j.getID()}),na);});k.prependContent(ba,ma.getRoot());l.set(ma.getRoot(),'threadID',la.id);var oa=ma.getNode('closeButton');m.listen(oa,'click',function(event){i.closeTab(la.id,'selector/close-tab');event.kill();});});for(var ja in ia)if(ia.hasOwnProperty(ja)){var ka=ia[ja].getNode('content');ka&&q.unmountComponentAtNode(ka);}da.flyoutContentChanged();k.setContent(y.getNode('numTabs'),ha.length);ea();};function fa(event,ha){if(ha.menu!=aa)return;var ia=l.get(ha.item,'threadID');w.inform('selected',ia);s.hide(z);}function ga(event,ha){n.register(aa);}n.subscribe('select',fa.bind(this));s.listen('show',z,function(){g.inform('layer_shown',{type:'ChatTabSelector'});ga();});s.listen('hide',z,function(){g.inform('layer_hidden',{type:'ChatTabSelector'});});u.subscribe('threads-updated',ea);}t(w,new g());e.exports=w;},null);
__d("ChatTabController",["Arbiter","BanzaiLogger","ChatActivity","ChatConfig","ChatNewMessageHandler","ChatTabActions","ChatTabLRUManager","ChatTabModel","ChatTabPolicy","ChatTabViewEvents","ChatTabViewInstances","ChatTabViewSelector","JSLogger","MercuryViewer","Style","UserAgent_DEPRECATED","VideoCallCore","ChatTabPresence","ChatTypeaheadBehavior","MercuryThreadInformer","MercuryThreadActions","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();b('ChatTabPresence');b('ChatTypeaheadBehavior');var x=b('MercuryThreadInformer').get(),y=b('MercuryThreadActions').get(),z=b('MercuryThreads').get(),aa=j.get('tab_auto_close_timeout')||7200000,ba=s.create('tab_controller');function ca(na,oa,pa){var qa=n.get().tabs,ra=qa[na],sa,ta;if(qa.length===0)return false;var ua=qa.slice(na+1),va=qa.slice(0,na),wa=ua.concat(va);if(!oa)wa.reverse();if(ra)wa.push(ra);for(var xa=0;xa<wa.length;xa++){sa=wa[xa];ta=q.get(sa.id);if(ta&&ta.isVisible()&&(!pa||sa.raised)){ta.focus();return true;}}return false;}function da(na,oa){var pa=oa&&oa.getRightmostHiddenTab();if(pa===na)return null;return pa;}function ea(){return Math.floor(Math.random()*2147483648).toString(16);}function fa(na,oa,pa,qa){l.raiseTab(na,true,pa);var ra=oa&&oa.getLeftmostVisibleTab(),sa=oa&&oa.getTabsToShow();if(sa&&!sa[na]&&ra){n.promoteThreadInPlaceOfThread(na,ra,da(na,oa),true);}else l.promoteTab(na);g.inform('chat/open-tab',na);var ta=q.get(na);ta&&ta.focus();}function ga(na,oa){if(!n.getTab(na))l.raiseTab(na,false);var pa=oa&&m.getLRUVisibleTab(oa),qa=oa&&oa.getTabsToShow();if(qa&&!qa[na]&&pa)n.promoteThreadInPlaceOfThread(na,pa,da(na,oa));}function ha(na){r.subscribe('selected',function(pa,qa){fa(qa,na);});g.subscribe('page_transition',function(pa,qa){l.closeFragileTabs();});g.subscribe('chat-visibility/go-offline',function(){l.closeAllTabs();});i.subscribe('idle',function(pa,qa){if(qa>aa){var ra=n.get().tabs;ra.forEach(function(sa){var ta=sa.id;z.getThreadMeta(ta,function(ua){if(!ua.unread_count){ba.log('autoclose_idle_seen',{thread_id:ta,idleness:qa});l.closeTab(ta,'autoclose_idle_seen');}});});}});p.subscribe('nub-activated',function(pa,qa){fa(qa,na);});p.subscribe('focus-tab',function(pa,qa){var ra=n.getTab(qa);if(ra&&ra.raised)fa(qa,na,ra.signatureID,true);});function oa(pa,qa){h.log('VideoCallLoggerConfig',{event:'chat_tab_call_click'});w.showOutgoingCallDialog(qa.userID,qa.clickSource);}p.subscribe('video-call-clicked',oa);p.subscribe('interaction-with-tab',function(pa,qa){var ra=n.getTab(qa);ra&&ra.raised&&y.markSeen(qa);});p.subscribe('esc-pressed',function(pa,qa){ba.log('close_esc',{thread_id:qa});var ra=n.indexOf(qa);l.closeTab(qa,'close_esc');setTimeout(function(){ca(ra-1,true,true);},0);});x.subscribe('messages-received',function(pa,qa){for(var ra in qa){var sa=qa[ra];for(var ta=0;ta<sa.length;ta++){var ua=sa[ta];if(ua.author!=t.getID()){if(!ua.is_unread){ba.log('message_already_read',{action_id:ua.action_id,thread_id:ua.thread_id});continue;}z.getThreadMeta(ra,function(va){o.messageIsAllowed(va,ua,function(){ga(ra,na);k.newMessage(ra,ua);});});}}}});x.subscribe('thread-read-changed',function(pa,qa){for(var ra in qa)if(!qa[ra].mark_as_read){ba.log('autoclose_marked_unread',{thread_id:ra});l.closeTab(ra,'autoclose_marked_unread');}});p.subscribe('tab-pressed',function(pa,qa){return !ca(n.indexOf(qa.id),qa.shiftPressed);});g.subscribe(s.DUMP_EVENT,function(pa,qa){qa.chat_controller={auto_close_timeout:aa};});this.openTab=function(pa,qa,ra){fa(pa,qa,ea());if(ra)ra(q.get(pa));};}if(v.firefox()){var ia=function(){return u.get(document.body,'overflowX')+' '+u.get(document.body,'overflowY');},ja=ia(),ka=function(){var na=ia();if(na!==ja){ja=na;g.inform('overflow-applied-to-body');}};if('MutationObserver' in window){var la=new MutationObserver(ka),ma={attributes:true,attributeFilter:['class','style']};la.observe(document.documentElement,ma);}else document.documentElement.addEventListener('DOMAttrModified',function(event){if(event.getTarget()===document.documentElement&&(event.attrName==='class'||event.attrName==='style'))ka();},false);}e.exports=ha;},null);
__d("ChatTabViewPlaceholder",["DOM","ErrorUtils","React","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';function k(l,m,n,o,p,q){this.$ChatTabViewPlaceholder0={threadID:m,serverThreadID:n,signatureID:o,root:p,prevTab:q};this.$ChatTabViewPlaceholder1={visible:true,raised:true};l.then(function(r){try{var t=new r(this.$ChatTabViewPlaceholder0.threadID,this.$ChatTabViewPlaceholder0.serverThreadID,this.$ChatTabViewPlaceholder0.signatureID,this.$ChatTabViewPlaceholder0.root,this);t.setVisibleState(this.$ChatTabViewPlaceholder1.visible,this.$ChatTabViewPlaceholder1.raised);this.destroy();this.$ChatTabViewPlaceholder2=t.getTabElem();if(this.$ChatTabViewPlaceholder3)this.$ChatTabViewPlaceholder3(this.$ChatTabViewPlaceholder0.threadID,t);}catch(s){h.reportError(s,false);}}.bind(this));this.render(this.$ChatTabViewPlaceholder0.root,this.$ChatTabViewPlaceholder0.prevTab);}k.prototype.getTabElem=function(){return this.$ChatTabViewPlaceholder2;};k.prototype.onBeingReplaced=function(l){this.$ChatTabViewPlaceholder3=l;};k.prototype.updateSignatureID=function(l){this.$ChatTabViewPlaceholder0.signatureID=l;};k.prototype.getScrollTop=function(){return 0;};k.prototype.appendTo=function(l){g.appendContent(l,this.$ChatTabViewPlaceholder2);};k.prototype.insertBefore=function(l){g.insertBefore(l.getTabElem(),this.$ChatTabViewPlaceholder2);};k.prototype.isFocused=function(){return false;};k.prototype.hasEmptyInput=function(){return true;};k.prototype.destroy=function(){i.unmountComponentAtNode(this.$ChatTabViewPlaceholder2);g.remove(this.$ChatTabViewPlaceholder2);};k.prototype.nextTabIs=function(l){var m=l&&l.getTabElem();return !!(this.$ChatTabViewPlaceholder2&&this.$ChatTabViewPlaceholder2.nextSibling===m);};k.prototype.setVisibleState=function(l,m){this.$ChatTabViewPlaceholder1={visible:l,raised:!!m};this.render(this.$ChatTabViewPlaceholder0.root,this.$ChatTabViewPlaceholder0.prevTab);};k.prototype.render=function(l,m){var n=!this.$ChatTabViewPlaceholder1.visible,o=this.$ChatTabViewPlaceholder1.raised,p=(("fbNub")+(' '+"_50-v")+(n?' '+"hidden_elem":'')+(o?' '+"opened":'')+(' '+"placeholder")+(' '+"_50mz"));if(!this.$ChatTabViewPlaceholder2){var q=g.create('div',{className:p});this.$ChatTabViewPlaceholder2=q;i.render(i.createElement("div",null,i.createElement("span",{className:"fbNubButton"}),"opened"+' '+"? (",i.createElement("div",{className:"fbNubFlyout fbDockChatTabFlyout _16bz"},i.createElement("div",{className:"fbNubFlyoutTitlebar"}),i.createElement("div",{className:"fbNubFlyoutBody"})),")"),q);if(m&&m.getTabElem()){this.insertBefore(m);}else this.appendTo(l);}else this.$ChatTabViewPlaceholder2.className=p;};e.exports=k;},null);
__d("ChatTabViewLoader",["Bootloader","ChatTabViewPlaceholder","Promise","Run","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l,m;k(['ChatTabView'],function(o){return m=o;});var n={make:function(o,p,q,r,s){if(m){return new m(o,p,q,r,s);}else{if(!l)l=new i(function(t){j.onAfterLoad(function(){g.loadModules(["ChatTabView"],function(u){m=u;t(u);});});});return new h(l,o,p,q,r,s);}}};e.exports=n;},null);
__d("ChatTabViewCoordinator",["Arbiter","ChatTabModel","ChatTabViewLoader","ChatTabViewSelector","CSS","JSLogger","VideoCallSupport"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=l.create('chat_tab_coordinator');function o(p,q){var r=new j(p),s={},t=false;function u(){var y=h.get(),z={};y.tabs.forEach(function(ba){z[ba.id]=1;});n.log('process_tab_changed',{model_tabs:Object.keys(z),view_tabs:Object.keys(s)});for(var aa in s)if(!z[aa]){n.log('remove_tab',{tab_id:aa});s[aa].destroy();delete(s[aa]);}v(y);w(y);if(y.tabNeedsFocus&&!y.tabNeedsFocus.isFocused())y.tabNeedsFocus.focus();}function v(y){var z=null;y.tabs.forEach(function(aa){var ba=aa.id,ca=false;if(!s[ba]){n.log('add_tab',{tab_id:ba});s[ba]=i.make(ba,aa.server_id,aa.signatureID,p,z);ca=true;if(s[ba].onBeingReplaced)s[ba].onBeingReplaced(function(ea,fa){s[ea]=fa;});}else s[ba].updateSignatureID(aa.signatureID);if(s[ba].isFocused())y.tabNeedsFocus=s[ba];if(!ca&&!s[ba].nextTabIs(z)){var da=s[ba].getScrollTop();if(z){s[ba].insertBefore(z);}else s[ba].appendTo(p);if(da)s[ba].setScrollTop(da);}z=s[ba];});}function w(y){var z=q.getTabsToShow(y),aa=[],ba=false;y.tabs.forEach(function(ca){if(!z[ca.id]){s[ca.id].setVisibleState(false,ca.raised);aa.push(ca);}});y.tabs.forEach(function(ca){if(z[ca.id]){s[ca.id].setVisibleState(true,ca.raised);ba|=ca.raised;}});r.setTabData(aa);x(ba);}function x(y){if(!y&&t){g.inform('layer_hidden',{type:'ChatTab'});t=false;}else if(y&&!t){g.inform('layer_shown',{type:'ChatTab'});t=true;}}if(m.isVideoCallSupported())k.addClass(p,'videoCallEnabled');q.subscribe('tabs-changed',u);u();}e.exports=o;},null);
__d("TabsViewport",["Arbiter","ArbiterMixin","ChatTabModel","Dock","DOM","DOMDimensions","Event","Parent","Vector","ViewportBounds","areJSONRepresentationsEqual","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=175,t=269,u=0;function v(){return s;}function w(){return t;}function x(y){this._root=y;var z=this._recalculateWidth.bind(this);m.listen(window,'resize',z);j.subscribe('resize',z);g.subscribeOnce('sidebar/initialized',z,g.SUBSCRIBE_NEW);i.subscribe('change',function(){return this._recalculateTabs(true);}.bind(this));this._recalculateWidth();this._initialized=true;}Object.assign(x.prototype,h,{_root:null,_initialized:false,_availableWidth:0,_maxShown:1,_viewState:null,_recalculateWidth:function(){var y=x._getAvailableDockWidth(this._root),z=Math.max(1,Math.floor(y/w())),aa=z!=this._maxShown;if(!this._viewState||aa||y<=this._viewState.usedWidth||y>this._viewState.widthToShowNext){this._availableWidth=y;this._maxShown=z;this._viewState=null;this._recalculateTabs(aa);}},_onTabsChanged:function(){if(this._initialized){this.inform('tabs-changed');this.inform('max-to-show-changed',this._maxShown);this.inform('max-to-show-change-completed');}},_recalculateTabs:function(y){var z=x._getTabsToShow(i.get(),this._availableWidth);if(y||!q(this._viewState,z)){this._viewState=z;this._onTabsChanged();}},getMaxTabsToShow:function(){return this._maxShown;},checkWidth:function(){this._recalculateWidth();},hasRoomForRaisedTab:function(){return this._availableWidth-this._viewState.usedWidth>w();},getTabsToShow:function(){return JSON.parse(JSON.stringify(this._viewState.tabsToShow));},getShowingTabsOrder:function(){var y=i.get(),z=this._viewState.tabsToShow;return y.tabs.filter(function(aa){return z[aa.id];});},getRightmostHiddenTab:function(){var y=i.get(),z=this._viewState.tabsToShow,aa=y.tabs.filter(function(ca){return !z[ca.id];}),ba=aa.shift();return ba?ba.id:null;},getLeftmostVisibleTab:function(){var y=this.getShowingTabsOrder(),z=y.pop();return z?z.id:null;},getRaisedVisibleTabs:function(){var y=[],z=this.getShowingTabsOrder(),aa=z.length;for(var ba=0;ba<aa;ba++)if(i.getTab(z[ba].id).raised)y.push(z[ba].id);return y;},shouldPromoteOnRaise:function(y){if(!this._viewState.tabsToShow[y])return true;if(this._viewState.nextToHide!=y)return false;var z=i.getTab(y),aa=z&&z.raised;return !aa&&(this._availableWidth-this._viewState.usedWidth<w()-v());}});Object.assign(x,{_getAvailableDockWidth:function(y){var z=l.getViewportWithoutScrollbarDimensions().width;z-=p.getLeft()+p.getRight();z-=50;var aa=n.byClass(y,'fbDock'),ba=k.find(aa,"._56ox"),ca=ba?o.getElementDimensions(ba).x:0;z-=ca;var da=k.scry(aa,"._56oy");ca+=o.getElementDimensions(da.pop()).x;var ea=o.getElementDimensions(aa),fa=ea.x-ca;if(fa>u)u=fa;z-=u;z-=15;return Math.max(z,0);},_getTabsToShow:function(y,z){z=Math.max(z,w()+1);function aa(qa,ra){return (qa.raised||!ra)?w():v();}var ba=JSON.parse(JSON.stringify(y.tabs)),ca=-1,da=null;if(y.promoted)ba.forEach(function(qa,ra){if(qa.id===y.promoted){ca=ra;da=qa;}});var ea=0,fa=false,ga=0,ha=!da;ba.forEach(function(qa,ra){var sa=aa(qa,fa);fa=fa||!qa.raised;qa.leftmostOffset=ea+sa;ea+=sa;if(qa.leftmostOffset<z)ga++;ha|=ra==ca;qa.alreadyPlacedPromoted=ha;});function ia(qa,ra,sa){var ta={};for(var ua=0;ua<ra;ua++){var va=qa[ua];if(!va.alreadyPlacedPromoted&&ua==ra-1){ta[sa]=true;}else ta[va.id]=true;}return ta;}var ja=ia(ba,ga,y.promoted),ka=ia(ba,ga-1,y.promoted),la=null;for(var ma in ja)if(!ka[ma])la=ma;var na=ba[ga-1],oa=na?na.leftmostOffset:0,pa=Infinity;if(ga<ba.length)pa=ba[ga].leftmostOffset;return {nextToHide:la,tabsToShow:ja,usedWidth:oa,widthToShowNext:pa};}});e.exports=x;},null);
__d("MessengerDispatcher",["Dispatcher"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("MNCommerceActionTypes",["keyMirrorRecursive"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g({RECEIPT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},SHIPMENT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},DIALOG:{SHOW:null,HIDE:null}});e.exports=h;},null);
__d("MNCommerceDialogStateStore",["FluxStore","MessengerDispatcher","MNCommerceActionTypes"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(){g.call(this,h);this.$MNCommerceDialogStateStore0=null;this.$MNCommerceDialogStateStore1=null;}l.prototype.__onDispatch=function(m){var n=m.type;switch(n){case i.DIALOG.SHOW:this.$MNCommerceDialogStateStore0=m.dialogContainer;this.$MNCommerceDialogStateStore1=m.state;this.__emitChange();break;case i.DIALOG.HIDE:this.$MNCommerceDialogStateStore0=null;this.$MNCommerceDialogStateStore1=null;this.__emitChange();break;}};l.prototype.getDialogContainer=function(){return this.$MNCommerceDialogStateStore0;};l.prototype.getState=function(){return this.$MNCommerceDialogStateStore1;};e.exports=new l();},null);
__d("MNCommerceDialogContainer.react",["MNCommerceDialogStateStore","PureStoreBasedStateMixin","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i.createClass({displayName:"MNCommerceDialogContainer",mixins:[h(g)],statics:{calculateState:function(){var k=g.getDialogContainer();return {dialogContainer:k};}},render:function(){var k=this.state.dialogContainer;if(!k)return null;return i.createElement(k,null);}});e.exports=j;},null);
__d("P2PActionConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={CREDIT_CARDS_UPDATED:'credit_cards_updated',CHANNEL_EVENTS_ALLOWED:'channel_events_allowed',CHANNEL_EVENTS_IGNORED:'channel_events_ignored',CREDIT_CARD_ADDED:'credit_card_added',CREDIT_CARD_ADDED_ERROR:'credit_card_added_error',CREDIT_CARD_DELETED:'credit_card_deleted',CREDIT_CARD_DELETED_ERROR:'credit_card_deleted_error',CREDIT_CARD_UPDATED:'credit_card_updated',CREDIT_CARD_UPDATED_ERROR:'credit_card_updated_error',PRESET_CREDIT_CARD_UPDATED:'preset_credit_card_updated',PRESET_CREDIT_CARD_UPDATED_ERROR:'preset_credit_card_updated_error',CREDIT_CARD_VERIFIED:'credit_card_verified',CREDIT_CARD_VERIFIED_ERROR:'credit_card_verified_error',TRANSFERS_UPDATED:'transfers_updated',TRANSFERS_UPDATED_ERROR:'transfers_updated_error',NUX_TRANSFERS_UPDATED:'nux_transfers_updated',TRANSFER_ADDED:'transfer_added',TRANSFER_ADDED_ERROR:'transfer_added_error',TRANSFER_UPDATED:'transfer_updated',TRANSFER_UPDATED_ERROR:'transfer_updated_error',TRANSFER_ACCEPTED:'transfer_accepted',TRANSFER_DECLINED:'transfer_declined',CHAT_SEND_VIEW_OPENED:'chat_send_view_opened',CHAT_SEND_VIEW_CLOSED:'chat_send_view_closed',BIN_NUMBER_VALIDATED:'bin_number_validated',BIN_NUMBER_VALIDATED_ERROR:'bin_number_validated_error',USER_ELIGIBILITY_UDPATED:'user_eligibility_updated',DIALOG_SHOWN:'dialog_shown',DIALOG_CLOSED:'dialog_closed',BANNER_STATES_UPDATED:'banner_states_updated',BANNER_DISMISSED:'banner_dismissed',BANNER_VIEWED:'banner_viewed',BANNER_COMPLETED:'banner_completed',MONEYPENNY_TRANSFER_CREATED:'moneypenny_transfer_created',MONEYPENNY_TRANSFER_CREATED_ERROR:'moneypenny_transfer_created_error'};e.exports=g;},null);
__d("P2PDispatcher",["Dispatcher"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("P2PDialogStore",["EventEmitter","P2PActionConstants","P2PDispatcher"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j,k={};for(var l in g)if(g.hasOwnProperty(l))n[l]=g[l];var m=g===null?null:g.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=g;function n(){g.call(this);j=i.register(this.onEventDispatched.bind(this));k={dialogClass:null,dialogProps:null};}n.prototype.getState=function(){return k;};n.prototype.onEventDispatched=function(o){var p=o.type,q=o.data;switch(p){case h.DIALOG_SHOWN:k.dialogClass=q.dialogClass;k.dialogProps=q.dialogProps;this.emit('change');break;case h.DIALOG_CLOSED:k.dialogClass=null;k.dialogProps=null;this.emit('change');break;}};e.exports=new n();},null);
__d("P2PDialogContainer.react",["P2PDialogStore","React","ReactLayeredComponentMixin"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=h.createClass({displayName:"P2PDialogContainer",mixins:[i],getInitialState:function(){return g.getState();},componentDidMount:function(){this.dialogStoreSub=g.addListener('change',this.onDialogStoreChange);},componentWillUnmount:function(){if(this.dialogStoreSub){this.dialogStoreSub.remove();this.dialogStoreSub=null;}},onDialogStoreChange:function(){this.setState(g.getState());},renderLayers:function(){if(!this.state.dialogClass)return {};var k=this.state.dialogClass;return {dialog:h.createElement(k,h.__spread({},this.state.dialogProps))};},render:function(){return null;}});e.exports=j;},null);
__d("ChatApp",["CSS","ChatPerfInstrumentation","DOM","JSLogger","Promise","React","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n={init:function(s,t,u){if(this._isInitialized){j.create('chat_app').error('repeated_init');return;}this._rootElem=s;k.resolve().then(function(){return h.init();}).then(function(){return o();}).then(function(){return p(u);}).then(function(){return q(t,s);}).then(function(){return r();}).then(function(){this._isInitialized=this._isLoaded=true;h.logTTI();}.bind(this));},isInitialized:function(){return !!this._isInitialized;},isHidden:function(){return !this._isInitialized||this._isHidden;},hide:function(){if(this.isHidden())return;g.hide(this._rootElem);this._isHidden=true;},unhide:function(){if(this._isInitialized){if(this._isHidden){g.show(this._rootElem);this.tabsViewport.checkWidth();d(['Dock'],function(s){s.resizeAllFlyouts();});this._isHidden=false;}}else if(!this._isLoaded){d(['UIPagelet'],function(s){s.loadFromEndpoint('ChatTabsPagelet','ChatTabsPagelet');s.loadFromEndpoint('BuddylistPagelet','BuddylistPagelet');});this._isLoaded=true;}}};function o(){return new k(function(s){d(['MercuryChannelHandler','MercuryDelayedRoger','MercuryDeliveryState','MercuryParticipants','MercuryStateCheck','MercuryThreads','MercuryUnreadState','MercuryUnseenState'],function(t,u,v,w,x,y,z,aa){t.get().turnOn();u;v.get();w;y.get();aa.get();z.get();x.get();s();});});}function p(s){return new k(function(t){d(['MercuryServerRequests'],function(u){u.get().handleUpdate(s);t();});});}function q(s,t){return new k(function(u){d(['ChatTabController','ChatTabViewCoordinator','TabsViewport','MNCommerceDialogContainer.react','P2PDialogContainer.react'],function(v,w,x,y,z){n.tabsViewport=new x(s);n.tabViewCoordinator=new w(s,n.tabsViewport);n.tabController=new v(n.tabsViewport);var aa=i.find(t,"._26-x");l.render(l.createElement(y,null),aa);var ba=i.find(t,"._26-y");l.render(l.createElement(z,null),ba);u();});});}function r(){return new k(function(s){d(['HotLikeSound','ChatOptions'],function(t,u){t.setCheckSoundEnabledFunc(function(){return u.getSetting('sound');});s();});});}e.exports=n;},null);