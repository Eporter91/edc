/*!CK:3353662038!*//*1435548563,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["XPzfQ"]); }

__d("UFIBlingItem.react",["React","NumberFormat","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=g.createClass({displayName:"UFIBlingItem",propTypes:{contextArgs:m.object.isRequired,count:m.number.isRequired,countreduced:m.string,allowText:m.bool,className:m.string,iconClassName:m.string,itemKey:m.string},render:function(){var o=k(this.props.className,this.props.iconClassName,"UFIBlingBoxSprite"),p=h.formatIntegerWithDelimiter(this.props.count,this.props.contextArgs.numberdelimiter||','),q=p,r=this.props.contextArgs.ufiexperiments||{};if(this.props.allowText||r.showRevisedUFI||r.showSlimUFI)switch(this.props.itemKey){case 'like':if(r.showRevisedUFI||r.showSlimUFI)q=j._({"Like":"{count} Like","Likes":"{count} Likes"},[j.param("count",r.truncateNumbers?this.props.countreduced:q),j['enum'](this.props.count===1?'Like':'Likes',{Like:"Like",Likes:"Likes"})]);break;case 'comment':if(r.showRevisedUFI||r.showSlimUFI)q=j._({"Comment":"{count} Comment","Comments":"{count} Comments"},[j.param("count",r.truncateNumbers?this.props.countreduced:q),j['enum'](this.props.count===1?'Comment':'Comments',{Comment:"Comment",Comments:"Comments"})]);break;case 'reshare':if(this.props.contextArgs.reshareedu||r.showRevisedUFI)q=j._({"Share":"{count} Share","Shares":"{count} Shares"},[j.param("count",r.truncateNumbers?this.props.countreduced:q),j['enum'](this.props.count===1?'Share':'Shares',{Share:"Share",Shares:"Shares"})]);break;}var s=g.createElement("span",{className:(("UFIBlingBoxText")+(r.showRevisedUFI||r.showSlimUFI?' '+"UFIBlingBoxTextRevised":''))},q);if(!r.showRevisedUFI&&!r.showSlimUFI){return (g.createElement("span",null,g.createElement("i",{className:o}),s));}else return s;}});e.exports=n;},null);
__d("UFIBlingBox.react",["React","UFIBlingItem.react","UFIConstants","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=g.createClass({displayName:"UFIBlingBox",propTypes:{contextArgs:m.object.isRequired,'data-ft':m.string,comments:m.number,commentsreduced:m.string,likes:m.number,likesreduced:m.string,nfb:m.number,onClick:m.func,permalink:m.string,reshares:m.number,resharesreduced:m.string,neverPermalink:m.bool},render:function(){var o=[],p='',q=this.props.contextArgs.ufiexperiments||{};if(this.props.likes){o.push(g.createElement(h,{className:((o.length>0?"mls":'')),contextArgs:this.props.contextArgs,count:this.props.likes,countreduced:this.props.likesreduced,iconClassName:"UFIBlingBoxLikeIcon",itemKey:"like",key:"like"}));p+=(this.props.likes==1)?k._("1 like"):k._({"*":"{count} likes"},[k.param("count",this.props.likes,[0])]);p+=' ';}if(this.props.comments){o.push(g.createElement(h,{className:((o.length>0?"mls":'')),contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:this.props.commentsreduced,iconClassName:"UFIBlingBoxCommentIcon",itemKey:"comment",key:"comment"}));p+=(this.props.comments==1)?k._("1 comment"):k._({"*":"{count} comments"},[k.param("count",this.props.comments,[0])]);p+=' ';}if(this.props.reshares){o.push(g.createElement(h,{className:((o.length>0?"mls":'')),contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:"UFIBlingBoxReshareIcon",itemKey:"reshare",key:"reshare"}));p+=(this.props.reshares==1)?k._("1 share"):k._({"*":"{count} shares"},[k.param("count",this.props.reshares,[0])]);}var r=this.props.onClick,s='ignore';if(!this.props.neverPermalink&&this.props.comments>i.defaultPageSize){r=null;s=null;}var t=g.createElement("a",{className:(("UFIBlingBox")+(' '+"uiBlingBox")+(' '+"feedbackBling")+(q.showRevisedUFI||q.showSlimUFI?' '+"UFIBlingBoxRevised":'')),href:this.props.permalink,"data-ft":this.props['data-ft'],"aria-label":p,onClick:r,rel:s},o);return t;}});e.exports=n;},null);
__d("UFICommentLink.react",["Image.react","React","TrackingNodes","emptyFunction","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o=h.createClass({displayName:"UFICommentLink",propTypes:{ufiExperiments:n.object,onClick:n.func},getDefaultProps:function(){return {ufiExperiments:{},onClick:j};},render:function(){var p=this.props.ufiExperiments,q=k._("Comment"),r=k._("Leave a comment"),s='{ "tn": "'+i.encodeTN(i.types.COMMENT_LINK)+'", "type": 24 }',t=null;if(p.showRevisedUFI||p.showSlimUFI)t=h.createElement(g,{className:"UFICommentLinkIcon",src:l('/images/ufi/fbfeed/comment_gray.png')});return (h.createElement("a",{className:"comment_link",href:"#",role:"button",title:r,onClick:this.props.onClick,"data-ft":s},t,q));}});e.exports=o;},null);
__d("UFIInstanceState",["UFICentralUpdates"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={};function i(k){if(!h[k])h[k]={};}var j={getKeyForInstance:function(k,l){i(k);return h[k][l];},updateState:function(k,l,m){i(k);h[k][l]=m;g.didUpdateInstanceState(k,l);},updateStateField:function(k,l,m,n){var o=this.getKeyForInstance(k,l)||{};o[m]=n;this.updateState(k,l,o);}};e.exports=j;},null);
__d("UFILikeLink.react",["React","Image.react","TrackingNodes","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=g,n=m.PropTypes,o=g.createClass({displayName:"UFILikeLink",propTypes:{likeAction:n.bool,ufiExperiments:n.object,onClick:n.func},getDefaultProps:function(){return {ufiExperiments:{}};},onClick:function(p,q){p.preventDefault();this.props.onClick(p,q);},render:function(){var p=this.props.ufiExperiments,q=this.props.likeAction||p.showRevisedUFI||p.showSlimUFI?k._("Like"):k._("Unlike"),r=i.getTrackingInfo(this.props.likeAction?i.types.LIKE_LINK:i.types.UNLIKE_LINK),s=this.props.likeAction?k._("Like this"):k._("Unlike this"),t=null;if(p.showRevisedUFI||p.showSlimUFI)t=g.createElement(h,{className:"UFILikeLinkIcon",src:this.props.likeAction?l('/images/ufi/fbfeed/like_gray.png'):l('/images/ufi/fbfeed/liked.png')});return (g.createElement("a",{className:(("UFILikeLink")+((p.showRevisedUFI||p.showSlimUFI)&&!this.props.likeAction?' '+"UFILinkBright":'')),href:"#",role:"button","aria-live":"polite",title:s,onClick:this.onClick,"data-ft":r},t,q));}});e.exports=o;},null);
__d("UFISubscribeLink.react",["React","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g,j=i.PropTypes,k=g.createClass({displayName:"UFISubscribeLink",propTypes:{subscribeAction:j.bool,onClick:j.func},render:function(){var l=this.props.subscribeAction?h._("Get Notifications"):h._("Stop Notifications"),m=this.props.subscribeAction?h._("Get a notification whenever someone comments."):h._("Stop getting notifications when someone comments.");return (g.createElement("a",{className:"UFISubscribeLink",href:"#",role:"button","aria-live":"polite",title:m,onClick:this.props.onClick},l));}});e.exports=k;},null);
__d("ProfileBrowserLink",["URI"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h='/ajax/browser/dialog/',i='/browse/',j=function(l,m,n){return new g(l+m).setQueryData(n);},k={constructPageURI:function(l,m){return j(i,l,m);},constructDialogURI:function(l,m){return j(h,l,m);}};e.exports=k;},null);
__d("ProfileBrowserTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={FRIEND_CHECKINS:'friendcheckins',LIKES:'likes',GROUP_MEMBERS:'group_members',GROUP_MESSAGE_VIEWERS:'group_message_viewers',MUTUAL_FRIENDS:'mutual_friends',TODO_LIST_ASSIGNEES:'todo_list_assignees',TOPIC_CONVERSATION_PARTICIPANTS:'topic_conversation_participants'};e.exports=g;},null);
__d("UFITimelineBlingBox.react",["ProfileBrowserLink","ProfileBrowserTypes","React","UFIBlingItem.react","URI","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=i,o=n.PropTypes,p=i.createClass({displayName:"UFITimelineBlingBox",propTypes:{contextArgs:o.object.isRequired,'data-ft':o.string,'data-gt':o.string,actorid:o.any,commentOnClick:o.func,comments:o.number,commentsreduced:o.string,enableShowComments:o.bool,enableShowLikes:o.bool,feedbackFBID:o.any,likes:o.number,likesreduced:o.string,reshares:o.number,resharesreduced:o.string},render:function(){var q=[];if(this.props.likes&&this.props.enableShowLikes){var r=this._getProfileBrowserURI(),s=m._("See who likes this"),t=i.createElement("a",{ajaxify:r.dialog,className:this._getItemClassName(q),"data-ft":this.props['data-ft'],"data-gt":this.props['data-gt'],"data-hover":"tooltip","data-tooltip-alignh":"right","data-tooltip-uri":this._getLikeToolTipURI(),href:r.page,key:"like",rel:"dialog",role:"button",title:s},i.createElement(j,{contextArgs:this.props.contextArgs,count:this.props.likes,countreduced:this.props.likesreduced,iconClassName:"UFIBlingBoxTimelineLikeIcon",itemKey:"like"}));q.push(t);}if(this.props.comments&&this.props.enableShowComments){var u=m._("Show comments"),v=i.createElement("a",{"aria-label":u,className:this._getItemClassName(q),"data-ft":this.props['data-ft'],"data-hover":"tooltip","data-tooltip-alignh":"right",href:"#",key:"comment",onClick:this.props.commentOnClick},i.createElement(j,{contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:this.props.commentsreduced,iconClassName:"UFIBlingBoxTimelineCommentIcon",itemKey:"comment"}));q.push(v);}if(this.props.reshares){var w=m._("Show shares"),x=this._getShareViewURI(),y=i.createElement("a",{ajaxify:x.dialog,"aria-label":w,className:this._getItemClassName(q),"data-ft":this.props['data-ft'],"data-hover":"tooltip","data-tooltip-alignh":"right",href:x.page,key:"reshare",rel:"async"},i.createElement(j,{allowText:true,contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:"UFIBlingBoxTimelineReshareIcon",itemKey:"reshare"}));q.push(y);}return (i.createElement("span",null,q));},_getItemClassName:function(q){return ((q.length>0?"mls":'')+(' '+"UFIBlingBoxTimelineItem"));},_getLikeToolTipURI:function(){if(this.props.feedbackFBID){var q=new k('/ajax/like/tooltip.php').setQueryData({comment_fbid:this.props.feedbackFBID});return q.toString();}else return null;},_getProfileBrowserURI:function(){if(this.props.feedbackFBID){var q=h.LIKES,r={id:this.props.feedbackFBID,actorid:this.props.actorid},s=g.constructDialogURI(q,r),t=g.constructPageURI(q,r),u={dialog:s.toString(),page:t.toString()};return u;}},_getShareViewURI:function(){if(this.props.feedbackFBID){var q=new k('/ajax/shares/view').setQueryData({target_fbid:this.props.feedbackFBID}),r=new k('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedbackFBID}),s={dialog:q.toString(),page:r.toString()};return s;}}});e.exports=p;},null);
__d("UFICommentList",["ClientIDs","KeyedCallbackManager","Set","UFICentralUpdates","UFIConstants","UFIFeedbackTargets","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=m({actorID:true});function o(p){this.count=0;this.deletedComments={};this.deletedCount=0;this.dataSource=new h();this.feedbackTargetID=p;this.lastRequestedOffset=0;this.lastRequestedLength=0;this.basePermalink="";this.commentPermalinks={};this.sizeLimit=null;this.clearedLocalComments=new i();l.getFeedbackTarget(this.feedbackTargetID,function(q){this.actorID=q.actorforpost;this.basePermalink=q.permalink;}.bind(this));}o.prototype.setSizeLimit=function(p){this.sizeLimit=p;};o.prototype.addOrUpdateComment=function(p){if(p.islocal){this.$UFICommentList0(p.id);}else this.$UFICommentList1(p.id,p.clientid,p.legacyid);j.didUpdateFeedback(this.feedbackTargetID);};o.prototype.$UFICommentList0=function(p){if(!this.sizeLimit||this.count<this.sizeLimit){this.dataSource.setResource(this.count,p);this.count++;return;}var q=this.dataSource.getResource(0);if(g.isExistingClientID(q))this.clearedLocalComments.add(q);for(var r=0;r<this.count-1;++r)this.dataSource.setResource(r,this.dataSource.getResource(r+1));this.dataSource.setResource(this.count-1,p);};o.prototype.$UFICommentList1=function(p,q,r){var s=q&&g.isExistingClientID(q);if(s&&this.clearedLocalComments.has(q))return;var t=this.dataSource.getAllResources(),u={};for(var v in t){var w=t[v];u[w]=v;}if(s&&q in u){u[p]=u[q];var x=u[q];this.dataSource.setResource(x,p);}else if(!u[p]&&q)this.$UFICommentList0(p);if(r&&p in u)this.commentPermalinks[p]=this.buildCommentPermalink(p,r,u[p]);};o.prototype.addCommentIDs=function(p,q,r){var s={};for(var t=0;t<q;t++)s[p+t]=r[t]||k.unavailableCommentKey;this.dataSource.addResourcesAndExecute(s);j.didUpdateFeedback(this.feedbackTargetID);return this;};o.prototype.getComments=function(p,q,r,s){var t=[];for(var u=0;u<q;u++)t.push(p+u);var v=this.dataSource.getUnavailableResourcesFromRequest(t);if(v.length){var w=Math.min.apply(Math,v),x=Math.max.apply(Math,v),y=w,z=x-w+1;if(y<this.lastRequestedOffset||(y+z)>(this.lastRequestedOffset+this.lastRequestedLength)){this.lastRequestedOffset=y;this.lastRequestedLength=z;this.fetchComments(y,z,r);}}else this.dataSource.executeOrEnqueue(t,this.deferredCallback.bind(this,p,q,s));};o.prototype.fetchComments=function(p,q,r){};o.prototype.deferredCallback=function(p,q,r,s){};o.prototype.reset=function(){var p=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return p;};o.prototype.deleteComment=function(p){if(!(p in this.deletedComments)){this.deletedComments[p]=true;this.deletedCount++;}};o.prototype.updateCommentCount=function(p){this.count=p;this.deletedCount=0;return this;};o.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};o.prototype.getCommentCount=function(){return this.count;};o.prototype.getDeletedCount=function(){return this.deletedCount;};o.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount;};o.prototype.getBasePermalink=function(){return this.basePermalink;};o.prototype.buildCommentPermalink=function(p,q,r){};o.prototype.getPermalinkForComment=function(p){return this.commentPermalinks[p];};o.isValidContextPropertyForReset=function(p){return p in n;};e.exports=o;},null);
__d("UFICommentOrdering",["UFIConstants"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={inverted:function(i){switch(i){case g.UFICommentOrderingMode.RECENT_ACTIVITY:case g.UFICommentOrderingMode.RANKED_THREADED:case g.UFICommentOrderingMode.FILTERED:case g.UFICommentOrderingMode.LIVE_STREAMING:return true;}return false;}};e.exports=h;},null);
__d("UFIComments",["ClientIDs","ImmutableObject","UFICentralUpdates","UFIConstants","UFIInstanceState","invariant","randomInt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n={},o={};function p(ea){return ea in o?o[ea]:ea;}function q(ea,fa){ea.forEach(function(ga){var ha=ga.ftentidentifier,ia=j.UFIPayloadSourceType,ja=ga.clientid,ka=false,la=Object.assign({},ga);if(ja){delete la.clientid;ka=g.isExistingClientID(ja);if(ka&&o[ja])return;}if((fa===ia.LIVE_SEND)||(fa===ia.USER_ACTION)||(fa===ia.ENDPOINT_ADD_COMMENT)||(fa===ia.ENDPOINT_EDIT_COMMENT))la.isunseen=true;if(fa===ia.ENDPOINT_COMMENT_FETCH||fa===ia.ENDPOINT_ID_COMMENT_FETCH)la.fromfetch=true;if(ka){if(n[ja].ufiinstanceid)k.updateStateField(n[ja].ufiinstanceid,'locallycomposed',ga.id,true);la.ufiinstanceid=n[ja].ufiinstanceid;o[ja]=ga.id;n[ga.id]=n[ja];delete n[ja];i.didUpdateComment(ja);}da.setComment(ga.id,new h(la));i.didUpdateComment(ga.id);i.didUpdateFeedback(ha);});}function r(ea){for(var fa=0;fa<ea.length;fa++){var ga=ea[fa];switch(ga.actiontype){case j.UFIActionType.LIKE_ACTION:if(da.getComment(ga.entidentifier))s(ga.clientid,ga.entidentifier,ga.hasviewerliked,ga.likecount);break;case j.UFIActionType.COMMENT_LIKE:s(ga.clientid,ga.commentid,ga.viewerliked,ga.likecount);break;case j.UFIActionType.DELETE_COMMENT:w(ga);break;case j.UFIActionType.LIVE_DELETE_COMMENT:x(ga);break;case j.UFIActionType.REMOVE_PREVIEW:y(ga);break;case j.UFIActionType.COMMENT_SET_SPAM:z(ga);break;case j.UFIActionType.CONFIRM_COMMENT_REMOVAL:aa(ga);break;case j.UFIActionType.TRANSLATE_COMMENT:u(ga);break;case j.UFIActionType.COMMENT_LIKECOUNT_UPDATE:t(ga);break;}}}function s(ea,fa,ga,ha){var ia=da.getComment(fa);if(ia){var ja={},ka=ea&&g.isExistingClientID(ea);if(!ka){ja.hasviewerliked=ga;ja.likecount=ha;}ja.likeconfirmhash=m(0,1024);ca(fa,ja);}}function t(ea){var fa=da.getComment(ea.commentid);if(fa&&ea.hasviewerliked===fa.hasviewerliked){var ga={likecount:ea.likecount,likeconfirmhash:m(0,1024)};ca(ea.commentid,ga);}}function u(ea){var fa=ea.commentid,ga=da.getComment(fa);if(ga){var ha={translatedbody:ea.translatedbody,translatorapp:ea.translatorapp};ca(fa,ha);}}function v(ea){var fa={reportLink:ea.reportLink,commenterIsFOF:ea.commenterIsFOF,userIsMinor:ea.userIsMinor,giveFeedbackLink:ea.giveFeedbackLink};return fa;}function w(ea){var fa=da.getComment(ea.commentid);ba(fa,j.UFIStatus.DELETED);}function x(ea){var fa=da.getComment(ea.commentid);if(fa&&fa.status!==j.UFIStatus.DELETED)ba(fa,j.UFIStatus.LIVE_DELETED);}function y(ea){ca(ea.commentid,{attachment:null});}function z(ea){var fa=da.getComment(ea.commentid),ga=ea.shouldHideAsSpam?j.UFIStatus.SPAM_DISPLAY:null;ba(fa,ga);}function aa(ea){ca(ea.commentid,v(ea));}function ba(ea,fa){ca(ea.id,{priorstatus:ea.status,status:fa});}function ca(ea,fa){var ga=da.getComment(ea)||new h({});da.setComment(ea,h.set(ga,fa));i.didUpdateComment(ga.id);i.didUpdateFeedback(ga.ftentidentifier);}var da={getComment:function(ea){if(ea===j.unavailableCommentKey)return null;return n[p(ea)];},setComment:function(ea,fa){l(fa instanceof h);n[p(ea)]=fa;},resetComments:function(ea){for(var fa in ea)delete n[p(fa)];}};i.subscribe('update-comments',function(ea,fa){if(fa.comments&&fa.comments.length)q(fa.comments,fa.payloadsource);});i.subscribe('update-actions',function(ea,fa){if(fa.actions&&fa.actions.length)r(fa.actions);});e.exports=da;},null);
__d("UFIReplyCommentList",["ActorURI","JSLogger","MercuryServerDispatcher","UFICentralUpdates","UFICommentList","UFIComments","UFIConstants","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o={},p=h.create('ufi_reply_comment_list');for(var q in k)if(k.hasOwnProperty(q))s[q]=k[q];var r=k===null?null:k.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=k;s.getCommentList=function(u,v){if(!o[v])o[v]=new s(u,v);return o[v];};s.resetWithContext=function(u,v,w){var x=o[v];if(!x)return;x.reset();for(var y in w)if(this.isValidContextPropertyForReset(y))x[y]=w[y];};function s(u,v){k.call(this,u);this.parentCommentID=v;}s.prototype.fetchComments=function(u,v,w){var x={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[u],lengths:[v],feed_context:w?w.feedContext:null};if(!w||!w.viewAs)x[g.PARAMETER_ACTOR]=this.actorID;i.trySend('/ajax/ufi/reply_fetch.php',x);};s.prototype.deferredCallback=function(u,v,w,x){var y={};for(var z=0;z<v;z++){var aa=l.getComment(x[u+z]);if(aa)y[u+z]=aa;}w(y);};s.prototype.reset=function(){var u=r.reset.call(this),v={};for(var w in u){var x=u[w];v[x]=true;}l.resetComments(v);};s.prototype.getParentCommentID=function(){return this.parentCommentID;};s.prototype.buildCommentPermalink=function(u,v,w){if(!this.basePermalink)return null;var x=this.getParentCommentID().split("_"),y=v;if(x.length===2){y=x[1];}else p.error("Bad reply comment ID: "+this.getParentCommentID());return (new n(this.basePermalink).addQueryData({comment_id:y,reply_comment_id:v,total_comments:this.count}).toString());};i.registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:i.IMMEDIATE}});function t(u){var v=l.getComment(u.commentid),w=v.id,x=v.ftentidentifier,y=v.parentcommentid;if(!y)return;if(v.status!==m.UFIStatus.DELETED&&v.status!==m.UFIStatus.FAILED_ADD)s.getCommentList(x,y).deleteComment(w);}j.subscribe('update-actions',function(u,v){if(v.actions&&v.actions.length)for(var w=0;w<v.actions.length;w++){var x=v.actions[w];switch(x.actiontype){case m.UFIActionType.DELETE_COMMENT:t(x);break;}}});j.subscribe('update-comment-lists',function(u,v){var w=v.commentlists;if(w&&w.replies&&Object.keys(w).length)for(var x in w.replies){var y=w.replies[x],z=y.ftentidentifier;s.getCommentList(z,x).addCommentIDs(y.range.offset,y.range.length,y.values).updateCommentCount(y.count);}});j.subscribe('update-comments',function(u,v){if(v.comments&&v.comments.length)v.comments.forEach(function(w){var x=w.entidentifier,y=w.parentcommentid;if(!y)return;s.getCommentList(x,y).addOrUpdateComment(w);});});e.exports=s;},null);
__d("UFIToplevelCommentList",["ActorURI","MercuryServerDispatcher","UFICentralUpdates","UFICommentList","UFICommentOrdering","UFIComments","UFIConstants","UFIReplyCommentList","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p={};for(var q in j)if(j.hasOwnProperty(q))s[q]=j[q];var r=j===null?null:j.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=j;s.getCommentList=function(u,v){if(!p[u])p[u]={};if(!p[u][v]){var w=new s(u,v),x=s.getCommentListsForFeedbackTargetID(u);if(x.length)w.updateCommentCount(x[0].getCommentCount());p[u][v]=w;}return p[u][v];};s.getCommentListsForFeedbackTargetID=function(u){var v=[],w=p[u]||{};for(var x in w)v.push(w[x]);return v;};s.getCommentListForFeedbackTargetID_UNSAFE=function(u){var v=s.getCommentListsForFeedbackTargetID(u);return v.length?v[0]:null;};s.resetCommentListsForFeedbackTargetID=function(u){if(!p[u])return;var v={};for(var w in p[u]){var x=p[u][w],y=x.reset();for(var z in y){var aa=y[z];v[aa]=true;}}l.resetComments(v);};s.resetCommentListsWithContext=function(u,v){if(!p[u])return;var w={};for(var x in p[u]){var y=p[u][x];for(var z in v)if(this.isValidContextPropertyForReset(z))y[z]=v[z];var aa=y.reset();for(var ba in aa){var ca=aa[ba];w[ca]=true;n.resetWithContext(u,ca,v);}}l.resetComments(w);};function s(u,v){j.call(this,u);this.orderReversed=false;if(k.inverted(v))this.orderReversed=true;this.orderingMode=v;this.forceNotPageable=false;}s.prototype.fetchComments=function(u,v,w){var x={ft_ent_identifier:this.feedbackTargetID,viewas:w&&w.viewAs?w.viewAs+'':null,source:null,offset:u,length:v,orderingmode:this.orderingMode,feed_context:w?w.feedContext:null};if(!w||!w.viewAs)x[g.PARAMETER_ACTOR]=this.actorID;h.trySend('/ajax/ufi/comment_fetch.php',x);};s.prototype.deferredCallback=function(u,v,w,x){var y={},z=u,aa=u+v-1;for(var ba=0;ba<v;ba++){var ca=this.orderReversed?aa-ba:z+ba,da=l.getComment(x[ca]);if(da)y[u+ba]=da;}w(y);};s.prototype.getOrderingMode=function(){return this.orderingMode;};s.prototype.setForceNotPageable=function(u){this.forceNotPageable=u;return this;};s.prototype.getForceNotPageable=function(){return this.forceNotPageable;};s.prototype.buildCommentPermalink=function(u,v,w){if(!this.basePermalink)return null;var x=Math.floor((this.count-w-1)/m.defaultPageSize)*m.defaultPageSize;return (new o(this.basePermalink).addQueryData({comment_id:v,offset:x,total_comments:this.count}).toString());};h.registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:h.IMMEDIATE}});function t(u){var v=l.getComment(u.commentid),w=v.id,x=v.ftentidentifier,y=v.parentcommentid;if(y)return;if(u.islocal||(v.status!==m.UFIStatus.DELETED&&v.status!==m.UFIStatus.FAILED_ADD))s.getCommentListsForFeedbackTargetID(x).forEach(function(z){z.deleteComment(w);});}i.subscribe('update-actions',function(u,v){if(v.actions&&v.actions.length)for(var w=0;w<v.actions.length;w++){var x=v.actions[w];switch(x.actiontype){case m.UFIActionType.DELETE_COMMENT:t(x);break;}}});i.subscribe('update-comment-lists',function(u,v){var w=v.commentlists;if(w&&w.comments&&Object.keys(w).length)for(var x in w.comments)for(var y in w.comments[x]){var z=w.comments[x][y],aa=z.forcenotpageable===true;s.getCommentList(x,y).addCommentIDs(z.range.offset,z.range.length,z.values).setForceNotPageable(aa);}});i.subscribe('update-comments',function(u,v){if(v.comments&&v.comments.length)v.comments.forEach(function(w){if(w.parentcommentid)return;var x=w.ftentidentifier;s.getCommentListsForFeedbackTargetID(x).forEach(function(y){y.addOrUpdateComment(w);});});});i.subscribe('update-feedback',function(u,v){if(v.feedbacktargets&&v.feedbacktargets.length)v.feedbacktargets.forEach(function(w){var x=w.entidentifier,y=w.defaultcommentorderingmode,z={};if(y)z[y]=true;if(w.orderingmodes)w.orderingmodes.forEach(function(ba){z[ba.value]=true;});for(var aa in z)s.getCommentList(x,aa).updateCommentCount(w.commentcount);});});e.exports=s;},null);
__d("XUFITypingIndicatorController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/typing\/{feedback_id}\/{update}\/",{feedback_id:{type:"String",required:true},update:{type:"Enum",required:true,enumType:1}});},null);
__d("XUFIAddCommentController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/add\/comment\/",{});},null);
__d("XUFIDeleteCommentController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/delete\/comment\/",{});},null);
__d("XUFICommentLikeController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/comment\/like\/",{});},null);
__d("XUFIHideCommentController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/hide\/comment\/",{});},null);
__d("XUFILikeController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/like\/",{});},null);
__d("XUFIEditCommentController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/edit\/comment\/",{});},null);
__d("XUFITranslateCommentController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/translate\/comment\/",{});},null);
__d("XUFIActorChangeController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/ufi\/actor\/change\/",{});},null);
__d("UFIUserActions",["ActorURI","AsyncRequest","AsyncResponse","requireWeak","ClientIDs","ImmutableObject","Nectar","UFICentralUpdates","UFIToplevelCommentList","UFIComments","UFIConstants","UFIFeedbackTargets","MercuryServerDispatcher","XUFITypingIndicatorController","XUFIAddCommentController","XUFIDeleteCommentController","XUFICommentLikeController","XUFIHideCommentController","XUFILikeController","XUFIEditCommentController","XUFITranslateCommentController","XUFIActorChangeController","collectDataAttributes","errorCode","fbt","UnicodeBidi"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){b.__markCompiled&&b.__markCompiled();var ga;j(['CLoggerX'],function(eb){ga=eb;});var ha={BAN:'ban',UNDO_BAN:'undo_ban'},ia={changeActor:function(eb,fb){r.getFeedbackTarget(eb,function(gb){o.resetCommentListsWithContext(eb,{actorID:fb});var hb={from_actor_id:gb.actorforpost,ft_ent_identifier:eb};hb[g.PARAMETER_ACTOR]=fb;var ib=ba.getURIBuilder().getURI();s.trySend(ib,hb);});},changeCommentLike:function(eb,fb,gb){var hb=p.getComment(eb);if(hb.hasviewerliked!=fb){var ib=ja(gb.target),jb=fb?1:-1,kb={commentid:eb,actiontype:q.UFIActionType.COMMENT_LIKE,viewerliked:fb,likecount:(hb.likecount||0)+jb};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[kb]});r.getFeedbackTarget(hb.ftentidentifier,function(lb){var mb={};mb[g.PARAMETER_ACTOR]=lb.actorforpost;var nb=w.getURIBuilder().getURI();s.trySend(nb,Object.assign({comment_id:eb,legacy_id:hb.legacyid,like_action:fb,ft_ent_identifier:hb.ftentidentifier,source:gb.source,client_id:k.getNewClientID()},ib,mb));});}},addComment:function(eb,fb,gb,hb){r.getFeedbackTarget(eb,function(ib){var jb=ja(hb.target),kb=k.getNewClientID();if(!ib.actorforpost)return;var lb=fa.isDirectionLTR(fb)?'ltr':'rtl',mb={ftentidentifier:eb,body:{text:fb,dir:lb},author:ib.actorforpost,id:kb,islocal:true,ufiinstanceid:hb.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:hb.replyid,attachment:hb.attachedsticker,photo_comment:hb.attachedphoto,timestamp:{time:Math.floor(Date.now()/1000),text:ea._("a few seconds ago")}},nb={actiontype:q.UFIActionType.SUBSCRIBE_ACTION,actorid:ib.actorforpost,hasviewersubscribed:true,entidentifier:eb},ob={actiontype:q.UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:ib.targetfbid};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{comments:[mb],actions:[nb,ob]});var pb=null;if(hb.replyid)pb=(p.getComment(hb.replyid)).fbid;var qb;if(ga)qb=ga.getCLParamsForTarget(hb.target,pb);var rb={};rb[g.PARAMETER_ACTOR]=ib.actorforpost;var sb=u.getURIBuilder().getURI();s.trySend(sb,Object.assign({ft_ent_identifier:ib.entidentifier,comment_text:gb,source:hb.source,client_id:kb,reply_fbid:pb,parent_comment_id:hb.replyid,timeline_log_data:hb.timelinelogdata,rootid:hb.rootid,clp:qb,attached_sticker_fbid:hb.attachedsticker?hb.attachedsticker.fbid:0,attached_photo_fbid:hb.attachedphoto?hb.attachedphoto.fbid:0,giftoccasion:hb.giftoccasion,recommendation_ids:hb.recommendationIDs?hb.recommendationIDs:[],feed_context:hb.feedcontext},jb,rb));});},_hasCommentTextChanged:function(eb,fb){return eb.body&&eb.body.text!=fb;},_hasCommentPhotoChanged:function(eb,fb){return ((eb||fb)&&!(eb&&fb))||(eb&&fb&&(eb.fbid!=fb.fbid));},_hasCommentStickerChanged:function(eb,fb){return ((eb||fb)&&!(eb&&fb))||(eb&&(eb.type=="sticker")&&fb&&(eb.fbid!=fb.fbid));},editComment:function(eb,fb,gb,hb){var ib=ja(hb.target),jb=p.getComment(eb),kb=this._hasCommentTextChanged(jb,fb)||this._hasCommentPhotoChanged(jb.photo_comment,hb.attachedPhoto)||this._hasCommentStickerChanged(jb.attachment,hb.attachedSticker);jb=l.set(jb,{status:q.UFIStatus.PENDING_EDIT,body:{text:fb},editnux:null,attachment:hb.attachedSticker,photo_comment:hb.attachedPhoto});if(kb)jb=l.set(jb,{originalTimestamp:jb.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:ea._("a few seconds ago")}});n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{comments:[jb]});r.getFeedbackTarget(jb.ftentidentifier,function(lb){var mb={};mb[g.PARAMETER_ACTOR]=lb.actorforpost;var nb=z.getURIBuilder().getURI();s.trySend(nb,Object.assign({ft_ent_identifier:jb.ftentidentifier,comment_text:gb,source:hb.source,comment_id:jb.id,parent_comment_id:jb.parentcommentid,attached_sticker_fbid:hb.attachedSticker?hb.attachedSticker.fbid:0,attached_photo_fbid:hb.attachedPhoto?hb.attachedPhoto.fbid:0},ib,mb));});},translateComment:function(eb,fb){var gb=aa.getURIBuilder().getURI();s.trySend(gb,{ft_ent_identifier:eb.ftentidentifier,comment_ids:[eb.id],source:fb.source});},setHideAsSpam:function(eb,fb,gb){var hb=ja(gb.target),ib=p.getComment(eb),jb={commentid:eb,actiontype:q.UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:fb};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[jb]});var kb=x.getURIBuilder().getURI();s.trySend(kb,Object.assign({comment_id:eb,spam_action:fb,ft_ent_identifier:ib.ftentidentifier,source:gb.source},hb));},removeComment:function(eb,fb){var gb=ja(fb.target),hb=p.getComment(eb),ib={actiontype:q.UFIActionType.DELETE_COMMENT,commentid:eb,islocal:true,oneclick:fb.oneclick};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[ib]});r.getFeedbackTarget(hb.ftentidentifier,function(jb){var kb={};kb[g.PARAMETER_ACTOR]=jb.actorforpost;var lb=v.getURIBuilder().getURI();s.trySend(lb,Object.assign({comment_id:hb.id,comment_legacyid:hb.legacyid,ft_ent_identifier:hb.ftentidentifier,one_click:fb.oneclick,source:fb.source,client_id:k.getNewClientID(),timeline_log_data:fb.timelinelogdata},gb,kb));});},banUser:function(eb,fb,gb,hb){var ib=gb?ha.BAN:ha.UNDO_BAN;s.trySend('/ajax/ufi/ban_user.php',{page_id:fb,commenter_id:eb.author,action:ib,comment_id:eb.id,client_side:true});},changeLike:function(eb,fb,gb){r.getFeedbackTarget(eb,function(hb){var ib=ja(gb.target);if(hb.hasviewerliked!==fb){var jb=fb?1:-1,kb={actiontype:q.UFIActionType.LIKE_ACTION,actorid:hb.actorforpost,hasviewerliked:fb,likecount:(hb.likecount||0)+jb,entidentifier:eb,likesentences:{current:hb.likesentences.alternate,alternate:hb.likesentences.current}};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[kb]});var lb={},mb=y.getURIBuilder().getURI();lb[g.PARAMETER_ACTOR]=hb.actorforpost;s.trySend(mb,Object.assign({like_action:fb,ft_ent_identifier:eb,source:gb.source,client_id:k.getNewClientID(),rootid:gb.rootid,giftoccasion:gb.giftoccasion},ib,lb));}});},changeSubscribe:function(eb,fb,gb){r.getFeedbackTarget(eb,function(hb){var ib=ja(gb.target);if(hb.hasviewersubscribed!==fb){var jb={actiontype:q.UFIActionType.SUBSCRIBE_ACTION,actorid:hb.actorforpost,hasviewersubscribed:fb,entidentifier:eb};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[jb]});var kb={};kb[g.PARAMETER_ACTOR]=hb.actorforpost;s.trySend('/ajax/ufi/subscribe.php',Object.assign({subscribe_action:fb,ft_ent_identifier:eb,source:gb.source,client_id:k.getNewClientID(),rootid:gb.rootid,comment_expand_mode:gb.commentexpandmode},ib,kb));}});},fetchSpamComments:function(eb,fb,gb,hb){s.trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:eb,viewas:hb,comment_ids:fb,parent_comment_id:gb,source:null});},removePreview:function(eb,fb){var gb=ja(fb.target),hb={commentid:eb.id,actiontype:q.UFIActionType.REMOVE_PREVIEW};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[hb]});s.trySend('/ajax/ufi/remove_preview.php',Object.assign({comment_id:eb.id,ft_ent_identifier:eb.ftentidentifier,source:fb.source},gb));},typingChange:function(eb,fb){(new h(t.getURIBuilder().setString('feedback_id',eb).setEnum('update',fb?'start':'stop').getURI())).send();}};function ja(eb){if(!eb)return {ft:{}};var fb={ft:ca(eb,['ft']).ft};m.addModuleData(fb,eb);return fb;}function ka(eb){i.defaultErrorHandler(eb);}function la(eb){var fb=eb.request.data;i.defaultErrorHandler(eb);var gb=fb.client_id||fb.comment_id,hb=p.getComment(gb),ib=(hb.status===q.UFIStatus.PENDING_EDIT)?q.UFIStatus.FAILED_EDIT:q.UFIStatus.FAILED_ADD;hb=l.setDeep(hb,{status:ib,allowRetry:ma(eb),body:{mentionstext:fb.comment_text,mentionsphoto:hb.photo_comment}});n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{comments:[hb]});}function ma(eb){var fb=eb.getError();if(eb.isBlockedAction())return false;if(eb.silentError)return true;if(fb===1357012||fb===1357006)return false;return true;}function na(eb){var fb=eb.request.data,gb=fb.comment_id,hb=p.getComment(gb);hb=l.set(hb,{status:hb.priorstatus||null,priorstatus:(void 0)});n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{comments:[hb]});}function oa(eb){var fb=eb.request.data,gb=fb.comment_id,hb=p.getComment(gb);if(fb.like_action===hb.hasviewerliked){var ib=hb.hasviewerliked?-1:1,jb={commentid:gb,actiontype:q.UFIActionType.COMMENT_LIKE,viewerliked:!hb.hasviewerliked,likecount:(hb.likecount||0)+ib};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[jb]});}i.defaultErrorHandler(eb);}function pa(eb){var fb=eb.request.data,gb=fb.ft_ent_identifier;r.getFeedbackTarget(gb,function(hb){if(hb.hasviewerliked===fb.like_action){var ib=hb.hasviewerliked?-1:1,jb={actiontype:q.UFIActionType.LIKE_ACTION,actorid:hb.actorforpost,hasviewerliked:!hb.hasviewerliked,likecount:(hb.likecount||0)+ib,entidentifier:gb,likesentences:{current:hb.likesentences.alternate,alternate:hb.likesentences.current}};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[jb]});}});i.defaultErrorHandler(eb);}function qa(eb){var fb=eb.request.data,gb=fb.ft_ent_identifier;r.getFeedbackTarget(gb,function(hb){if(hb.hasviewersubscribed===fb.subscribe_action){var ib={actiontype:q.UFIActionType.SUBSCRIBE_ACTION,actorid:hb.actorforpost,hasviewersubscribed:!hb.hasviewersubscribed,entidentifier:gb};n.handleUpdate(q.UFIPayloadSourceType.USER_ACTION,{actions:[ib]});}});i.defaultErrorHandler(eb);}var ra={'/ajax/ufi/ban_user.php':{mode:s.IMMEDIATE,error_handler:ka},'/ajax/ufi/subscribe.php':{mode:s.BATCH_CONDITIONAL,error_handler:qa,batch_if:cb,batch_function:db},'/ajax/ufi/id_comment_fetch.php':{mode:s.IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:s.IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:s.IMMEDIATE}},sa=u.getURIBuilder().getURI();ra[sa]={mode:s.IMMEDIATE,error_handler:la};var ta=v.getURIBuilder().getURI();ra[ta]={mode:s.IMMEDIATE,error_handler:na};var ua=w.getURIBuilder().getURI();ra[ua]={mode:s.BATCH_CONDITIONAL,error_handler:oa,batch_if:ab,batch_function:db};var va=x.getURIBuilder().getURI();ra[va]={mode:s.IMMEDIATE,error_handler:na};var wa=y.getURIBuilder().getURI();ra[wa]={mode:s.BATCH_CONDITIONAL,error_handler:pa,batch_if:bb,batch_function:db};var xa=z.getURIBuilder().getURI();ra[xa]={mode:s.IMMEDIATE,error_handler:la};var ya=aa.getURIBuilder().getURI();ra[ya]={mode:s.IMMEDIATE};var za=ba.getURIBuilder().getURI();ra[za]={mode:s.IMMEDIATE};s.registerEndpoints(ra);function ab(eb,fb){return eb&&eb.ft_ent_identifier==fb.ft_ent_identifier&&eb.comment_id==fb.comment_id;}function bb(eb,fb){return eb&&eb.ft_ent_identifier==fb.ft_ent_identifier;}function cb(eb,fb){return eb&&eb.ft_ent_identifier==fb.ft_ent_identifier;}function db(eb,fb){return fb;}e.exports=ia;},null);
__d("XPagesMessagingPrivateReplyDialogController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pages\/messaging\/private_reply\/dialog\/",{activity_id:{type:"String",required:true}});},null);
__d("UFIPrivateReplyLink.react",["ActorURI","Link.react","PagesPrivateReplyConstants","React","XUIGrayText.react","XPagesMessagingPrivateReplyDialogController","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=i.Status,o=i.Type,p=j,q=p.PropTypes,r=j.createClass({displayName:"UFIPrivateReplyLink",propTypes:{actorID:q.string.isRequired,activityID:q.string.isRequired,context:q.shape({activityType:q.string.isRequired,status:q.string.isRequired,hasReplyPermission:q.bool.isRequired,pageID:q.string.isRequired,permalink:q.string}).isRequired},render:function(){var s=this.props.context;if(s.hasReplyPermission&&this.props.actorID===s.pageID){if(s.status===n.REPLYABLE){return this._renderMessageLink();}else if(s.status===n.ALREADY_REPLIED)return this._renderSeeReplyLink();return this._renderTooltip();}if(s.status===n.ALREADY_REPLIED)return this._renderIndicator();return null;},_renderMessageLink:function(){var s=g.create(l.getURIBuilder().setString('activity_id',this.props.activityID).getURI(),this.props.context.pageID);return (j.createElement(h,{href:s,rel:"dialog"},this._getLabel()));},_renderTooltip:function(){var s;switch(this.props.context.status){case n.EXPIRED:s=m._({"comments":"You can't send a message response to comments that are older than 6 months.","reviews":"You can't send a message response to reviews that are older than 6 months.","posts":"You can't send a message response to posts that are older than 6 months."},[m['enum'](this._getActivityTypeLabel(),{comments:"comments",reviews:"reviews",posts:"posts"})]);break;case n.NOT_USER_CREATED:s=m._("Pages can't send private messages to other Pages.");break;}return (j.createElement("span",null,j.createElement(k,{shade:"light","aria-label":s,"data-hover":s?'tooltip':null},this._getLabel())));},_renderSeeReplyLink:function(){return (j.createElement(h,{href:this.props.context.permalink||'#'},m._("See Response")));},_renderIndicator:function(){return (j.createElement("span",null,j.createElement(k,{shade:"light"},m._("Page responded privately"))));},_getLabel:function(){return (m._("Message"));},_getActivityTypeLabel:function(){switch(this.props.context.activityType){case o.COMMENT_PAGE_POST:case o.COMMENT_WALL_POST:case o.COMMENT_REVIEW:return 'comments';case o.REVIEW:return 'reviews';default:return 'posts';}}});e.exports=r;},null);
__d("UFIActionLinkController",["Arbiter","BootloadedComponent.react","Bootloader","ClickPointIdentifiersDEPRECATED","CSS","DataStore","DOM","DOMQuery","Parent","React","TrackingNodes","UFIBlingBox.react","UFICentralUpdates","UFICommentLink.react","UFIConstants","UFIFeedbackTargets","UFIInstanceState","UFILikeLink.react","UFIShareLink.react","UFISubscribeLink.react","UFITimelineBlingBox.react","UFIToplevelCommentList","UFIUserActions","UFIUIEvents","UFIPrivateReplyLink.react","URI","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){b.__markCompiled&&b.__markCompiled();var ha;function ia(ka,la,ma){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var na=n.scry(ka,la)[0];if(na){if(k.hasClass(na,'prevent_react_replace'))return;var oa=document.createElement('span');na.parentNode.replaceChild(oa,na);oa.appendChild(na);if(typeof ma==="function")ma(oa);}else var pa=g.subscribe('PhotoSnowlift.DATA_CHANGE',function(){g.unsubscribe(pa);ia(ka,la,ma);},g.SUBSCRIBE_NEW);}var ja=function(ka,la,ma,na){this._id=la.ftentidentifier;this._ftFBID=ma.targetfbid;this._source=la.source;this._contextArgs=la;this._ufiRoot=ka;this._ufiInstanceID=na;this._isOnTimeline=this._isRenderingOnTimeline();if(this._isOnTimeline){this._attemptInitializeTimelineBling();}else this._attemptInitializeBling();if(ma.viewercanlike||ma.hasviewerliked)this._attemptInitializeLike();if(ma.cancomment)this._attemptInitializeComment();if(ma.viewercansubscribetopost)this._attemptInitializeSubscribe();this._attemptInitializeShare();this._attemptInitializeMessageReply();s.subscribe('feedback-updated',function(oa,pa){var qa=pa.updates;if(this._id in qa)this.render();}.bind(this));s.subscribe('feedback-id-changed',function(oa,pa){var qa=pa.updates;if(this._id in qa)this._id=qa[this._id];}.bind(this));s.subscribe('instance-updated',function(oa,pa){var qa=pa.updates[this._ufiInstanceID];if(qa&&qa.inlineShare)this.render();}.bind(this));};Object.assign(ja.prototype,{_attemptInitializeBling:function(){ia(this._ufiRoot,'^form .uiBlingBox',function(ka){this._blingRoot=ka;if(this._dataReady)this._renderBling();}.bind(this));},_attemptInitializeTimelineBling:function(){if(this._root)throw new Error('UFIActionLinkController attempted to initialize when a root was'+' already present');var ka=n.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline')[0];if(ka){var la=n.scry(ka,'.fbTimelineFeedbackLikes')[0];this._enableShowLikes=la?true:false;var ma=n.scry(ka,'.fbTimelineFeedbackComments')[0];this._enableShowComments=ma?true:false;}this._blingTimelineRoot=ka;if(this._dataReady)this._renderTimelineBling();},_attemptInitializeLike:function(){ia(this._ufiRoot,'^form .like_link',function(ka){this._likeRoot=ka;if(this._dataReady)this._renderLike();}.bind(this));},_attemptInitializeComment:function(){ia(this._ufiRoot,'^form .comment_link',function(ka){this._commentRoot=ka;if(this._dataReady)this._renderComment();}.bind(this));},_attemptInitializeSubscribe:function(){ia(this._ufiRoot,'^form .unsub_link',function(ka){this._subscribeRoot=ka;if(this._dataReady)this._renderSubscribe();}.bind(this));},_attemptInitializeMessageReply:function(){ia(this._ufiRoot,'^form .message_reply_action_link',function(ka){this._messageReplyRoot=ka;if(this._messageReplyRoot.previousSibling&&this._messageReplyRoot.previousSibling.nodeType===3){this._messageReplySeparator=this._messageReplyRoot.previousSibling;this._messageReplySeparatorData=this._messageReplySeparator.data;}if(this._dataReady)this._renderMessageReply();}.bind(this));},_attemptInitializeShare:function(){ia(this._ufiRoot,'^form .share_action_link',function(ka){this._shareRoot=ka;k.addClass(this._shareRoot,"share_root");var la=n.scry(this._shareRoot,'.share_action_link')[0];if(la){this._shareURI=la.getAttribute('href');this._shareRel=la.getAttribute('rel');this._shareNowMenuURI=l.get(la,'share-now-menu-uri');}if(this._dataReady)this._renderShare();}.bind(this));},render:function(){this._dataReady=true;if(this._isOnTimeline){this._renderTimelineBling();}else this._renderBling();this._renderLike();this._renderComment();this._renderSubscribe();this._renderShare();this._renderMessageReply();},_renderBling:function(){if(this._blingRoot)v.getFeedbackTarget(this._id,function(ka){var la=function(event){var qa=o.byTag(event.target,"form");k.toggleClass(qa,"collapsed_comments");k.toggleClass(qa,"hidden_add_comment");event.preventDefault();}.bind(this),ma=q.getTrackingInfo(q.types.BLINGBOX),na=ba.getCommentListForFeedbackTargetID_UNSAFE(this._id).getDisplayedCommentCount(),oa=new fa(ka.permalink).addQueryData({comment_tracking:ma}).toString(),pa=p.createElement(r,{likes:ka.likecount,likesreduced:ka.likecountreduced,comments:na,commentsreduced:ka.commentcountreduced,reshares:ka.sharecount,resharesreduced:ka.sharecountreduced,nfb:ka.nfbcount,permalink:oa,contextArgs:this._contextArgs,onClick:la,"data-ft":ma,neverPermalink:this._contextArgs.neverpermalinkblingbox});this._blingBox=p.render(pa,this._blingRoot);}.bind(this));},_renderTimelineBling:function(){if(this._blingTimelineRoot)v.getFeedbackTarget(this._id,function(ka){var la=q.getTrackingInfo(q.types.BLINGBOX),ma=j.getUserActionID(j.types.TIMELINE_SEE_LIKERS),na=function(event){var qa=o.byTag(event.target,"form");k.removeClass(qa,"collapsed_comments");var ra=n.scry(qa,'a.UFIPagerLink');if(ra.length)ra[0].click();event.preventDefault();}.bind(this),oa=ba.getCommentListForFeedbackTargetID_UNSAFE(this._id).getDisplayedCommentCount(),pa=p.createElement(aa,{comments:oa,commentsreduced:ka.commentcountreduced,commentOnClick:na,contextArgs:this._contextArgs,"data-ft":la,"data-gt":ma,enableShowComments:this._enableShowComments,enableShowLikes:this._enableShowLikes,feedbackFBID:this._ftFBID,likes:ka.likecount,likesreduced:ka.likecountreduced,reshares:ka.sharecount,resharesreduced:ka.sharecountreduced,actorid:ka.actorid});p.render(pa,this._blingTimelineRoot);}.bind(this));},_renderLike:function(){if(this._likeRoot)v.getFeedbackTarget(this._id,function(ka){var la=!ka.hasviewerliked,ma=function(event){var oa=la?da.UFIActionLinkLike:da.UFIActionLinkUnlike;g.inform(oa,{ft_id:this._id,like_action:la,target:event.target});ca.changeLike(this._id,la,{source:this._source,target:event.target,rootid:this._contextArgs.rootid,giftoccasion:this._contextArgs.giftoccasion});event.preventDefault();g.inform('inlineShare/reflow');}.bind(this),na=p.createElement(x,{onClick:ma,likeAction:la,ufiExperiments:this._contextArgs.ufiexperiments});this._likeLink=p.render(na,this._likeRoot);}.bind(this));},_renderComment:function(){if(!this._commentRoot)return;var ka=function(event){event.preventDefault();this._setInlineShareActive(false);}.bind(this),la=p.createElement(t,{onClick:ka,ufiExperiments:this._contextArgs.ufiexperiments});this._commentLink=p.render(la,this._commentRoot);},_renderMessageReply:function(){if(this._messageReplyRoot)v.getFeedbackTarget(this._id,function(ka){this._messageReplyLink=null;if(ka.allowmessagelink){var la=p.createElement(h,{bootloadPlaceholder:p.createElement("span",null),bootloadComponent:function(na){i.loadModules(["UFIMessageLink.react"],na);},feedbackSource:this._source,postID:this._id});this._messageReplyLink=p.render(la,this._messageReplyRoot);}else if(ka.messagereplycontext){var ma=p.createElement(ea,{actorID:ka.actorforpost,activityID:this._id,context:ka.messagereplycontext});this._messageReplyLink=p.render(ma,this._messageReplyRoot);}if(!this._messageReplyLink||!p.findDOMNode(this._messageReplyLink)){if(this._messageReplySeparator)this._messageReplySeparator.data='';m.setContent(this._messageReplyRoot,null);return;}if(this._messageReplySeparator)this._messageReplySeparator.data=this._messageReplySeparatorData;}.bind(this));},_renderSubscribe:function(){if(this._subscribeRoot)v.getFeedbackTarget(this._id,function(ka){var la=!ka.hasviewersubscribed,ma=function(event){ca.changeSubscribe(this._id,la,{source:this._source,target:event.target,rootid:this._contextArgs.rootid,commentexpandmode:ka.commentexpandmode});event.preventDefault();}.bind(this),na=p.createElement(z,{onClick:ma,subscribeAction:la});this._subscribeLink=p.render(na,this._subscribeRoot);}.bind(this));},_onShareClick:function(event){if(this._getInlineShareLoaded()){this._setInlineShareActive(true);event.kill();}},_renderShare:function(ka){if(!(this._shareRoot&&this._shareURI))return;var la=!this._getInlineShareActive()&&this._shareNowMenuURI,ma=this._ufiInstanceID,na;if(la&&ha){na=p.createElement(ha,p.__spread({endpoint:this._shareNowMenuURI,endpointData:{ufi_id:ma}},ka),p.createElement(y,{href:"#",ufiExperiments:this._contextArgs.ufiexperiments}));}else{var oa=null;if(la){oa={onClick:this._bootloadShareMenu.bind(this,{openOnInit:true}),onFocus:this._bootloadShareMenu.bind(this,{focusOnInit:true}),onMouseOver:this._bootloadShareMenu.bind(this,{})};}else oa={ajaxify:new fa(this._shareURI).addQueryData({ufi_id:ma}),rel:this._shareRel,onShareClick:this._onShareClick.bind(this)};na=p.createElement(y,p.__spread({ufiExperiments:this._contextArgs.ufiexperiments,href:"#"},oa));}this._shareLink=p.render(na,this._shareRoot);},_bootloadShareMenu:function(ka){i.loadModules(["UFIShareNowMenu.react"],function(la){ha=la;this._renderShare(ka);}.bind(this));},_setInlineShareActive:function(ka){var la=w.getKeyForInstance(this._ufiInstanceID,'inlineShare');w.updateState(this._ufiInstanceID,'inlineShare',Object.assign({},la,{active:ka,toggling:true}));},_getInlineShareLoaded:function(){var ka=w.getKeyForInstance(this._ufiInstanceID,'inlineShare');return !!(ka&&ka.loaded);},_getInlineShareActive:function(){var ka=w.getKeyForInstance(this._ufiInstanceID,'inlineShare');return !!(ka&&ka.active);},_isRenderingOnTimeline:function(){if(this._source===u.UFIFeedbackSourceType.PROFILE){var ka=n.scry(this._ufiRoot,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline');return (ka.length>0);}return false;}});e.exports=ja;},null);
__d("InputCaretUtility",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={moveCaretToBeginning:function(h){if(typeof h.selectionStart==="number"){h.selectionStart=h.selectionEnd=0;}else if(h.createTextRange!==(void 0)){h.focus();var i=h.createTextRange();i.collapse(false);i.select();}},delayedMoveCaretToBeginning:function(h){setTimeout(function(){return g.moveCaretToBeginning(h);});}};e.exports=g;},null);
__d("LegacyMentionsInput.react",["Bootloader","CLogConfig","TypeaheadMetricsConfig","Event","InputCaretUtility","Keys","React","DOM","cx","FocusListener"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();b('FocusListener');var p=m,q=p.PropTypes,r=m.createClass({displayName:"ReactLegacyMentionsInput",propTypes:{initialData:q.object,placeholder:q.string,datasource:q.object,ref:q.string,viewOptionsTypeObjects:q.object,viewOptionsTypeObjectsOrder:q.array,hashtags:q.bool,autoflip:q.bool,onEnterSubmit:q.func,onFocus:q.func,onBlur:q.func,onTypingStateChange:q.func,onPaste:q.func},componentDidMount:function(){this.props.initialData&&this._initializeTextarea(m.findDOMNode(this));},hasEnteredText:function(){return !!(this._mentionsInput&&this._mentionsInput.getValue().trim());},setSignature:function(s){var t=m.findDOMNode(this.refs.textarea);n.setAttributes(t,{value:s});k.delayedMoveCaretToBeginning(t);},submitComment:function(event){var s;if(event){s=event.target.value&&event.target.value.trim();}else{var t=m.findDOMNode(this.refs.textarea);if(t.value&&t.value!==t.placeholder)s=t.value;}s=s||'';var u={visibleValue:s,encodedValue:s};if(this._mentionsInput)u.encodedValue=this._mentionsInput.getRawValue().trim();var v=this.props.onEnterSubmit(u,event);if(v&&this._mentionsInput){this._mentionsInput.reset();event&&event.preventDefault();}},_handleKeydown:function(event){var s=event.nativeEvent,t=j.getKeyCode(s)==l.RETURN&&!j.$E(s).getModifiers().any,u=this._mentionsInput&&this._mentionsInput.getTypeahead().getView().getSelection();if(this.props.onEnterSubmit&&t&&!u)this.submitComment(event);},_handleFocus:function(){this.props.onFocus&&this.props.onFocus();this._initializeTextarea(m.findDOMNode(this.refs.root));},_handleBlur:function(){this.props.onBlur&&this.props.onBlur();},_initializeTextarea:function(s){if(this._mentionsInput||this._bootloadingMentions)return;this._bootloadingMentions=true;g.loadModules(["CompactTypeaheadRenderer","ContextualTypeaheadView","CLoggerX","InputSelection","MentionsInput","TextAreaControl","Typeahead","TypeaheadAreaCore","TypeaheadBestName","TypeaheadHoistFriends","TypeaheadMetrics","TypeaheadMetricsX","TypingDetector","UFIComments"],function(t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){var ha=m.findDOMNode(this.refs.textarea);new y(ha);if(h.gkResults){var ia=ga.getComment(this.props.replyCommentID),ja=ia?ia.fbid:null;v.trackMentionsInput(ha,ja);}if(this.props.onTypingStateChange){var ka=new fa(ha);ka.init();ka.subscribe('change',this.props.onTypingStateChange);}var la={autoSelect:true,renderer:t,causalElement:ha,autoflip:this.props.autoflip};if(this.props.viewOptionsTypeObjects)la.typeObjects=this.props.viewOptionsTypeObjects;if(this.props.viewOptionsTypeObjectsOrder)la.typeObjectsOrder=this.props.viewOptionsTypeObjectsOrder;var ma=new z(this.props.datasource,{ctor:u,options:la},{ctor:aa},m.findDOMNode(this.refs.typeahead)),na=[ba,ca];if(i.gkResults){var oa=new ea({extraData:{event_name:'mention_metric_x'}});oa.init(ma);}var pa=new da({extraData:{event_name:'mentions',from_location:'comments'}});z.initNow(ma,na,pa);this._mentionsInput=new x(s,ma,ha,{hashtags:this.props.hashtags});this._mentionsInput.init({},this.props.initialData);if(this.props.initialData)w.set(ha,ha.value.length);if(this.props.onPaste)j.listen(ha,'paste',this.props.onPaste);this._bootloadingMentions=false;}.bind(this));},focus:function(){try{m.findDOMNode(this.refs.textarea).focus();}catch(s){}},render:function(){var s=(("textInput")+(' '+"mentionsTextarea")+(' '+"uiTextareaAutogrow")+(' '+"uiTextareaNoResize")+(' '+"UFIAddCommentInput"));return (m.createElement("div",{ref:"root",className:"uiMentionsInput textBoxContainer ReactLegacyMentionsInput"},m.createElement("div",{className:"highlighter"},m.createElement("div",null,m.createElement("span",{className:"highlighterContent hidden_elem"}))),m.createElement("div",{ref:"typeahead",className:"uiTypeahead mentionsTypeahead"},m.createElement("div",{className:"wrap"},m.createElement("input",{type:"hidden",autoComplete:"off",className:"hiddenInput"}),m.createElement("div",{className:"innerWrap"},m.createElement("textarea",{ref:"textarea",name:"add_comment_text",className:s,title:this.props.placeholder,placeholder:this.props.placeholder,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyDown:this._handleKeydown})))),m.createElement("input",{type:"hidden",autoComplete:"off",className:"mentionsHidden",defaultValue:""})));}});e.exports=r;},null);
__d("XPagesAdminSignatureSettingsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pages\/admin\/signature\/settings\/",{});},null);
__d("XPagesAdminSignaturePromptDialogController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/pages\/admin\/signature\/prompt\/",{__asyncDialog:{type:"Int"}});},null);
__d("PageAdminSignatureMonitor",["Arbiter","AsyncRequest","AdminSignatureConstants","DOM","DOMQuery","Event","InputCaretUtility","PageAdminSignatureSettings","XPagesAdminSignatureSettingsController","XPagesAdminSignaturePromptDialogController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q={registerComposerControlForSignature:function(r,s,t,u){if(!s||!s.isValid)return;var v=this._getUnderlyingTextControl(r),w=new n(s,t);l.listen(v,'focus',function(){this._handleInputFieldFocusForSignature(v,w,w.getShouldAttachToPost(),function(x){return x.value;},function(x,y){if(u)y='\n\n'.concat(y);j.setAttributes(x,{value:y});m.delayedMoveCaretToBeginning(x);});}.bind(this));},handleReactInputFieldFocusForSignature:function(r,s,t){this._handleInputFieldFocusForSignature(r,s,t,function(u){return u.hasEnteredText();},function(u,v){return u.setSignature(v);});},prepareConfirmationDialog:function(r,s,t){r.subscribe('confirm',function(){r.hide();this._notifyPromptConfirmation(s,t,true);}.bind(this));r.subscribe('cancel',function(){this._notifyPromptConfirmation(s,t,false);}.bind(this));},_promptForAutoSignature:function(r){g.inform(i.EVENT_ADMIN_SIGNATURE_PROMPTED,{userID:r.getUserID()});var s=p.getURIBuilder().getURI();new h().setURI(s).setData({pageID:r.getPageID()}).send();},_handleInputFieldFocusForSignature:function(r,s,t,u,v){if(!s||!s.getIsValidWithActor())return;if(!s.getEverPromptedUser()){this._promptForAutoSignature(s);}else if(t&&!u(r))v(r,s.getSignature());},_notifyPromptConfirmation:function(r,s,t){var u=o.getURIBuilder().getURI();new h().setURI(u).setData({pageID:r,signatureOption:i.SETTING_EVER_PROMPTED,signatureOptionValue:t}).send();this._aribiterNotifyPromptConfirmation(r,s,t);},_getUnderlyingTextControl:function(r){return k.find(r,'textarea');},_aribiterNotifyPromptConfirmation:function(r,s,t){var u=[i.SETTING_ATTACH_TO_POST,i.SETTING_ATTACH_TO_COMMENT,i.SETTING_ATTACH_TO_MESSAGE];u.forEach(function(v){g.inform(i.EVENT_ADMIN_SIGNATURE_SETTING_CHANGED,{pageID:r,userID:s,settingChanged:v,newValue:t});});}};e.exports=q;},null);
__d("UFIStickerButton.react",["Bootloader","ContextualLayerAutoFlip","Link.react","React","ReactLayeredComponentMixin","StickerInterfaces","cx","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=j,q=p.PropTypes,r=j.createClass({displayName:"UFIStickerButton",propTypes:{onStickerFlyoutShow:q.func,onStickerSelected:q.func.isRequired,onEmoticonSelected:q.func,showTooltip:q.bool,stickerInterface:q.oneOf(o(l))},mixins:[k],getDefaultProps:function(){return {showTooltip:true,stickerInterface:l.COMMENTS};},getInitialState:function(){return {renderFlyout:null,flyoutShown:false};},render:function(){var s=n._("Post a sticker");return (j.createElement(i,{"aria-label":(this.props.showTooltip)?s:null,className:"UFICommentStickerButton","data-hover":"tooltip","data-tooltip-alignh":"center",onClick:this._onLinkClicked,onMouseDown:this._prepareForClick},j.createElement("div",{ref:"icon",tabIndex:0,className:"UFICommentStickerIcon"}),this.props.children));},renderLayers:function(){return !this.state.renderFlyout?{}:this.state.renderFlyout();},_hideFlyout:function(){this.setState({flyoutShown:false});},_prepareForClick:function(){this._clickGuard=this.state.flyoutShown;},_onLinkClicked:function(){if(this.state.renderFlyout!==null){if(!this._clickGuard){this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow();this.setState({flyoutShown:true});}return;}g.loadModules(["XUIContextualDialog.react","StickersFlyout.react"],function(s,t){this.setState({flyoutShown:true,renderFlyout:function(){return {contextualDialog:j.createElement(s,{alignment:"right",behaviors:{flip:h},className:"_5e-r",contextRef:function(){return this.refs.icon;}.bind(this),onBlur:this._hideFlyout,position:"above",shown:this.state.flyoutShown,hasActionableContext:true,width:278},j.createElement("div",null,j.createElement(t,{onEscKeyDown:this._hideFlyout,onStickerSelect:this._onStickerSelected,onEmoticonSelect:this._onEmoticonSelected,stickerInterface:this.props.stickerInterface,shown:this.state.flyoutShown})))};}.bind(this)});this.props.onStickerFlyoutShow&&this.props.onStickerFlyoutShow();}.bind(this));},_onStickerSelected:function(s,event){this.props.onStickerSelected(s,event);this._hideFlyout();},_onEmoticonSelected:function(s){this.props.onEmoticonSelected(s);this._hideFlyout();}});e.exports=r;},null);
__d("XFeedNUXSaveSeenStateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/feed\/nux\/seen\/save\/",{link_id:{type:"String"},key:{type:"String",required:true},seen:{type:"Bool",defaultValue:false}});},null);
__d("UFIAddComment.react",["ActorURI","AsyncRequest","Bootloader","ClipboardPhotoUploader","CloseButton.react","DOM","DOMContainer.react","getActiveElement","Event","Focus","HTML","Keys","LegacyMentionsInput.react","Link.react","LitestandStoryInsertionStatus","LoadingIndicator.react","PageAdminSignatureMonitor","PageAdminSignatureSettings","React","ReactLayeredComponentMixin","Run","SnowflakePermalinkUtils","Sticker.react","TrackingNodes","UFIClassNames","UFIConfig","UFIConstants","UFIImageBlock.react","UFIStickerButton.react","URI","XFeedNUXSaveSeenStateController","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na){b.__markCompiled&&b.__markCompiled();var oa=y,pa=oa.PropTypes,qa=ma._("Write a comment..."),ra=ma._("Write a reply..."),sa="fcg fss UFICommentTip",ta=19,ua='/ajax/ufi/upload/',va=80,wa='/ajax/ufi/sticker_preview/',xa=y.createClass({displayName:"UFIAddComment",mixins:[z],propTypes:{contextArgs:pa.object.isRequired,viewerActor:pa.object.isRequired,allowPhotoAttachments:pa.bool,allowStickerAttachments:pa.bool,attachedPhoto:pa.object,attachedSticker:pa.object,feedbackIsRanked:pa.bool,hide:pa.bool,initialData:pa.object,isEditing:pa.bool,isFirstComponent:pa.bool,isLastComponent:pa.bool,isSnowlift:pa.bool,isQAndA:pa.bool,mentionsDataSource:pa.object,onCancel:pa.func,onCommentSubmit:pa.func,onTypingStateChange:pa.func,replyCommentID:pa.string,showSendOnEnterTip:pa.bool,subtitle:pa.any,targetID:pa.string,withoutSeparator:pa.bool},getInitialState:function(){if(this.props.attachedPhoto)this.props.contextArgs.attachedphoto=this.props.attachedPhoto;if(this.props.attachedSticker)this.props.contextArgs.attachedsticker=this.props.attachedSticker;return {attachedPhoto:this.props.attachedPhoto?this.props.attachedPhoto:null,attachedSticker:this.props.attachedSticker?this.props.attachedSticker:null,fileInput:null,fileUploader:null,isCommenting:false,isLoadingPhoto:false,renderStickerNUX:null,stickerNUXVisible:false,isFocused:this.props.isEditing,signatureContext:new x(this.props.contextArgs.pagesAdminSignatureSettings,this.props.viewerActor.id)};},_onKeyDown:function(event){if(this.props.isEditing&&o.getKeyCode(event.nativeEvent)===r.ESC)this.props.onCancel();if(this.isMounted()&&!this._isOnBeforeUnloadListenerAdded){aa.onBeforeUnload(this._handleUnsavedChanges);this._isOnBeforeUnloadListenerAdded=true;}var ya=n();if(o.getKeyCode(event.nativeEvent)===r.ESC)ya.blur();},_handleUnsavedChanges:function(){var ya=a.PageTransitions;if(ya){var za=ja.getNextURI(),ab=ya.getMostRecentURI();if(za.getQueryData().hasOwnProperty('theater')||ab.getQueryData().hasOwnProperty('theater')||ba.isPermalinkURI(za)||ba.isPermalinkURI(ab))return;var bb=a.DialogNavigationStack;if(bb&&bb.isActiveURI(za))return;}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return ma._("You haven't finished your comment yet. Do you want to leave without finishing?");},_blur:function(){this.setState({stickerNUXVisible:false});setTimeout(function(){if(this.isMounted())this.setState({isFocused:false});}.bind(this),100);if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false});},_onPaste:function(event){var ya=new j(ua,this._getPhotoUploadData());this._cancelCurrentSubscriptions();this._subscriptions=[ya.subscribe('upload_start',this._prepareForAttachedPhotoPreview),ya.subscribe('upload_error',this._onRemoveAttachedPhotoPreviewClicked),ya.subscribe('upload_success',function(za,ab){this._onPhotoUploadComplete(ab);}.bind(this))];ya.handlePaste(event);},_onEnterSubmit:function(ya,event){var za=this.state.attachedPhoto||this.state.attachedSticker,ab=this.props.isEditing||za;if(this.state.isLoadingPhoto){return false;}else if(!ya.encodedValue.trim()&&!ab)return false;ya.encodedValue=ya.encodedValue.trim();if(za){ya.attachedPhoto=this.state.attachedPhoto;ya.attachedSticker=this.state.attachedSticker;this.setState({isLoadingPhoto:false,attachedPhoto:null,attachedSticker:null});}else{ya.attachedPhoto=null;ya.attachedSticker=null;}this.props.onCommentSubmit(ya,event);return true;},_cancelCurrentSubscriptions:function(){if(this._subscriptions)this._subscriptions.forEach(function(ya){ya.unsubscribe();});},componentWillMount:function(){this._isOnBeforeUnloadListenerAdded=false;this._storyInsertionBlocker=u.registerBlocker(function(){return this.state.isCommenting;}.bind(this));},componentWillUnmount:function(){this._cancelCurrentSubscriptions();this._storyInsertionBlocker&&this._storyInsertionBlocker.unsubscribe();this._storyInsertionBlocker=null;},focus:function(){var ya={isCommenting:true,isFocused:true};if(this.props.allowStickerAttachments&&fa.shouldShowStickerNUX){var za=ka.getURIBuilder().setString('key','sticker_comments').setBool('seen',true).getURI();new h(za).send();if(this.state.renderStickerNUX===null)i.loadModules(["XUIAmbientNUX.react"],function(ab){ya.renderStickerNUX=function(){return {ambientNUX:y.createElement(ab,{contextRef:function(){return this.refs.sticker_button;}.bind(this),shown:this.state.stickerNUXVisible,position:"above",width:"auto",alignment:"right",onCloseButtonClick:this._hideStickerNUX},ma._("Now you can comment with a sticker!"))};}.bind(this);}.bind(this));fa.shouldShowStickerNUX=false;ya.stickerNUXVisible=true;}w.handleReactInputFieldFocusForSignature(this.refs.mentionsinput,this.state.signatureContext,this.state.signatureContext.getShouldAttachToComment());this.setState(ya);},renderLayers:function(){return !this.state.renderStickerNUX?{}:this.state.renderStickerNUX();},render:function(){var ya=!this.props.contextArgs.collapseaddcomment||this.state.isCommenting,za=null;if(this.props.subtitle){za=y.createElement("span",{className:sa},this.props.subtitle);}else if(!this.state.isFocused&&this.props.isEditing){za=y.createElement("span",{className:sa},ma._("{cancel}",[ma.param("cancel",y.createElement(t,{onClick:this.props.onCancel},ma._("Cancel")))]));}else if(this.props.isEditing){za=y.createElement("span",{className:sa},ma._("Press Esc to {cancel}.",[ma.param("cancel",y.createElement(t,{onClick:this.props.onCancel},ma._("cancel")))]));}else if(this.props.showSendOnEnterTip)za=y.createElement("span",{className:sa},ma._("Press Enter to post."));var ab=null,bb=null,cb=this.state.attachedPhoto||this.state.attachedSticker,db=null;if(this.props.allowStickerAttachments&&!cb)bb=y.createElement(ia,{ref:"sticker_button",onStickerSelected:this.onStickerSelected,onEmoticonSelected:this._insertEmoticonIntoCommentText});if(this.props.allowPhotoAttachments){db=this._onPaste;var eb=cb?"UFICommentPhotoAttachedIcon":"UFICommentPhotoIcon",fb="UFIPhotoAttachLinkWrapper _m";ab=y.createElement("div",{ref:"PhotoInputContainer",className:fb,"data-hover":"tooltip","data-tooltip-alignh":"center","aria-label":ma._("Attach a Photo")},y.createElement("i",{ref:"PhotoInputControl",className:eb}));}var gb=da.getTrackingInfo(da.types.ADD_COMMENT_BOX),hb=na(ea.ACTOR_IMAGE,((!ya?"hidden_elem":''))),ib=y.createElement("div",{className:"UFIReplyActorPhotoWrapper",onClick:this.focus},y.createElement("img",{className:hb,src:this.props.viewerActor.thumbSrc,alt:this.props.viewerActor.name})),jb=na(ea.ROW,((this.props.hide?"noDisplay":'')+(' '+"UFIComponent")+(' '+"UFIAddComment")+(this.props.allowPhotoAttachments?' '+"UFIAddCommentWithPhotoAttacher":'')+(this.props.withoutSeparator?' '+"UFIAddCommentWithoutSeparator":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),kb;if(!!this.props.replyCommentID){kb=ra;}else if(this.props.isQAndA){kb=ma._("Ask a question...");}else if(this.props.source===ga.UFIFeedbackSourceType.TOPIC_CONVERSATION){kb=ma._("Discuss this topic...");}else if(!this.props.contextArgs.hasComments&&this.props.contextArgs.commentPlaceholderText){kb=this.props.contextArgs.commentPlaceholderText;}else kb=qa;var lb=this.props.contextArgs.viewoptionstypeobjects,mb=this.props.contextArgs.viewoptionstypeobjectsorder,nb=null;if(this.state.attachedSticker){var ob=this._getScaledDimensions(cb.metadata.height,cb.metadata.width),pb=null,qb=null;if(window.devicePixelRatio&&window.devicePixelRatio>1){pb=cb.metadata.sprite_uri_2x;qb=cb.metadata.source_uri_2x;}else{pb=cb.metadata.sprite_uri;qb=cb.metadata.source_uri;}nb=y.createElement(ca,{animationTrigger:"load_and_hover",frameCount:cb.metadata.frameCount,framesPerCol:cb.metadata.framesPerCol,framesPerRow:cb.metadata.framesPerRow,spriteURI:pb,sourceHeight:ob.height,sourceURI:qb,sourceWidth:ob.width});}else if(this.state.attachedPhoto){var rb=cb.markupPreview;if(q.isHTML(rb.markup))rb=q.replaceJSONWrapper(rb.markup).getRootNode();nb=y.createElement(m,null,rb);if(!this.props.subtitle)za=null;}else if(this.state.isLoadingPhoto)nb=y.createElement(v,{color:"white",className:"UFICommentPhotoAttachedPreviewLoadingIndicator",size:"medium"});var sb,tb=this.state.attachedPhoto?this._onRemoveAttachedPhotoPreviewClicked:this._onRemoveAttachedStickerPreviewClicked;if(nb!=null){var ub=null;if(this.state.attachedSticker){ub=ma._("Remove Sticker");}else if(this.state.attachedPhoto)ub=ma._("Remove Photo");sb=y.createElement("div",{className:"UFICommentPhotoAttachedPreview pas"},nb,y.createElement(k,{tooltip:ub,onClick:tb}));}var vb=this.props.allowStickerAttachments?na("UFIMentionsInputWrap","UFIStickersEnabledInput"):"UFIMentionsInputWrap",wb,xb,yb;if(this.props.contextArgs.mentionsinput){var zb=this.props.contextArgs.mentionsinput;wb=zb.inputComponent;xb=zb.viewComponent;yb=zb.viewProps;}else wb=s;return (y.createElement("li",{className:jb,onKeyDown:this._onKeyDown,"data-ft":gb},y.createElement(ha,{className:vb},ib,y.createElement("div",{className:"UFICommentContainer"},y.createElement("div",{className:"UFIInputContainer"},y.createElement(wb,{replyCommentID:this.props.replyCommentID,initialData:this.props.initialData,placeholder:kb,datasource:this.props.mentionsDataSource,ref:"mentionsinput",viewComponent:xb,viewProps:yb,viewOptionsTypeObjects:lb,viewOptionsTypeObjectsOrder:mb,hashtags:this.props.contextArgs.sht,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this._onEnterSubmit,onFocus:this.focus,onBlur:this._blur,onTypingStateChange:this.props.onTypingStateChange,onPaste:db}),y.createElement("div",{className:"UFICommentAttachmentButtons clearfix"},ab,bb)),sb,za))));},componentDidUpdate:function(ya,za,ab){if(!za.attachedPhoto&&this.state.attachedPhoto||!za.attachedSticker&&this.state.attachedSticker||!za.isCommenting&&this.state.isCommenting)this.refs.mentionsinput.focus();if(ya.viewerActor.id!==this.props.viewerActor.id){if(this.state.fileInput)this.state.fileInput.clear();if(this.state.fileUploader)this.state.fileUploader.setData(this._getPhotoUploadData());this._onRemoveAttachedPhotoPreviewClicked();}},componentDidMount:function(){if(!this.props.allowPhotoAttachments)return;var ya=y.findDOMNode(this.refs.PhotoInputContainer),za=y.findDOMNode(this.refs.PhotoInputControl),ab=ma._("Attach a Photo"),bb=l.create('input',{accept:'image/*',className:"_n",name:'file',type:'file',title:ab,'aria-label':ab});l.appendContent(za,bb);var cb=o.listen(ya,'click',function(event){i.loadModules(["FileInput","FileInputUploader","Input"],function(db,eb,fb){var gb=new db(ya,za,bb),hb=new eb().setAllowCrossPageTransition(true).setURI(ua).setData(this._getPhotoUploadData());gb.subscribe('change',function(event){if(gb.getValue()){this._prepareForAttachedPhotoPreview();hb.setInput(gb.getInput()).send();}}.bind(this));hb.subscribe('success',function(ib,jb){gb.clear();this._onPhotoUploadComplete(jb.response);}.bind(this));hb.subscribe('failure',function(ib,jb){gb.clear();this._onPhotoUploadComplete(jb.response);}.bind(this));p.setWithoutOutline(za);this.setState({fileInput:gb,fileUploader:hb});}.bind(this));cb.remove();}.bind(this));},insertMention:function(ya){if(this.refs.mentionsinput&&this.refs.mentionsinput.insertMention)this.refs.mentionsinput.insertMention(ya);},_getScaledDimensions:function(ya,za){var ab,bb,cb;if(za>ya){cb=va/za;ab=ya*cb;bb=za*cb;}else{cb=va/ya;ab=ya*cb;bb=za*cb;}return {height:Math.round(ab),width:Math.round(bb)};},_getPhotoUploadData:function(){var ya=this.props.viewerActor.id,za={profile_id:ya,target_id:this.props.targetID,source:ta};za[g.PARAMETER_ACTOR]=ya;return za;},_onPhotoUploadComplete:function(ya){if(!this.state.isLoadingPhoto)return;var za=ya.getPayload();if(za&&za.fbid){this.props.contextArgs.attachedphoto=za;this.setState({attachedPhoto:za,isLoadingPhoto:false});}else this._onRemoveAttachedPhotoPreviewClicked(null);},_onRemoveAttachedPhotoPreviewClicked:function(event){this.props.contextArgs.attachedphoto=null;this.setState({attachedPhoto:null,isLoadingPhoto:false});},_prepareForAttachedPhotoPreview:function(){this.props.contextArgs.attachedphoto=null;this.setState({attachedPhoto:null,isLoadingPhoto:true});},_onStickerUploadComplete:function(ya){if(!this.state.isLoadingPhoto)return;var za=ya.getPayload();if(za&&za.fbid){this.props.contextArgs.attachedsticker=za;this.setState({attachedSticker:za,isLoadingPhoto:false});}else{i.loadModules(["Dialog"],function(ab){var bb=ma._("Sticker Failed"),cb=ma._("There was a problem attaching the sticker.");new ab().setTitle(bb).setBody(cb).setButtons(ab.OK).show();});this._onRemoveAttachedStickerPreviewClicked(null);}},_onRemoveAttachedStickerPreviewClicked:function(event){this.props.contextArgs.attachedsticker=null;this.setState({attachedSticker:null,isLoadingPhoto:false});},onStickerSelected:function(ya,event){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()){this._prepareForAttachedStickerPreview(ya);return;}this.sendSticker(ya,event);},_prepareForAttachedStickerPreview:function(ya){this.props.contextArgs.attachedsticker=null;this.setState({attachedSticker:null,isLoadingPhoto:true});new h(wa).setData({sticker_id:ya}).setErrorHandler(this._onRemoveAttachedStickerPreviewClicked).setHandler(this._onStickerUploadComplete).send();},sendSticker:function(ya,event){var za={encodedValue:'',visibleValue:''};this.props.contextArgs.attachedsticker={fbid:ya};this.props.onCommentSubmit(za,event);},_insertEmoticonIntoCommentText:function(ya){i.loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],function(za,ab,bb,cb){var db=za.symbols[ya];if(!db)return;if(this.props.contextArgs.mentionsinput){this.refs.mentionsinput.insertEmoticon(db);return;}if(!this._selectionPosition)this._selectionPosition=new cb(y.findDOMNode(this.refs.mentionsinput.refs.textarea));var eb=this.refs.mentionsinput.refs.getTextFieldDOM(),fb=bb.getInstance(eb),gb=fb.getValue(),hb=ab.insertEmoticon(db,gb,this._selectionPosition.getPos());fb.setValue(hb.result);this._selectionPosition.setPos(hb.start,hb.end);}.bind(this));},_hideStickerNUX:function(){this.setState({stickerNUXVisible:false});}});e.exports=xa;},null);
__d("UFIAddCommentController",["Arbiter","MentionsInputUtils","Parent","UFIAddComment.react","React","ShortProfiles","UFICentralUpdates","UFIComments","UFIFeedbackTargets","UFIInstanceState","UFIUIEvents","UFIUserActions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();function s(t,u,v,w){this.id=u;this._ufiInstanceID=w.instanceid;this._contextArgs=w;this._replyCommentID=v;if(t){this.root=t;if(!this._contextArgs.rootid)this._contextArgs.rootid=t.id;this.render();m.subscribe('instance-updated',function(x,y){var z=y.updates;if(this._ufiInstanceID in z)this.render();}.bind(this));m.subscribe('feedback-updated',function(x,y){var z=y.updates;if(this.id in z)this.render();}.bind(this));}m.subscribe('feedback-id-changed',function(x,y){var z=y.updates;if(this.id in z)this.id=z[this.id];}.bind(this));}Object.assign(s.prototype,{_onCommentSubmit:function(t,event){r.addComment(this.id,t.visibleValue,t.encodedValue,{source:this._contextArgs.source,ufiinstanceid:this._ufiInstanceID,target:event.target,replyid:this._replyCommentID,timelinelogdata:this._contextArgs.timelinelogdata,rootid:this._contextArgs.rootid,attachedphoto:this._contextArgs.attachedphoto,attachedsticker:this._contextArgs.attachedsticker,giftoccasion:this._contextArgs.giftoccasion,feedcontext:this._contextArgs.feedcontext});this._contextArgs.attachedphoto=null;this._contextArgs.attachedsticker=null;o.getFeedbackTarget(this.id,function(u){var v=i.byTag(this.root,'form');if(v)g.inform('ufi/comment',{form:v,isranked:u.isranked});if(u.showtopicconversationcreationpivot)g.inform(q.UFIActionAddComment,{feedback:u,target:event.target});}.bind(this));return false;},_onTypingStateChange:function(t,u){r.typingChange(this.id,u);},renderAddComment:function(t,u,v,w,x,y,z,aa,ba,ca){var da=this._contextArgs.logtyping?this._onTypingStateChange.bind(this):null,ea=null,fa=p.getKeyForInstance(this._ufiInstanceID,'isediting')&&!this._replyCommentID;o.getFeedbackTarget(this.id,function(ga){this._contextArgs.feedbackisranked=ga.isranked;}.bind(this));return (k.createElement(j,{hide:fa,replyCommentID:this._replyCommentID,viewerActor:t,targetID:u,initialData:ea,ref:x,withoutSeparator:y,onCommentSubmit:this._onCommentSubmit.bind(this),mentionsDataSource:v,onTypingStateChange:da,showSendOnEnterTip:w,allowPhotoAttachments:aa,allowStickerAttachments:ba,source:this._contextArgs.source,contextArgs:this._contextArgs,subtitle:z,isQAndA:ca,isSnowlift:this._contextArgs.issnowlift,feedbackIsRanked:this._contextArgs.feedbackisranked}));},renderEditComment:function(t,u,v,w,x,y,z,aa,ba){var ca=n.getComment(v),da;if(ca.attachment)da=ca.attachment.type=='sticker'?ca.attachment:null;var ea=h.generateDataFromTextWithEntities(ca.body);return (k.createElement(j,{viewerActor:t,targetID:u,initialData:ea,onCommentSubmit:x,onCancel:y,mentionsDataSource:w,source:this._contextArgs.source,contextArgs:this._contextArgs,isEditing:true,editingCommentID:v,attachedPhoto:ca.photo_comment,attachedSticker:da,allowPhotoAttachments:z,allowStickerAttachments:aa,isQAndA:ba}));},render:function(){if(!this.root)throw new Error('render called on UFIAddCommentController with no root');o.getFeedbackTarget(this.id,function(t){if(t.cancomment&&t.actorforpost)l.get(t.actorforpost,function(u){var v=this.renderAddComment(u,t.ownerid,t.mentionsdatasource,t.showsendonentertip,null,null,t.subtitle,t.allowphotoattachments,t.allowstickerattachments,t.isqanda);this._addComment=k.render(v,this.root);}.bind(this));}.bind(this));}});e.exports=s;},null);
__d("UFIAddCommentLink.react",["React","UFIClassNames","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=g.createClass({displayName:"UFIAddCommentLink",propTypes:{'data-ft':m.string,isFirstCommentComponent:m.bool,isFirstComponent:m.bool,isLastCommentComponent:m.bool,isLastComponent:m.bool,isQAndA:m.bool,onClick:m.func},render:function(){var o=k(h.ROW,(("UFIAddCommentLink")+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),p;if(this.props.isQAndA){p=j._("Ask a question...");}else p=j._("Write a comment...");return (g.createElement("li",{className:o,"data-ft":this.props['data-ft']},g.createElement("a",{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},p)));}});e.exports=n;},null);
__d("UFICommentLikeCount.react",["NumberFormat","ProfileBrowserLink","ProfileBrowserTypes","React","URI","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=function(q,r){var s=new k('/ajax/like/tooltip.php').setQueryData({comment_fbid:q.fbid,comment_from:q.author,comment_likecount:q.likecount||0,comment_id:q.id,cache_buster:q.likeconfirmhash||0});if(r)s.addQueryData({viewas:r});return s;},p=j.createClass({displayName:"UFICommentLikeCount",propTypes:{comment:n.object.isRequired,contextArgs:n.object.isRequired},render:function(){var q=this.props.comment,r=g.formatIntegerWithDelimiter(q.likecount||0,this.props.contextArgs.numberdelimiter),s=i.LIKES,t={id:q.fbid},u=o(this.props.comment,this.props.contextArgs.viewas),v=j.createElement("i",{className:"UFICommentLikeIcon"}),w=j.createElement("span",null,r),x=(("UFICommentLikeButton")+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":''));return (j.createElement("a",{ajaxify:h.constructDialogURI(s,t).toString(),className:x,"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-uri":u.toString(),href:h.constructPageURI(s,t).toString(),rel:"dialog",role:"button"},v,w));}});e.exports=p;},null);
__d("UFIReplyLink.react",["React","fbt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=g,j=i.PropTypes,k=g.createClass({displayName:"UFIReplyLink",propTypes:{onClick:j.func},render:function(){return (g.createElement("a",{className:"UFIReplyLink",href:"#",onClick:this.props.onClick},h._("Reply")));}});e.exports=k;},null);
__d("UFISpamCount",["UFISpamCountImpl"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b('UFISpamCountImpl').module||{enabled:false};},null);
__d("UFICommentAttachment.react",["DOM","HTML","LitestandShareAttachment","React","Sticker.react"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j,m=l.PropTypes,n=80,o='ufi_comment_sticker',p=j.createClass({displayName:"UFICommentAttachment",propTypes:{comment:m.object.isRequired},_attachmentFromCommentData:function(q){return q.photo_comment||q.attachment;},_getScaledDimensions:function(q,r){var s,t,u;if(r>q){u=n/r;s=q*u;t=r*u;}else{u=n/q;s=q*u;t=r*u;}return {height:Math.round(s),width:Math.round(t)};},componentDidMount:function(){var q=this._attachmentFromCommentData(this.props.comment);if(q)this.renderAttachment(q);},shouldComponentUpdate:function(q,r){var s=this._attachmentFromCommentData(this.props.comment),t=this._attachmentFromCommentData(q.comment);if(!s&&!t)return false;if(!s||!t||s.markup!=t.markup){return true;}else return false;},componentDidUpdate:function(q){var r=this._attachmentFromCommentData(this.props.comment);if(r.type!=='sticker')this.renderAttachment(r);},renderAttachment:function(q){if(q&&this.refs&&this.refs.contents&&q.markup){var r=q.markup;if(h.isHTML(r.markup))r=h.replaceJSONWrapper(r.markup).getRootNode();var s=r.parentNode,t=j.findDOMNode(this.refs.contents);if(s&&s!==t)r=r.cloneNode(true);g.setContent(t,r);if(q.type=="share")i.init(t);}},renderSticker:function(q){var r=this._getScaledDimensions(q.metadata.height,q.metadata.width),s=null,t=null;if(window.devicePixelRatio&&window.devicePixelRatio>1&&q.metadata.source_uri_2x){s=q.metadata.sprite_uri_2x;t=q.metadata.source_uri_2x;}else{s=q.metadata.sprite_uri;t=q.metadata.source_uri;}return (j.createElement(k,{animationTrigger:"load_and_hover",frameCount:q.metadata.frameCount,frameRate:q.metadata.frameRate,framesPerCol:q.metadata.framesPerCol,framesPerRow:q.metadata.framesPerRow,spriteURI:s,sourceHeight:r.height,sourceURI:t,sourceWidth:r.width,testID:o}));},render:function(){var q=this._attachmentFromCommentData(this.props.comment);if(q)if(q&&q.type==='sticker'){return this.renderSticker(q);}else return j.createElement("div",{ref:"contents"});return j.createElement("span",null);}});e.exports=p;},null);
__d("UFISocialContext.react",["HovercardLink","ProfileBrowserLink","ProfileBrowserTypes","React","URI","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=27,p=j.createClass({displayName:"UFISocialContext",propTypes:{commentAuthor:n.object.isRequired,otherMutualCount:n.number.isRequired,topMutualFriend:n.object.isRequired},render:function(){var q=this.props.topMutualFriend,r=this.props.otherMutualCount,s=this.props.commentAuthor,t=g.constructEndpoint(q).toString(),u=j.createElement("a",{href:q.uri,"data-hovercard":t,key:"top"},q.name),v=s.name.length+q.name.length,w;if(r===0){w=l._("Friends with {name}",[l.param("name",u)]);}else if(v<o){var x;if(r==1){x=l._("1 other");}else x=l._({"*":"{count} others"},[l.param("count",r,[0])]);w=l._("Friends with {name} and {others}",[l.param("name",u),l.param("others",this.getOthersLink(x,s,q))]);}else{var y=l._({"*":"{count} mutual friends"},[l.param("count",r+1,[0])]);w=this.getOthersLink(y,s);}return (j.createElement("span",{className:"UFICommentSocialContext"},w));},getOthersLink:function(q,r,s){var t=i.MUTUAL_FRIENDS,u={uid:r.id},v=new k('/ajax/mutual_friends/tooltip.php').setQueryData({friend_id:r.id});if(s)v.addQueryData({exclude_id:s.id});var w=h.constructDialogURI(t,u).toString();return (j.createElement("a",{ajaxify:w,"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-uri":v.toString(),href:h.constructPageURI(t,u).toString(),key:"others",rel:"dialog"},q));}});e.exports=p;},null);
__d("UFICommentAuthorName.react",["Badge.react","React","TrackingNodes","UFIActor.react","UFISocialContext.react"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"UFICommentAuthorName",propTypes:{author:m.object.isRequired,authorProfiles:m.object.isRequired,showHovercard:m.bool,isAuthorWeakReference:m.bool,focusOnMount:m.bool,groupOrEventID:m.number,isFeatured:m.bool,socialContext:m.object,useFirstName:m.bool},render:function(){var o=this.props,p=o.author,q=i.getTrackingInfo(i.types.USER_NAME);return (h.createElement(j,{author:p,showHovercard:o.showHovercard,key:"author",focusOnMount:o.focusOnMount,"data-ft":q,isAuthorWeakReference:o.isAuthorWeakReference,groupOrEventID:o.groupOrEventID,useFirstName:o.useFirstName},o.isFeatured?h.createElement(g,{key:"badge",size:"xsmall",type:"verified"}):null,o.socialContext?h.createElement(k,{topMutualFriend:o.authorProfiles[o.socialContext.topmutualid],otherMutualCount:o.socialContext.othermutualcount,commentAuthor:p}):null));}});e.exports=n;},null);
__d("XUIEditButton.react",["XUIAbstractGlyphButton.react","React","cx","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h.createClass({displayName:"XUIEditButton",render:function(){var m=this.props.label,n=this.props.title;if(!this.props.title&&!this.props.tooltip){if(!m)m=j._("Edit");n=m;}return (h.createElement(g,h.__spread({},this.props,{label:m,title:n,"aria-label":this.props.tooltip,"data-hover":this.props.tooltip&&'tooltip',"data-tooltip-alignh":this.props.tooltip&&'center',className:k(this.props.className,"_5upq _5upr")})));}});e.exports=l;},null);
__d("UFICommentMenu.react",["Bootloader","React","XUICloseButton.react","XUIEditButton.react","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n,o,p,q,r=k({EDIT:true,CLOSE:true}),s=h.createClass({displayName:"UFICommentMenu",propTypes:{menuData:m.array,menuType:m.oneOf(Object.keys(r)).isRequired,onAction:m.func,onClick:m.func},getInitialState:function(){return {bootloading:false,bootloaded:false,needsExpand:false};},onClickGuard:function(event){if(this.state.bootloading){return;}else if(!this.state.bootloaded&&this.props.menuData){this.setState({bootloading:true});g.loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu"],function(t,u,v){n=t,o=u;p=v;q=p.Item;this.setState({bootloading:false,bootloaded:true,needsExpand:true});}.bind(this));}else if(this.props.onClick)this.props.onClick(event);},shouldComponentUpdate:function(t,u,v){if(this.state.needsExpand&&!u.needsExpand)return false;return true;},render:function(){var t=null;if(this.props.menuType===r.EDIT){t=j;}else t=i;if(this.props.menuData&&this.state.bootloaded){var u=this.props.menuData.map(function(w){return (h.createElement(q,{"data-testid":w.testid,key:w.value,value:w.value},w.label));}),v=h.createElement(p,{onItemClick:this.props.onAction},u);return (h.createElement(o,h.__spread({},this.props,{alignh:"right",layerBehaviors:[n],menu:v,ref:"menu"}),h.createElement(t,{href:"#",onClick:this.onClickGuard})));}return h.createElement(t,h.__spread({},this.props,{href:"#",onClick:this.onClickGuard}));},componentDidUpdate:function(){if(this.state.needsExpand){this.refs.menu.showPopover();this.setState({needsExpand:false});}}});s.MenuType=r;e.exports=s;},null);
__d("UFIComment.react",["Bootloader","HovercardLink","React","TrackingNodes","TextWithEntities.react","UFIClassNames","UFICommentActions.react","UFICommentAttachment.react","UFICommentAuthorName.react","UFICommentBody.react","UFICommentMenu.react","UFICommentUtils.react","UFIConfig","UFIConstants","UFIImageBlock.react","UFITranslationConstants","URI","XUICloseButton.react","cx","joinClasses","keyMirror","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){b.__markCompiled&&b.__markCompiled();'use strict';var ca=i,da=ca.PropTypes,ea=t.UFIStatus,fa=aa({edit:true,hide:true,remove:true}),ga='ufi_comment_close_button',ha='ufi_comment_menu_delete',ia='ufi_comment_menu_edit',ja='ufi_comment_menu_hide',ka="UFITranslateLink",la="UFITranslatedText",ma="UFITranslationErrorText",na="UFITranslateAttribution",oa="fcg",pa=null,qa=function(ta){var ua=ta.status;return ua===ea.FAILED_ADD||ua===ea.FAILED_EDIT;};function ra(ta){return ta.commenterIsFOF!==undefined&&ta.userIsMinor!==undefined&&ta.reportLink!==undefined;}var sa=i.createClass({displayName:"UFIComment",propTypes:{authorProfiles:da.object.isRequired,comment:da.object.isRequired,contextArgs:da.object.isRequired,feedback:da.object.isRequired,'data-ft':da.string,focusOnMount:da.bool,hasPartialBorder:da.bool,hideAsSpamForPageAdmin:da.bool,isFeatured:da.bool,isFirst:da.bool,isFirstCommentComponent:da.bool,isFirstComponent:da.bool,isLast:da.bool,isLastCommentComponent:da.bool,isLastComponent:da.bool,isLocallyComposed:da.bool,isReply:da.bool,onBlingBoxClick:da.func,onCommentLikeToggle:da.func,onCommentReply:da.func,onCommentTranslate:da.func,onEdit:da.func,onHideAsSpam:da.func,onInlineBan:da.func,onMarkAsNotSpam:da.func,onPreviewRemove:da.func,onRemove:da.func,onRetrySubmit:da.func,onUndoInlineBan:da.func,permalink:da.string,shortenTimestamp:da.bool,showPermalink:da.bool,showRemoveReportMenu:da.bool,showReplyLink:da.bool,viewerIsAuthor:da.bool},getInitialState:function(){return {isHighlighting:this.props.comment.highlightcomment,wasHighlighted:this.props.comment.highlightcomment,markedAsSpamHere:false,isInlinePageDeleted:false,isInlineBanned:false};},_onHideAsSpam:function(event){this.props.onHideAsSpam(event);this.setState({markedAsSpamHere:true});},_onMarkAsNotSpam:function(event){this.props.onMarkAsNotSpam(event);this.setState({markedAsSpamHere:false});},_onDeleteSpam:function(event){this.props.onRemove(event,this);},_onInlineBan:function(event){this.props.onInlineBan(event);this.setState({isInlineBanned:true});},_onUndoInlineBan:function(event){this.props.onUndoInlineBan(event);this.setState({isInlineBanned:false});},_onAction:function(event,ta){var ua=ta.item,va=ua.getValue();setTimeout(function(){if(va===fa.remove){this.props.onRemove(event);}else if(va===fa.edit){this.props.onEdit(event);}else if(va===fa.hide)this._onHideAsSpam(event);}.bind(this),0);},_createRemoveReportMenuData:function(){return [{testid:ha,value:fa.remove,label:ba._("Delete Comment...")},{testid:ja,value:fa.hide,label:ba._("Hide Comment")}];},_createEditDeleteMenuData:function(){return [{testid:ia,value:fa.edit,label:ba._("Edit...")},{testid:ha,value:fa.remove,label:ba._("Delete...")}];},_renderCloseButton:function(){var ta=this.props.comment,ua=this.props.feedback,va=null,wa=null,xa=null,ya=false;if(ta.canremove&&!this.props.hideAsSpamForPageAdmin){if(this.props.viewerIsAuthor){if(ta.canedit){xa=ba._("Edit or Delete");wa=this._createEditDeleteMenuData();ya=true;}else{xa=ba._("Remove");va=this.props.onRemove;}}else if(ua.canremoveall)if(this.props.showRemoveReportMenu){xa=ba._("Remove or Report");wa=this._createRemoveReportMenuData();}else{xa=ba._("Remove");va=this.props.onRemove;}}else if(ta.canreport){xa=ba._("Hide");va=this._onHideAsSpam;}var za=(("UFICommentCloseButton")+(va===null&&wa===null?' '+"hdn":'')),ab=null,bb=null;if(this.props.contextArgs.viewas){ab="/ajax/profile/link_disabled_in_viewas.php";bb="dialog";va=null;}var cb=ya?q.MenuType.EDIT:q.MenuType.CLOSE;return (i.createElement(q,{ajaxify:ab,className:za,"data-testid":ga,onClick:va,rel:bb,tooltip:xa,menuData:wa,menuType:cb,onAction:this._onAction}));},_renderFakeCloseButton:function(){return (i.createElement(x,{className:"UFICommentCloseButtonFake",tabIndex:"-1"}));},componentDidMount:function(){if(this.state.isHighlighting){var ta=i.findDOMNode(this),ua=parseInt(this.props.comment.scrolltopoffset||0,10);g.loadModules(["UFIScrollHighlight"],function(va){setTimeout(va.actOn.bind(null,ta,ua),0);});this.setState({isHighlighting:false});}},shouldComponentUpdate:function(ta,ua){var va=this.props,wa=this.state;return (ta.comment!==va.comment||ta.showReplyLink!==va.showReplyLink||ta.isFirst!==va.isFirst||ta.isLast!==va.isLast||ta.isFirstCommentComponent!==va.isFirstCommentComponent||ta.isLastCommentComponent!==va.isLastCommentComponent||ta.isFirstComponent!==va.isFirstComponent||ta.isLastComponent!==va.isLastComponent||ta.isFeatured!==va.isFeatured||ta.hasPartialBorder!==va.hasPartialBorder||ua.wasHighlighted!==wa.wasHighlighted||ua.isHighlighting!==wa.isHighlighting||ua.markedAsSpamHere!==wa.markedAsSpamHere||ua.isInlinePageDeleted!==wa.isInlinePageDeleted||ua.isInlineBanned!==wa.isInlineBanned);},render:function(){var ta=this.props.comment,ua=this.props.feedback,va=ta.status===ea.DELETED,wa=ta.status===ea.LIVE_DELETED,xa=ta.status===ea.SPAM_DISPLAY,ya=this.state.markedAsSpamHere,za=this.state.isInlinePageDeleted,ab=this.props.hideAsSpamForPageAdmin,bb=this.state.isInlineBanned,cb=ra(ta),db=!ta.status&&(ta.isunseen||ta.islocal);if(!ta.status&&ua.lastseentime){var eb=ta.originalTimestamp||ta.timestamp.time;db=db||eb>ua.lastseentime;}var fb=this.props.contextArgs.markedcomments;if(fb&&fb[ta.legacyid])db=true;var gb=((this.props.isFirst?"UFIFirstComment":'')+(this.props.isLast?' '+"UFILastComment":'')+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''));if(cb)if(pa){var hb,ib=null,jb=null,kb=null;if(ab){jb=bb?this._onUndoInlineBan:this._onInlineBan;if(za){hb=ba._("You've deleted this comment so no one can see it.");}else if(ya){hb=ba._("Now this is only visible to the person who wrote it and their friends.");kb=this._onDeleteSpam;ib=this._onMarkAsNotSpam;}}else if(ya){hb=ba._("This comment has been hidden.");kb=this._onDeleteSpam;ib=this._onMarkAsNotSpam;}if(hb)return (i.createElement("li",{className:z(l.ROW,gb,"UFIHide")},i.createElement(pa,{notice:hb,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:ib,onBanAction:jb,onDeleteAction:kb,isInlineBanned:bb,isInlinePageDeleted:za,hideAsSpamForPageAdmin:ab,pageID:this.props.feedback.ownerid})));}else g.loadModules(["UFICommentRemovalControls.react"],function(ob){pa=ob;setTimeout(function(){this.forceUpdate();}.bind(this));}.bind(this));var lb=!va,mb=z(l.ROW,gb,(("UFIComment")+(qa(ta)?' '+"UFICommentFailed":'')+(va||wa||xa?' '+"UFITranslucentComment":'')+(this.state.isHighlighting?' '+"highlightComment":'')+(!lb?' '+"noDisplay":'')+(lb?' '+"display":'')+(' '+"UFIComponent")+(this.props.hasPartialBorder?' '+"UFIPartialBorder":''))),nb=this.renderComment();if(db)mb=z(mb,l.UNSEEN_ITEM);return (i.createElement("li",{className:mb,"data-ft":this.props['data-ft']},nb));},renderComment:function(){var ta=this.props,ua=ta.comment,va=ua.body.text,wa=r.shallowCopyRanges(ua.body.ranges),xa=ta.permalink,ya=ta.feedback,za=ta.authorProfiles[ua.author],ab=ua.status===ea.SPAM_DISPLAY,bb=ua.status===ea.LIVE_DELETED,cb=!(ab||bb),db=ya.canremoveall||ua.hiddenbyviewer;va=r.getCommentTextWithTruncatedURIs(wa,va);var eb=null,fb=null;if(!ta.isLocallyComposed&&!this.state.wasHighlighted){fb=t.commentTruncationLength;eb=t.commentTruncationMaxLines;}var gb=j.getTrackingInfo(j.types.SMALL_ACTOR_PHOTO),hb=j.getTrackingInfo(j.types.USER_MESSAGE),ib=null,jb=null,kb=null,lb=null;if(ua.istranslatable&&(ua.translatedbody===undefined))ib=i.createElement("a",{href:"#",role:"button",title:ba._("Translate this comment"),className:ka,onClick:ta.onCommentTranslate},ba._("See Translation"));if(ua.translatedbody!==undefined)if(ua.translatedbody!==null&&ua.translatedbody.text!==''){var mb=v.BING_PAGE_URL,nb=v.BING_TRANSLATOR_APP,ob=null;if(ua.translatorapp===nb){var pb=new w(mb).addQueryData({text:va});ob=i.createElement("a",{href:pb.toString(),target:"_blank",className:oa},ba._("Translated by Bing"));}else ob=ba._("Automatically Translated");lb=i.createElement("span",{className:na},ob);var qb=r.shallowCopyRanges(ua.translatedbody.ranges),rb=ua.translatedbody.text,sb=ua.translatedbody.dir,tb=i.createElement("span",{key:"comment-body","data-ft":hb,dir:sb},i.createElement(k,{className:(("UFICommentBody")+(this.props.contextArgs.useWhitespacesRender?' '+"UFICommentBodyPreserveWhitespace":'')),interpolator:r.getCommentBodyInterpolator(ta.feedback.grouporeventid),ranges:qb,text:rb,renderEmoticons:s.renderEmoticons,renderEmoji:s.renderEmoji}));jb=i.createElement("span",{className:la},tb);}else kb=i.createElement("span",{className:ma},ba._("No Translation Available"));var ub=i.createElement(p,{socialContext:ua.socialcontext,commentText:va,commentRanges:wa,groupOrEventID:ya.grouporeventid,useWhitespacesRender:this.props.contextArgs.useWhitespacesRender,maxLength:fb,maxLines:eb}),vb=ta.contextArgs.viewas?null:h.constructEndpointWithGroupAndLocation(za,ya.grouporeventid,'ufi',ua.isauthorweakreference).toString(),wb=i.createElement(o,{author:za,authorProfiles:ta.authorProfiles,showHovercard:!!vb,isAuthorWeakReference:ua.isauthorweakreference,focusOnMount:ta.focusOnMount,groupOrEventID:ya.grouporeventid,isFeatured:ta.isFeatured,socialContext:ua.socialcontext}),xb=null;if(ua.photo_comment_status)xb=i.createElement("div",{className:"_50f8"},ua.photo_comment_status);var yb=null;if(ua.sticker_attachment_status)yb=i.createElement("div",{className:"_50f8"},ua.sticker_attachment_status);var zb=null;if(ua.status!==ea.DELETED)zb=i.createElement(n,{comment:ta.comment});return (i.createElement(u,{spacing:"medium"},i.createElement("a",{href:za.uri,"data-hovercard":vb,"data-ft":gb},i.createElement("img",{src:za.thumbSrc,className:l.ACTOR_IMAGE,alt:""})),i.createElement("div",{className:"UFICommentContentBlock"},i.createElement("div",{className:"UFICommentContent"},wb,ub,ib,jb,lb,kb,zb),xb,yb,i.createElement(m,{comment:ua,feedback:ya,onBlingBoxClick:ta.onBlingBoxClick,onCommentLikeToggle:ta.onCommentLikeToggle,onCommentReply:ta.onCommentReply,onPreviewRemove:ta.onPreviewRemove,onRetrySubmit:ta.onRetrySubmit,onMarkAsNotSpam:this._onMarkAsNotSpam,permalink:xa,viewerCanMarkNotSpam:db,shortenTimestamp:ta.shortenTimestamp,showPermalink:ta.showPermalink,showReplyLink:ta.showReplyLink,contextArgs:ta.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:ta.hideAsSpamForPageAdmin}),cb?this._renderCloseButton():null),cb?this._renderFakeCloseButton():null));}});e.exports=sa;},null);
__d("UFIContainer.react",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g.createClass({displayName:"UFIContainer",render:function(){var j=null;if(this.props.hasNub)j=g.createElement("li",{className:"UFIArrow"},g.createElement("i",null));var k=((!this.props.isReplyList?"UFIList":'')+(this.props.isReplyList?' '+"UFIReplyList":'')+(this.props.isParentLiveDeleted?' '+"UFITranslucentReplyList":'')+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''));return (g.createElement("ul",{className:k},j,this.props.children));}});e.exports=i;},null);
__d("UFIInlineShareConfirmation.react",["React","UFIClassNames","UFIImageBlock.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=[m.object,m.string],o=g.createClass({displayName:"UFIInlineShareConfirmation",propTypes:{isError:m.bool.isRequired,isFirstComponent:m.bool,isLastComponent:m.bool,message:m.oneOfType(n).isRequired},render:function(){var p=k(h.ROW,(("UFIInlineShareConfirmation")+(this.props.isError?' '+"UFIInlineShareError":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":'')));return (g.createElement("li",{className:p},g.createElement(i,null,g.createElement("i",{className:"UFIConfirmationIcon"}),this._getText())));},_getText:function(){if(this.props.message.__html)return g.createElement("span",{dangerouslySetInnerHTML:this.props.message});return g.createElement("span",null,this.props.message);}});e.exports=o;},null);
__d("UFILikeSentenceText.react",["ActorURI","HovercardLinkInterpolator","ProfileBrowserLink","ProfileBrowserTypes","React","TextWithEntities.react","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=k,o=n.PropTypes;function p(r,s,t,u){if(u.count!=null){var v=j.LIKES,w={id:r.targetfbid,actorid:r.actorid},x=[],y;for(var z=0;z<s.length;z++)if(!s[z].count){y=s[z];var aa=y.entity;x.push(aa.id);}var ba=new m('/ajax/like/tooltip.php').setQueryData({comment_fbid:r.targetfbid,comment_from:r.actorforpost,seen_user_fbids:x.length?x:true});ba=g.create(ba,r.actorforpost);return (k.createElement("a",{"data-testid":"n_other_people_link",className:"UFINoWrap",rel:"dialog",ajaxify:i.constructDialogURI(v,w).toString(),href:i.constructPageURI(v,w).toString(),"data-hover":"tooltip","data-tooltip-alignh":"center","data-tooltip-uri":ba.toString(),role:"button"},t));}else return h(t,u,null,null,'ufi');}var q=k.createClass({displayName:"UFILikeSentenceText",propTypes:{contextArgs:o.object.isRequired,feedback:o.object.isRequired,likeSentenceData:o.object.isRequired},render:function(){var r=this.props.feedback,s=this.props.likeSentenceData,t;t=p;t=t.bind(null,r,s.ranges);return (k.createElement(l,{interpolator:t,ranges:s.ranges,aggregatedRanges:s.aggregatedranges,text:s.text}));}});e.exports=q;},null);
__d("UFILikeSentence.react",["Bootloader","LeftRight.react","ProfileBrowserLink","ProfileBrowserTypes","React","UFIClassNames","UFIImageBlock.react","UFILikeSentenceText.react","URI","cx","joinClasses","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=k,t=s.PropTypes,u=k.createClass({displayName:"UFILikeSentence",propTypes:{contextArgs:t.object.isRequired,feedback:t.object.isRequired,isFirstComponent:t.bool,isLastComponent:t.bool,onOrderingModeChange:t.func,onTargetLikeToggle:t.func,orderingMode:t.string,showOrderingModeSelector:t.bool},getInitialState:function(){return {selectorModule:null,bootloadedSelectorModule:false};},componentWillMount:function(){this._bootloadSelectorModule(this.props);},componentWillReceiveProps:function(v){this._bootloadSelectorModule(v);},_bootloadSelectorModule:function(v){if(v.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){var w=function(x){this.setState({selectorModule:x});}.bind(this);if(v.contextArgs.entstream){g.loadModules(["UFIEntStreamOrderingModeSelector.react"],w);}else g.loadModules(["UFIOrderingModeSelector.react"],w);this.setState({bootloadedSelectorModule:true});}},render:function(){var v=this.props.feedback,w=v.likesentences.current,x=this.props.contextArgs.entstream,y=q(l.ROW,v.likesentences.isunseen?l.UNSEEN_ITEM:'',(("UFILikeSentence")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),z=null,aa=null;if(w.text)aa=k.createElement("div",{className:"UFILikeSentenceText"},k.createElement(n,{contextArgs:this.props.contextArgs,feedback:v,likeSentenceData:w}));var ba=this.props.contextArgs.ufiexperiments||{};if(aa&&!x&&!ba.showRevisedUFI&&!ba.showSlimUFI){z=k.createElement("i",{className:"UFILikeIcon"});if(v.viewercanlike&&!v.hasviewerliked)z=k.createElement("a",{className:"UFILikeThumb",href:"#",tabIndex:"-1",title:r._("Like this"),onClick:this.props.onTargetLikeToggle,role:"button","aria-label":r._("Like this")},z);}var ca=aa,da=null;if(v.seencount>0&&!x){var ea=j.GROUP_MESSAGE_VIEWERS,fa={id:v.targetfbid},ga=i.constructDialogURI(ea,fa),ha=i.constructPageURI(ea,fa),ia=new o('/ajax/ufi/seen_tooltip.php').setQueryData({ft_ent_identifier:v.entidentifier,displayed_count:v.seencount}),ja;if(v.seenbyall){ja=r._("Seen by everyone");}else ja=v.seencount==1?r._("Seen by 1"):r._("Seen by {count}",[r.param("count",v.seencount)]);da=k.createElement("a",{rel:"dialog",ajaxify:ga.toString(),href:ha.toString(),"data-hover":"tooltip","data-tooltip-alignh":"left","data-tooltip-uri":ia.toString(),className:(("UFISeenCount")+(!!w.text?' '+"UFISeenCountRight":''))},k.createElement("span",{className:"UFISeenCountIcon"}),ja);}else if(this.props.showOrderingModeSelector&&this.state.selectorModule){var ka=this.state.selectorModule;da=k.createElement(ka,{entstream:x,orderingmodes:v.orderingmodes,onOrderChanged:this.props.onOrderingModeChange});if(!ca)ca=k.createElement("div",null);}var la=null;if(z&&aa){la=k.createElement(m,null,z,aa,da);}else if(ca){la=k.createElement(h,{direction:h.DIRECTION.right},ca,da);}else la=da;return (k.createElement("li",{className:y},la));}});e.exports=u;},null);
__d("UFIPager.react",["LeftRight.react","React","UFIClassNames","UFIImageBlock.react","XUISpinner.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=h,o=n.PropTypes,p=h.createClass({displayName:"UFIPager",propTypes:{contextArgs:o.object.isRequired,pagerLabel:o.string.isRequired,'data-ft':o.string,countSentence:o.string,isFirstCommentComponent:o.bool,isFirstComponent:o.bool,isLastCommentComponent:o.bool,isLastComponent:o.bool,isLoading:o.bool,isReply:o.bool,isUnseen:o.bool,onPagerClick:o.func},onPagerClick:function(q){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();q.nativeEvent.prevent();},render:function(){var q=this.onPagerClick,r=m(i.ROW,this.props.isUnseen?i.UNSEEN_ITEM:'',(("UFIPagerRow")+(' '+"UFIComponent")+(this.props.isFirstCommentComponent?' '+"UFIFirstCommentComponent":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),s=null;if(this.props.isLoading)s=h.createElement(k,{className:"mls",background:"light",size:"small"});var t=h.createElement("a",{className:"UFIPagerLink",onClick:q,href:"#",role:"button"},this.props.pagerLabel,s),u=(("fcg")+(' '+"UFIPagerCount")),v=h.createElement("span",{className:u},this.props.countSentence),w,x=this.props.contextArgs.ufiexperiments||{};if(this.props.contextArgs.entstream||(x.showRevisedUFI&&!this.props.isReply)){w=(h.createElement(g,{direction:g.DIRECTION.right},t,v));}else w=(h.createElement(j,null,h.createElement("a",{className:"UFIPagerIcon",onClick:q,href:"#",role:"button"}),t,v));return (h.createElement("li",{className:r,"data-ft":this.props['data-ft']},w));}});e.exports=p;},null);
__d("UFIPagerLabel",["fbt","intlList","NumberFormat"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={VIEW_ONE:'view_one',VIEW_ONE_MORE:'view_one_more',VIEW_ALL:'view_all',VIEW_MORE_EXPLICIT:'view_more_explicit',VIEW_MORE:'view_more',VIEW_PREVIOUS:'view_previous',_getReplyLabel:function(k,l){var m;switch(k){case j.VIEW_ONE:return g._("View 1 reply");case j.VIEW_ONE_MORE:return g._("View 1 more reply");case j.VIEW_ALL:m=i.formatIntegerWithDelimiter(l.count,l.delimiter);return g._({"*":"View all {count} replies"},[g.param("count",m,[0,l.count])]);case j.VIEW_MORE_EXPLICIT:m=i.formatIntegerWithDelimiter(l.count,l.delimiter);return g._({"*":"View {count} more replies"},[g.param("count",m,[0,l.count])]);case j.VIEW_MORE:return g._("View more replies");case j.VIEW_PREVIOUS:return g._("View previous replies");default:return null;}},_getCommentLabel:function(k,l){if(l.commenters)return this._getCommentLabelWithCommentSentence(k,l);var m;switch(k){case j.VIEW_ONE:return g._("View 1 comment");case j.VIEW_ONE_MORE:return g._("View 1 more comment");case j.VIEW_ALL:m=i.formatIntegerWithDelimiter(l.count,l.delimiter);return g._({"*":"View all {count} comments"},[g.param("count",m,[0,l.count])]);case j.VIEW_MORE_EXPLICIT:m=i.formatIntegerWithDelimiter(l.count,l.delimiter);return g._({"*":"View {count} more comments"},[g.param("count",m,[0,l.count])]);case j.VIEW_MORE:return g._("View more comments");case j.VIEW_PREVIOUS:return g._("View previous comments");default:return null;}},_getCommentLabelWithCommentSentence:function(k,l){var m=h(l.commenters),n=l.othersCount,o=i.formatIntegerWithDelimiter(n,l.delimiter),p=i.formatIntegerWithDelimiter(l.count,l.delimiter);switch(k){case j.VIEW_ONE:return g._("View 1 comment from {names}",[g.param("names",m)]);case j.VIEW_ONE_MORE:return g._("View 1 more comment from {names}",[g.param("names",m)]);case j.VIEW_ALL:switch(n){case 0:return g._({"*":"View all {count} comments from {names}"},[g.param("count",p,[0,l.count]),g.param("names",m)]);case 1:return g._({"*":"View all {count} comments from {names} and 1 other person"},[g.param("count",p,[0,l.count]),g.param("names",m)]);default:return g._({"*":{"*":"View all {count} comments from {names} and {othersCount} others"}},[g.param("count",p,[0,l.count]),g.param("names",m),g.param("othersCount",o,[0,n])]);}break;case j.VIEW_MORE_EXPLICIT:case j.VIEW_MORE:switch(n){case 0:return g._("View more comments from {names}",[g.param("names",m)]);case 1:return g._("View more comments from {names} and 1 other person",[g.param("names",m)]);default:return g._({"*":"View more comments from {names} and {othersCount} others"},[g.param("names",m),g.param("othersCount",o,[0,n])]);}break;case j.VIEW_PREVIOUS:switch(n){case 0:return g._("View previous comments from {names}",[g.param("names",m)]);case 1:return g._("View previous comments from {names} and 1 other person",[g.param("names",m)]);default:return g._({"*":"View previous comments from {names} and {othersCount} others"},[g.param("names",m),g.param("othersCount",o,[0,n])]);}break;default:return null;}},_getQuestionLabel:function(k,l){var m;switch(k){case j.VIEW_ONE:return g._("View 1 question");case j.VIEW_ONE_MORE:return g._("View 1 more question");case j.VIEW_ALL:m=i.formatIntegerWithDelimiter(l.count,l.delimiter);return g._({"*":"View all {count} questions"},[g.param("count",m,[0,l.count])]);case j.VIEW_MORE_EXPLICIT:m=i.formatIntegerWithDelimiter(l.count,l.delimiter);return g._({"*":"View {count} more questions"},[g.param("count",m,[0,l.count])]);case j.VIEW_MORE:return g._("View more questions");case j.VIEW_PREVIOUS:return g._("View previous questions");default:return null;}},getLabel:function(k,l,m,n){if(l){return j._getReplyLabel(k,n);}else if(m){return j._getQuestionLabel(k,n);}else return j._getCommentLabel(k,n);}};e.exports=j;},null);
__d("UFIReplySocialSentence.react",["Badge.react","LiveTimer","React","Timestamp.react","UFIClassNames","UFIConstants","UFIImageBlock.react","cx","joinClasses","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=i,r=q.PropTypes,s=' \u00b7 ',t=43200,u=i.createClass({displayName:"UFIReplySocialSentence",propTypes:{author:r.object,'data-ft':r.string,isExpanded:r.bool,isFirstComponent:r.bool,isLastComponent:r.bool,isLoading:r.bool,onClick:r.func,orderingMode:r.string,replies:r.number,shortenTimestamp:r.bool,showVerified:r.bool,timestamp:r.object},render:function(){var v=((this.props.isLoading?"UFIReplySocialSentenceLoading":'')),w=o(k.ROW,(("UFIReplySocialSentenceRow")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),x,y;if(this.props.isExpanded){x=this.props.replies>1?p._({"*":"Hide {count} Replies"},[p.param("count",this.props.replies,[0])]):p._("Hide 1 Reply");}else{x=this.props.replies>1?p._({"*":"{count} Replies"},[p.param("count",this.props.replies,[0])]):p._("1 Reply");if(this.props.timestamp){var z=h.getApproximateServerTime()/1000-this.props.timestamp.time;if(z<t||this.props.orderingMode==l.UFICommentOrderingMode.RECENT_ACTIVITY)y=i.createElement("span",{className:"fcg"},s,i.createElement(j,{shorten:this.props.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose}));}}var aa=this.props.author,ba=aa&&!this.props.isExpanded,ca=null,da;if(ba){ca=i.createElement("img",{alt:"",src:aa.thumbSrc,className:k.ACTOR_IMAGE});var ea=null;if(this.props.showVerified)ea=i.createElement(g,{size:"xsmall",type:"verified"});da=[p._("{author}{verified_badge} replied",[p.param("author",aa.name),p.param("verified_badge",ea)]),s,x];}else da=x;var fa=null,ga=false;if(!ba||this.props.contextArgs.feedcarded){if(ba)ga=true;fa=i.createElement("i",{className:((!this.props.isExpanded?"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":'')+(ga?' '+"UFIFeedCardedIconWithActor":''))});}return (i.createElement("li",{className:w,"data-ft":this.props['data-ft']},i.createElement("a",{className:"UFICommentLink",onClick:this.props.onClick,href:"#",role:"button"},i.createElement(m,null,i.createElement("div",{className:((ba?"UFIReplyActorPhotoWrapper":'')+(ga?' '+"UFIFeedCardedReplyActor":''))},fa,ca),i.createElement("span",{className:v},i.createElement("span",{className:(("UFIReplySocialSentenceLinkText")+(this.props.showVerified?' '+"UFIReplySocialSentenceVerified":''))},da),y)))));}});e.exports=u;},null);
__d("UFIShareRow.react",["NumberFormat","React","UFIClassNames","UFIImageBlock.react","URI","cx","joinClasses","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=h,p=o.PropTypes,q=h.createClass({displayName:"UFIShareRow",propTypes:{contextArgs:p.object.isRequired,shareCount:p.number.isRequired,targetID:p.any.isRequired,isFirstComponent:p.bool,isLastComponent:p.bool},render:function(){var r=new k('/ajax/shares/view').setQueryData({target_fbid:this.props.targetID}),s=new k('/shares/view').setSubdomain('www').setQueryData({id:this.props.targetID}),t;if(this.props.shareCount>1){var u=g.formatIntegerWithDelimiter(this.props.shareCount,this.props.contextArgs.numberdelimiter||',');t=n._({"*":"{count} shares"},[n.param("count",u,[0,this.props.shareCount])]);}else t=n._("1 share");var v=m(i.ROW,(("UFIShareRow")+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''))),w=h.createElement("a",{className:"UFIShareLink",rel:"dialog",ajaxify:r.toString(),href:s.toString()},t),x=h.createElement(j,null,h.createElement("a",{className:"UFIShareIcon",rel:"dialog",ajaxify:r.toString(),href:s.toString()}),w),y=this.props.contextArgs.ufiexperiments||{};return (h.createElement("li",{className:v},y.showRevisedUFI||y.showSlimUFI?w:x));}});e.exports=q;},null);
__d("UFISpamPlaceholder.react",["React","UFIClassNames","XUISpinner.react","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m=g.createClass({displayName:"UFISpamPlaceholder",propTypes:{numHidden:l.number.isRequired,isLoading:l.bool,onClick:l.func},render:function(){if(this.props.isLoading)return (g.createElement("li",{className:h.ROW},g.createElement("span",{className:"UFISpamCommentWrapper"},g.createElement(i,{className:"mls",background:"light",size:"small"}))));return (g.createElement("li",{className:h.ROW},g.createElement("a",{href:"#",role:"button",className:"UFISpamCommentLink",onClick:this.props.onClick,"aria-label":j._("Show comments marked as spam")},g.createElement("span",{"data-hover":"tooltip","data-tooltip-alignh":"center","aria-label":j._({"*":"{count} hidden"},[j.param("count",this.props.numHidden,[0])]),className:"UFISpamCommentWrapper"},g.createElement("i",{className:"placeholderIcon"})))));}});e.exports=m;},null);
__d("UFI.react",["BootloadedComponent.react","Bootloader","CommentPrelude","DOMScroll","Event","LogHistory","NumberFormat","React","ReactFragment","ScrollableArea.react","ScrollAwareDOM","SearchableEntry","ShareNowConstants","TrackingNodes","UFIAddCommentController","UFIAddCommentLink.react","UFIComment.react","UFICommentOrdering","UFIConstants","UFIContainer.react","UFIInlineShareConfirmation.react","UFIInstanceState","UFILikeSentence.react","UFIPager.react","UFIPagerLabel","UFIReplySocialSentence.react","UFIShareRow.react","UFISpamPlaceholder.react","URI","Vector","XUISpinner.react","cx","getUnboundedScrollPosition","isEmpty","focusWithinLayer","throttle","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa){b.__markCompiled&&b.__markCompiled();'use strict';var ra={TOP:'top',BOTTOM:'bottom',ALL:'all'},sa=n.createClass({displayName:"UFI",getInitialState:function(){return {repliesExpandedMap:this.props.initialRepliesExpandMap?this.props.initialRepliesExpandMap:{},loadingSpamIDs:{},isActiveLoading:{},commentIDToFocusOnMount:null,replyComposerIDToFocusOnMount:null,hasPagedToplevel:false};},getDefaultProps:function(){return {inlineShare:{}};},componentDidMount:function(){this.suppressScrolls=0;this.scrollSubscription=q.subscribe('scroll',function(){if(this.suppressScrolls>0){this.suppressScrolls--;return false;}return true;}.bind(this));if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var ta=pa(this.loadMoreComments,20);this._scrollEventListener=k.listen(window,'scroll',ta);this._resizeEventListener=k.listen(window,'resize',ta);}var ua='replycomposer-'+this.props.feedback.permalinkcommentid;if(this.refs&&ua in this.refs)this.refs[ua].focus();},componentWillUnmount:function(){if(this.scrollSubscription){q.unsubscribe(this.scrollSubscription);this.scrollSubscription=null;}if(this._scrollEventListener)this._scrollEventListener.remove();if(this._resizeEventListener)this._resizeEventListener.remove();},componentWillReceiveProps:function(ta){var ua=Object.assign({},this.state.isActiveLoading),va;for(va in this.state.isActiveLoading){var wa=this.props.ranges[this.props.id],xa=ta.ranges[this.props.id],ya=this.props.availableComments.length,za=ta.availableComments.length;if(wa.getOffset()!=xa.getOffset()||ya!=za){var ab=(xa.getOffset()<wa.getOffset())?ya:0;if(ab<za)this.setState({commentIDToFocusOnMount:ta.availableComments[ab].id});}delete ua[va];}this.setState({isActiveLoading:ua});},componentDidUpdate:function(ta,ua,va){if(this.props.inlineShare.toggling){var wa=!ta.inlineShare.active&&!this.props.inlineShare.active;i.click(n.findDOMNode(this),wa);var xa=this.props.inlineShare.active;if(xa){var ya=!ta.inlineShare.loaded;setTimeout(function(){return this._focusInlineShare({shouldHighlight:ya});}.bind(this),10);}ba.updateStateField(this.props.instanceid,'inlineShare','toggling',false);}var za=this.state.replyComposerIDToFocusOnMount;if(this.refs&&za in this.refs){this.refs[za].focus();this.setState({replyComposerIDToFocusOnMount:null});}},componentWillUpdate:function(ta,ua,va){var wa,xa;for(wa in this.state.isActiveLoading){xa=this.state.isActiveLoading[wa];if(xa!==ra.TOP)this.suppressScrolls++;}},render:function(){var ta=this.props,ua=ta.feedback,va=ta.contextArgs,wa=ta.source!=y.UFIFeedbackSourceType.ADS,xa=null;if(ta.inlineShare.message)xa=n.createElement(aa,n.__spread({},this.props.inlineShare));var ya=!ta.hideOrderingModeSelector&&ua.orderingmodes&&ta.commentCounts[ta.id]>=y.minCommentsForOrderingModeSelector,za=(!na(ua.likesentences.current)||(ua.seencount>0&&!va.entstream)||ya)&&va.search!==true&&wa,ab=null;if(za)ab=n.createElement(ca,{contextArgs:va,feedback:ua,onTargetLikeToggle:ta.onTargetLikeToggle,onOrderingModeChange:ta.onOrderingModeChange,orderingMode:ta.orderingMode,showOrderingModeSelector:ya});var bb=null,cb=va.showshares&&ua.sharecount&&wa;if(cb&&!va.entstream)bb=n.createElement(ga,{targetID:ua.targetfbid,shareCount:ua.sharecount,contextArgs:va});if(ta.loadingComments){var db=n.createElement("div",{className:"UFICommentsLoadingSpinnerContainer"},n.createElement(ka,{size:"large",className:"UFICommentsLoadingSpinner"}));return (n.createElement(z,{hasNub:va.shownub&&lb},xa,ab,bb,db));}var eb=ta.availableComments&&ta.availableComments.length&&wa;va.hasComments=eb;var fb=null;if(eb)fb=this.renderCommentMap(ta.availableComments,ta.ranges[ta.id].getOffset());var gb=null,hb=ua.cancomment,ib=hb&&va.showaddcomment&&ua.actorforpost&&ta.canAddCommentMap[ta.id];if(ib){va.orderingmodes=ua.orderingmodes;var jb=new u(null,ta.id,null,va),kb=ta.authorProfiles[ua.actorforpost];gb=jb.renderAddComment(kb,ua.ownerid,ua.mentionsdatasource,ua.showsendonentertip,'toplevelcomposer',null,ua.subtitle,ua.allowphotoattachments,ua.allowstickerattachments,ua.isqanda);}var lb=za||cb||eb||hb,mb=ta.hideToplevelPager?{topPager:null,bottomPager:null}:this.renderPagers(ta.id,ta.ranges[ta.id].getOffset(),ta.ranges[ta.id].getLength()),nb=this.applyToUFIComponents([mb.topPager],fb,[mb.bottomPager],{isFirstCommentComponent:true},{isLastCommentComponent:true}),ob=nb[0],pb=ob[0],fb=nb[1],qb=nb[2],rb=qb[0];mb={topPager:pb,bottomPager:rb};var sb=this._hasCommentOrderInverted()?gb:null,tb=this._hasCommentOrderInverted()?null:gb,ub=null;if(ib&&this._hasCommentOrderInverted()&&this.state.hasPagedToplevel)ub=n.createElement(v,{onClick:this.onComment,isQAndA:ua.isqanda});var vb=this.applyToUFIComponents([xa,ab,bb,sb,mb.topPager],fb,[mb.bottomPager,tb,ub],{isFirstComponent:true},{isLastComponent:true}),wb=vb[0],xa=wb[0],ab=wb[1],bb=wb[2],sb=wb[3],pb=wb[4],fb=vb[1],xb=vb[2],rb=xb[0],tb=xb[1],ub=xb[2];mb={topPager:pb,bottomPager:rb};var yb=[mb.topPager,fb&&o.create(fb),mb.bottomPager];if(va.scrollcomments&&va.scrollwidth)yb=n.createElement("li",null,n.createElement(p,{width:va.scrollwidth},n.createElement("ul",null,yb)));if(this.props.inlineShare.active){return (n.createElement(z,{hasNub:false},n.createElement(g,n.__spread({bootloadPlaceholder:n.createElement("span",null),bootloadComponent:function(zb){h.loadModules(["ShareDialog.react"],zb);}},this.props.inlineShare.props,{onCancel:function(){return this._resetInlineShare();}.bind(this),onPost:function(zb){h.loadModules(["ShareDialogOsricController"],function(ac){ac.onPost(zb,this._beforePostInlineShare,this._onInlineShareSuccess,this._onInlineShareError);}.bind(this));}.bind(this),ref:"inlineShare",renderInline:true,status:this.props.inlineShare.status}))));}else return (n.createElement(z,{hasNub:va.shownub&&lb},xa,ab,bb,sb,yb,tb,ub));},applyToUFIComponents:function(ta,ua,va,wa,xa){var ya=this._applyToFirstComponent(ta,ua,va,wa,false);ta=ya[0],ua=ya[1],va=ya[2];var za=this._applyToFirstComponent(va,ua,ta,xa,true);va=za[0],ua=za[1],ta=za[2];return [ta,ua,va];},_applyToFirstComponent:function(ta,ua,va,wa,xa){var ya,za,ab;ya=xa?ta.length-1:0;za=xa?-1:ta.length;for(ab=ya;ab!=za;ab+=xa?-1:1)if(ta[ab]){ta[ab]=n.cloneElement(ta[ab],wa);return [ta,ua,va];}var bb=Object.keys(ua||{});ya=xa?bb.length-1:0;za=xa?-1:bb.length;for(ab=ya;ab!=za;ab+=xa?-1:1){var cb=bb[ab];if(ua[cb]&&ua[cb].props.comment&&this._shouldRenderComment(ua[cb].props.comment)){ua[cb]=n.cloneElement(ua[cb],wa);return [ta,ua,va];}}ya=xa?va.length-1:0;za=xa?-1:va.length;for(ab=ya;ab!=za;ab+=xa?-1:1)if(va[ab]){va[ab]=n.cloneElement(va[ab],wa);return [ta,ua,va];}return [ta,ua,va];},_focusInlineShare:function(ta){ta=ta||{};var ua=n.findDOMNode(this.refs.inlineShare);if(!this.props.inlineShare.messageOnly)oa(ua);if(!this.props.contextArgs.ufiexperiments.inlineShareHighlight)return;j.ensureVisible(ua);if(ta.shouldHighlight)h.loadModules(["highlight","CSS","cx"],function(va,wa,xa){wa.addClass(ua,"_5p5");var ya=function(){wa.removeClass(ua,"_5p5");};va(ua,ya,'#f6f7f8');});},_shouldRenderComment:function(ta){return ta.status!==y.UFIStatus.DELETED;},renderCommentMap:function(ta,ua){var va=this.props,wa={},xa=ta.length;if(!xa)return wa;var ya=ta[0].parentcommentid,za=[],ab=function(){if(za.length>0){var mb=function(nb,ob){this.state.loadingSpamIDs[nb[0]]=true;this.forceUpdate();va.onSpamFetch(nb,ob);}.bind(this,za,ya);wa['spam'+za[0]]=n.createElement(ha,{onClick:mb,numHidden:za.length,isLoading:!!this.state.loadingSpamIDs[za[0]]});za=[];}}.bind(this),bb=va.instanceid,cb=ba.getKeyForInstance(bb,'editcommentid'),db=!!ta[0].parentcommentid;for(var eb=0;eb<xa;eb++)if(ta[eb].status==y.UFIStatus.SPAM){za.push(ta[eb].id);}else{ab();var fb=Math.max(va.loggingOffset-eb-ua,0),gb=ta[eb],hb;if(gb.id==cb){hb=this.renderEditCommentBox(gb);}else{var ib=eb===0,jb=eb===xa-1,kb=!db,lb=db&&!ib;hb=this.renderComment(gb,fb,ib,jb,kb,lb);}wa['comment'+gb.id]=hb;if(gb.status!==y.UFIStatus.DELETED)wa['replies'+gb.id]=this.renderReplyContainer(gb);}ab();return wa;},renderReplyContainer:function(ta){var ua=this.props,va=ua.commentCounts[ta.id],wa=this.state.repliesExpandedMap[ta.id],xa=!wa&&ta.interestingReplyId,ya,za;if(wa||ta.interestingReplyId){ya=ua.repliesMap[ta.id];za=ua.ranges[ta.id].getOffset();if(xa){var ab=ya.filter(function(vb){return vb.id===ta.interestingReplyId;});if(ab.length!==1){l.getInstance('ufi').error('comment '+ta.id+' claims to have an interesting reply, '+'but there is not exactly 1 comment with that id in the reply '+'list.');ya=null;}else{ya=ab;za=ta.interestingReplyOffset;}}}var bb,cb,db;if(ya){var eb=ua.ranges[ta.id].getOffset(),fb=ua.ranges[ta.id].getLength();if(xa){eb=za;fb=1;}var gb=this.renderPagers(ta.id,eb,fb);bb=gb.topPager;cb=gb.bottomPager;db=this.renderCommentMap(ya,za);}var hb=Math.max(va-ta.spamreplycount,0),ib;if(hb&&((wa&&ya&&ya.length>this.props.replySocialSentenceMaxReplies)||(!wa&&!ya))){var jb=wa&&!bb&&(this.isLoadingPrev(ta.id)||this.isLoadingNext(ta.id)),kb=null;if(ta.replyauthors&&ta.replyauthors.length)kb=ua.authorProfiles[ta.replyauthors[0]];ib=n.createElement(fa,{contextArgs:ua.contextArgs,author:kb,replies:wa?ya.length:hb,shortenTimestamp:ua.shortenTimestamp,timestamp:ta.recentreplytimestamp,onClick:this.onToggleReplies.bind(this,ta.id),isLoading:jb,isExpanded:wa,showVerified:this.props.feedback.showfeaturedreplies,orderingMode:this.props.orderingMode});}var lb;if(wa)if(ta.cancomment&&ua.canAddCommentMap[ta.id]){var mb=false,nb=Object.keys(db);for(var ob=nb.length-1;ob>=0;ob--){var pb=nb[ob];if(pb&&db[pb]){mb=db[pb].props.isAuthorReply;break;}}lb=this.renderReplyComposer(ta,!mb);}var qb;if(ib||bb||db||cb||lb){var rb=this.applyToUFIComponents([ib,bb],db,[cb,lb],{isFirstComponent:true},{isLastComponent:true}),sb=rb[0],ib=sb[0],bb=sb[1],db=rb[1],tb=rb[2],cb=tb[0],lb=tb[1],ub=ta.status===y.UFIStatus.LIVE_DELETED;qb=n.createElement(z,{isParentLiveDeleted:ub,isReplyList:true},ib,bb,db&&o.create(db),cb,lb);}return qb;},renderReplyComposer:function(ta,ua){var va=this.props;return (new u(null,va.id,ta.id,va.contextArgs)).renderAddComment(va.authorProfiles[va.feedback.actorforpost],va.feedback.ownerid,va.feedback.mentionsdatasource,false,'replycomposer-'+ta.id,ua,va.feedback.subtitle,va.feedback.allowphotoattachments,va.feedback.allowstickerattachments,va.feedback.isqanda);},renderEditCommentBox:function(ta){var ua=new u(null,this.props.id,null,{mentionsinput:this.props.contextArgs.mentionsinput}),va=ua.renderEditComment(this.props.authorProfiles[this.props.feedback.actorforpost],this.props.feedback.ownerid,ta.id,this.props.feedback.mentionsdatasource,this.props.onEditAttempt.bind(null,ta),this.props.onCancelEdit,this.props.feedback.allowphotoattachments,this.props.feedback.allowstickerattachments,this.props.feedback.isqanda);return va;},renderComment:function(ta,ua,va,wa,xa,ya){var za=this.props,ab=za.feedback,bb=ab.actorforpost===ta.author,cb=ba.getKeyForInstance(this.props.instanceid,'locallycomposed'),db=ta.islocal||cb&&cb[ta.id],eb=ab.showremovemenu||(ab.viewerid===ta.author),fb=ab.canremoveall&&ab.isownerpage&&!bb,gb=za.source!=y.UFIFeedbackSourceType.INTERN,hb=t.getTrackingInfo(t.types.COMMENT,ua),ib=!!ta.parentcommentid,jb=!!ta.isfeatured;switch(this.props.source){case y.UFIFeedbackSourceType.TOPIC_CONVERSATION:return (n.createElement(g,{bootloadPlaceholder:n.createElement("span",null),bootloadComponent:function(lb){h.loadModules(["UFITopicConversationComment.react"],lb);},isFirst:va,isLast:wa,comment:ta,authorProfiles:this.props.authorProfiles,viewerIsAuthor:bb,feedback:ab,contextArgs:this.props.contextArgs,focusOnMount:ta.id===this.state.commentIDToFocusOnMount,isLocallyComposed:db}));default:var kb=new ia(za.commentPermalinks[ta.id]).addQueryData({comment_tracking:hb}).toString();return (n.createElement(w,{isFirst:va,isLast:wa,showReplyLink:xa,hasPartialBorder:ya,comment:ta,authorProfiles:this.props.authorProfiles,viewerIsAuthor:bb,feedback:ab,"data-ft":hb,contextArgs:this.props.contextArgs,hideAsSpamForPageAdmin:fb,isLocallyComposed:db,isReply:ib,isFeatured:jb,permalink:kb,shortenTimestamp:za.shortenTimestamp,showPermalink:gb,showRemoveReportMenu:eb,focusOnMount:ta.id===this.state.commentIDToFocusOnMount,onCommentLikeToggle:za.onCommentLikeToggle.bind(null,ta),onCommentReply:this.onCommentReply.bind(this,ta),onCommentTranslate:za.onCommentTranslate.bind(null,ta),onEdit:za.onCommentEdit.bind(null,ta),onHideAsSpam:za.onCommentHideAsSpam.bind(null,ta),onInlineBan:za.onCommentInlineBan.bind(null,ta),onMarkAsNotSpam:za.onCommentMarkAsNotSpam.bind(null,ta),onPreviewRemove:za.onPreviewRemove.bind(null,ta),onRemove:za.onCommentRemove.bind(null,ta),onRetrySubmit:za.onRetrySubmit.bind(null,ta),onUndoInlineBan:za.onCommentUndoInlineBan.bind(null,ta)}));}},_toggleReplyExpandedState:function(ta){var ua=this.state.repliesExpandedMap[ta],va=this.state.repliesExpandedMap;va[ta]=!ua;this.setState({repliesExpandedMap:va,replyComposerIDToFocusOnMount:!ua?'replycomposer-'+ta:null});},onToggleReplies:function(ta){this._toggleReplyExpandedState(ta);var ua=this.state.repliesExpandedMap[ta],va=this.props.ranges[ta].getRequestedLength();va-=this.props.deletedCounts[ta];if(ua&&va===0){var wa=this.props.commentCounts[ta],xa=Math.min(wa,this.props.pageSize),ya=wa-xa;this.onPage(ta,ra.BOTTOM,{offset:ya,length:xa});}},onPage:function(ta,ua,va){var wa=this.state.hasPagedToplevel||ta===this.props.id;if(ta!==this.props.id&&!this.state.repliesExpandedMap[ta]){var xa=this.state.repliesExpandedMap;xa[ta]=true;this.setState({repliesExpandedMap:xa});}var ya=Object.assign({},this.state.isActiveLoading);ya[ta]=ua;this.setState({isActiveLoading:ya,hasPagedToplevel:wa});this.props.onChangeRange(ta,va);},isLoadingPrev:function(ta){var ua=this.props;ta=ta||ua.id;var va=ua.ranges[ta].getRequestedOffset(),wa=ua.ranges[ta].getOffset();return va<wa;},isLoadingNext:function(ta){var ua=this.props;ta=ta||ua.id;var va=ua.ranges[ta].getRequestedOffset(),wa=ua.ranges[ta].getRequestedLength(),xa=ua.ranges[ta].getOffset(),ya=ua.ranges[ta].getLength();return va+wa>xa+ya;},renderPagers:function(ta,ua,va){var wa=this.props,xa=wa.deletedCounts[ta],ya=wa.commentCounts[ta],za=ya-xa,ab=va-xa,bb=wa.contextArgs.numberdelimiter||',',cb=ta!==wa.id,db,eb={topPager:null,bottomPager:null};if(wa.source==y.UFIFeedbackSourceType.ADS)return eb;var fb=this.isLoadingPrev(ta),gb=this.isLoadingNext(ta);if(va==ya)return eb;var hb={delimiter:bb},ib=wa.feedback.commentsentenceinfo;if(ib){hb.commenters=ib.explicit_commenter_names;hb.othersCount=ib.other_commenter_count;}var jb=(ua+va)==ya;if((ya<wa.pageSize&&jb)||ab===0){db=Math.min(ya,wa.pageSize);var kb=this.onPage.bind(this,ta,this._hasCommentOrderInverted()&&!cb?ra.BOTTOM:ra.TOP,{offset:ya-db,length:db}),lb;if(ab===0){if(za==1){lb=ea.VIEW_ONE;}else{hb.count=za;lb=ea.VIEW_ALL;}}else if(za-ab==1){lb=ea.VIEW_ONE_MORE;}else{lb=ea.VIEW_MORE_EXPLICIT;hb.count=za-ab;}var mb=t.getTrackingInfo(t.types.VIEW_ALL_COMMENTS),nb=ea.getLabel(lb,cb,wa.feedback.isqanda,hb),ob=this._hasCommentOrderInverted()&&!cb,pb=n.createElement(da,{key:"allPager"+ta,ref:ob?"topLevelBottomPager":null,contextArgs:wa.contextArgs,isUnseen:wa.feedback.hasunseencollapsed,isLoading:fb,isReply:cb,pagerLabel:nb,onPagerClick:kb,"data-ft":mb});if(ob){eb.bottomPager=pb;}else eb.topPager=pb;return eb;}var qb=ea.getLabel(ea.VIEW_MORE,cb,wa.feedback.isqanda,hb),rb=ea.getLabel(ea.VIEW_PREVIOUS,cb,wa.feedback.isqanda,hb);if(ua>0){var sb=Math.max(ua-wa.pageSize,0);db=ua+va-sb;var tb;if(!cb||ab>1){var ub=m.formatIntegerWithDelimiter(ab,bb),vb=m.formatIntegerWithDelimiter(za,bb);tb=qa._("{countshown} of {totalcount}",[qa.param("countshown",ub),qa.param("totalcount",vb)]);}var wb;if(this._hasCommentOrderInverted()&&!cb){wb=this.onPage.bind(this,ta,ra.BOTTOM,{offset:sb,length:db});eb.bottomPager=n.createElement(da,{key:"bottomPager"+ta,ref:!cb?"topLevelBottomPager":null,contextArgs:wa.contextArgs,isLoading:fb,isReply:cb,pagerLabel:qb,onPagerClick:wb,countSentence:tb});}else{wb=this.onPage.bind(this,ta,ra.TOP,{offset:sb,length:db});eb.topPager=n.createElement(da,{key:"topPager"+ta,contextArgs:wa.contextArgs,isLoading:fb,isReply:cb,pagerLabel:rb,onPagerClick:wb,countSentence:tb});}}if(ua+va<ya){db=Math.min(va+wa.pageSize,ya-ua);var xb;if(this._hasCommentOrderInverted()&&!cb){xb=this.onPage.bind(this,ta,ra.TOP,{offset:ua,length:db});eb.topPager=n.createElement(da,{key:"topPager"+ta,contextArgs:wa.contextArgs,isLoading:gb,isReply:cb,pagerLabel:rb,onPagerClick:xb});}else{xb=this.onPage.bind(this,ta,ra.BOTTOM,{offset:ua,length:db});eb.bottomPager=n.createElement(da,{key:"bottomPager",ref:!cb?"topLevelBottomPager":null,contextArgs:wa.contextArgs,isLoading:gb,isReply:cb,pagerLabel:qb,onPagerClick:xb});}}return eb;},loadMoreComments:function(){if(this.scrollSubscription&&this.refs.topLevelBottomPager&&!(this.props.id in this.state.isActiveLoading)){var ta=n.findDOMNode(this.refs.topLevelBottomPager),ua=ma(window).y,va=ua+document.documentElement.clientHeight+y.infiniteScrollRangeForQANDAPermalinks;if(ta.offsetHeight&&ta.offsetTop<va)this.refs.topLevelBottomPager.props.onPagerClick();}},_scrollToAddComment:function(){if(this.refs.toplevelcomposer){var ta=n.findDOMNode(this.refs.toplevelcomposer),ua=80,va=ta.getBoundingClientRect().top;if(va<ua||va>ja.getViewportDimensions().y-ua)j.scrollTo(ta,true,false,ua);}},onCommentReply:function(ta){var ua=ta.parentcommentid||ta.id;if(this.props.feedback.isthreaded&&ta.cancomment){if(!this.state.repliesExpandedMap[ua]){this.onToggleReplies(ta.id);}else if(this.refs&&this.refs['replycomposer-'+ua])this.refs['replycomposer-'+ua].focus();}else if(this.props.contextArgs.simplereply&&ta.author&&this.refs.toplevelcomposer&&this.refs.toplevelcomposer.insertMention){var va=this.props.authorProfiles[ta.author].type,wa=new r({uniqueID:ta.author,title:this.props.authorProfiles[ta.author].name,type:va==='friend'?'user':va});this.refs.toplevelcomposer.insertMention(wa);this._scrollToAddComment();}},onComment:function(){if(this.refs&&this.refs.toplevelcomposer){this.refs.toplevelcomposer.focus();var ta=n.findDOMNode(this.refs.toplevelcomposer),ua=60;if(ta.getBoundingClientRect().top<ua)j.scrollTo(ta,true,true);}},_beforePostInlineShare:function(){ba.updateStateField(this.props.instanceid,'inlineShare','status',{type:'posting'});},_onInlineShareSuccess:function(ta){var ua=ta.payload.message||s.success;this._resetInlineShare({message:ua,isError:false});},_onInlineShareError:function(ta){var ua=ta.errorDescription||s.error;this._resetInlineShare({message:ua,isError:true});},_resetInlineShare:function(ta){ba.updateState(this.props.instanceid,'inlineShare',ta||{});},_hasCommentOrderInverted:function(){return x.inverted(this.props.orderingMode);}});e.exports=sa;},null);
__d("UFIFeaturedReplyCommentList",["UFIReplyCommentList"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;j.getCommentList=function(k,l){};function j(k,l,m,n){g.call(this,k,l);var o=0,p=m.length;this.updateCommentCount(p);this.addCommentIDs(o,p,m);var q={};n.forEach(function(r){q[r.id]=r;});m.forEach(function(r){this.addOrUpdateComment(q[r]);}.bind(this));}j.prototype.fetchComments=function(k,l,m){};e.exports=j;},null);
__d("UFIFeaturedToplevelCommentList",["UFIConstants","UFIToplevelCommentList"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;k.getCommentList=function(l,m){};k.getCommentListsForFeedbackTargetID=function(l){};k.getCommentListForFeedbackTargetID_UNSAFE=function(l){};k.resetCommentListsForFeedbackTargetID=function(l){};function k(l,m,n){h.call(this,l,g.UFICommentOrderingMode.FEATURED);var o=0,p=m.length;this.updateCommentCount(p);this.addCommentIDs(o,p,m);var q={};n.forEach(function(r){q[r.id]=r;});m.forEach(function(r){this.addOrUpdateComment(q[r]);}.bind(this));}k.prototype.fetchComments=function(l,m,n){};e.exports=k;},null);
__d("XLiveStreamingCommentsAsyncController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/videos\/livecomments\/",{eft_id:{type:"String",required:true},comment_cursor:{type:"String"},comment_fbid:{type:"String"}});},null);
__d("UFILiveStreamingComments",["AsyncRequest","Map","Set","UFICentralUpdates","UFIConfig","UFIConstants","UFIToplevelCommentList","XLiveStreamingCommentsAsyncController","setInterval"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=new h();function q(s,t,u){this.eftID=s;this.firstRequestCommentID=t;this.isInFeed=u;this.nextCursor=null;this.localCommentBodies=new i();var v=this.isInFeed?4:20;m.getCommentList(this.eftID,l.UFICommentOrderingMode.LIVE_STREAMING).setSizeLimit(v);o(function(){new g().setURI(this.getNextURI()).setHandler(function(w){if(w.payload===null)return;this.nextCursor=w.payload.cursors[0];var x=w.payload.ufipayload.comments[0];if(this.resemblesLocalComment(x))return;j.handleUpdate(l.UFIPayloadSourceType.LIVE_SEND,w.payload.ufipayload);}.bind(this)).send();}.bind(this),1000);j.subscribe('update-comments',function(w,x){if(x.comments&&x.comments.length)x.comments.forEach(function(y){if(y.parentcommentid)return;if(y.islocal)this.trackLocalComment(y);}.bind(this));}.bind(this));}q.prototype.getNextURI=function(){if(this.nextCursor!==null){return n.getURIBuilder().setString('eft_id',this.eftID).setString('comment_cursor',this.nextCursor).getURI();}else if(this.firstRequestCommentId!==null)return n.getURIBuilder().setString('eft_id',this.eftID).setString('comment_fbid',this.firstRequestCommentID).getURI();return n.getURIBuilder().setString('eft_id',this.eftID).getURI();};q.prototype.trackLocalComment=function(s){var t=q.hashCommentData(s);this.localCommentBodies.add(t);};q.prototype.resemblesLocalComment=function(s){var t=q.hashCommentData(s);return this.localCommentBodies.has(t);};q.hashCommentData=function(s){var t=s.author+s.body.text;if(s.attachment)t+=':'+s.attachment.fbid;return t;};var r={start:function(s,t,u){if(p.get(s)||(!k.enableStreamingCommentsInFeed&&u))return;p.set(s,new q(s,t,u));}};e.exports=r;},null);
__d("UFIRange",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h,i){this.offset=h||0;this.length=i||0;this.requestedOffset=this.offset;this.requestedLength=this.length;}g.prototype.getOffset=function(){return this.offset;};g.prototype.getLength=function(){return this.length;};g.prototype.updateRange=function(h,i){this.offset=h;this.length=i;if(this.requestedLength>0){var j=Math.min(this.offset,this.requestedOffset),k=Math.max(this.offset+this.length,this.requestedOffset+this.requestedLength);this.requestedOffset=j;this.requestedLength=k-j;}else{this.requestedOffset=this.offset;this.requestedLength=this.length;}};g.prototype.getRequestedOffset=function(){return this.requestedOffset;};g.prototype.getRequestedLength=function(){return this.requestedLength;};g.prototype.updateRequestedRange=function(h,i){this.requestedOffset=h;this.requestedLength=i;};e.exports=g;},null);
__d("UFIRetryActions",["JSLogger","UFICentralUpdates","UFIConstants","UFIUserActions"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g.create('UFIRetryActions');function l(o,p){var q={actiontype:i.UFIActionType.DELETE_COMMENT,commentid:o.id};h.handleUpdate(i.UFIPayloadSourceType.USER_ACTION,{actions:[q]});var r=o.body.text,s=o.body.mentionstext;p.replyid=o.parentcommentid;p.attachedphoto=o.body.mentionsphoto;j.addComment(o.ftentidentifier,r,s,p);}function m(o,p){var q=o.body.text,r=o.body.mentionstext;p.attachedPhoto=o.body.mentionsphoto;p.attachedSticker=o.attachment;j.editComment(o.id,q,r,p);}var n={retrySubmit:function(o,p){switch(o.status){case i.UFIStatus.FAILED_ADD:l(o,p);break;case i.UFIStatus.FAILED_EDIT:m(o,p);break;default:k.error('retrysubmitstatus',{status:o.status});break;}}};e.exports=n;},null);
__d("UFIController",["Arbiter","Bootloader","CSS","DOM","LayerRemoveOnHide","LiveTimer","PageAdminSignatureSettings","Parent","React","ReactMount","ShortProfiles","UFI.react","UFIActionLinkController","UFICentralUpdates","UFIFeaturedReplyCommentList","UFIFeaturedToplevelCommentList","UFICommentTemplates","UFIConstants","UFIFeedbackTargets","UFIInstanceState","UFILiveStreamingComments","UFIRange","UFIReplyCommentList","UFIRetryActions","UFIToplevelCommentList","UFIUserActions","URI","isEmpty","onEnclosingPageletDestroy","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja){b.__markCompiled&&b.__markCompiled();'use strict';var ka=function(oa,pa,qa,ra,sa){var ta=oa+pa===qa;return {offset:oa,length:(ta&&la(sa))?ra-oa:pa};},la=function(oa){return oa==x.UFIPayloadSourceType.USER_ACTION||oa==x.UFIPayloadSourceType.LIVE_SEND;},ma=function(oa,pa){for(var qa=0;qa<pa.length;qa++){var ra=pa[qa];if(ra.author)oa.push(ra.author);if(ra.socialcontext)oa.push(ra.socialcontext.topmutualid);if(ra.replyauthors&&ra.replyauthors.length)for(var sa=0;sa<ra.replyauthors.length;sa++)oa.push(ra.replyauthors[sa]);}};na.preload=function(){};function na(oa,pa,qa){this.root=oa;this.id=pa.ftentidentifier;this.source=pa.source;this.$UFIController0=pa.instanceid;this.featuredToplevelCommentList=null;this.featuredReplyCommentLists={};this.$UFIController1=pa;this.$UFIController1.rootid=this.root.id;this.$UFIController1.pagesAdminSignatureSettings=new m(this.$UFIController1.initAdminSignatureContext);this.$UFIController2=false;var ra=qa.feedbacktargets[0];this.actionLink=new s(oa,this.$UFIController1,ra,this.$UFIController0);this.orderingMode=ra.defaultcommentorderingmode;var sa=null;if(qa.featuredcommentlists&&qa.featuredcommentlists.comments&&qa.featuredcommentlists.comments[this.id]){sa=qa.featuredcommentlists.comments[this.id];this.featuredToplevelCommentList=new v(this.id,sa.values,qa.comments);}else sa=qa.commentlists.comments[this.id][this.orderingMode];this.ranges={};this.replyRanges={};this.repliesMap={};this.shortenTimestamp=pa.shortenTimestamp;this.commentcounts={};this.commentcounts[this.id]=this.getToplevelCommentList().getCommentCount();var ta=ra.orderingmodes||[{value:this.orderingMode}];ta.forEach(function(ya){this.ranges[ya.value]=new ba(sa.range.offset,sa.range.length);}.bind(this));var ua,va,wa;if(qa.commentlists.replies)for(ua=0;ua<sa.values.length;ua++){va=sa.values[ua];wa=qa.commentlists.replies[va];if(wa){this.commentcounts[va]=this.getReplyCommentList(va).getCommentCount();this.getReplyRange(va).updateRange(wa.range.offset,wa.range.length);}}if(qa.featuredcommentlists)if(qa.featuredcommentlists.replies)for(ua=0;ua<sa.values.length;ua++){va=sa.values[ua];wa=qa.featuredcommentlists.replies[va];if(wa){this.featuredReplyCommentLists[va]=new u(this.id,va,wa.values,qa.comments);this.commentcounts[va]=this.getReplyCommentList(va).getCommentCount();this.getReplyRange(va).updateRange(wa.range.offset,wa.range.length);}}this.$UFIController3=null;this.$UFIController4=null;this.ufiCentralUpdatesSubscriptions=[t.subscribe('feedback-updated',function(ya,za){var ab=za.updates,bb=za.payloadSource;if(bb!=x.UFIPayloadSourceType.COLLAPSED_UFI&&this.id in ab)this.fetchAndUpdate(this.render.bind(this),bb);}.bind(this)),t.subscribe('feedback-id-changed',function(ya,za){var ab=za.updates;if(this.id in ab)this.id=ab[this.id];}.bind(this)),t.subscribe('instance-updated',function(ya,za){var ab=za.updates;if(this.$UFIController0 in ab){var bb=ab[this.$UFIController0];if(bb.editcommentid||bb.inlineShare)this.render(za.payloadSource);}}.bind(this))];this.clearPageletSubscription=ia(this.root,this.$UFIController6.bind(this));this.clearPageSubscription=g.subscribe('ufi/page_cleared',this.$UFIController7.bind(this));t.handleUpdate(x.UFIPayloadSourceType.INITIAL_SERVER,qa);if(this.$UFIController1.viewas)this.viewasUFICleanSubscription=g.subscribe('pre_page_transition',function(ya,za){if(this.$UFIController1.viewas!==new ga(za.to).getQueryData('viewas'))ea.resetCommentListsForFeedbackTargetID(this.id);}.bind(this));h.loadModules(["ScrollAwareDOM"],function(ya){p.scrollMonitor=ya.monitor;});if(this.orderingMode===x.UFICommentOrderingMode.LIVE_STREAMING){var xa=null;if(this.comments&&this.comments.length>0)xa=this.comments[0].fbid;aa.start(this.id,xa,this.$UFIController1.feedcarded);}}na.prototype.$UFIController8=function(){if(!this.$UFIController9)this.$UFIController9=n.byTag(this.root,'form');return this.$UFIController9;};na.prototype.$UFIControllera=function(event){var oa=!this.feedback.hasviewerliked;fa.changeLike(this.id,oa,{source:this.source,target:event.target,rootid:this.$UFIController1.rootid});event.preventDefault();};na.prototype.$UFIControllerb=function(oa,event){var pa=!oa.hasviewerliked;fa.changeCommentLike(oa.id,pa,{source:this.source,target:event.target});};na.prototype.$UFIControllerc=function(oa){z.updateState(this.$UFIController0,'isediting',true);z.updateState(this.$UFIController0,'editcommentid',oa.id);};na.prototype.$UFIControllerd=function(oa,pa,event){if(!pa.visibleValue&&!pa.attachedPhoto&&!pa.attachedSticker){this.$UFIControllere(oa,event);}else fa.editComment(oa.id,pa.visibleValue,pa.encodedValue,{source:this.$UFIController1.source,target:event.target,attachedPhoto:pa.attachedPhoto,attachedSticker:pa.attachedSticker});z.updateStateField(this.$UFIController0,'locallycomposed',oa.id,true);this.$UFIControllerf();};na.prototype.$UFIControllerf=function(){z.updateState(this.$UFIController0,'isediting',false);z.updateState(this.$UFIController0,'editcommentid',null);};na.prototype.$UFIControllere=function(oa,event,pa){this.$UFIControllerg(oa,false,event,pa);};na.prototype.$UFIControllerg=function(oa,pa,event,qa){var ra=w[':fb:ufi:hide-dialog-template'].build();j.setContent(ra.getNode('body'),ja._("Are you sure you want to delete this comment?"));j.setContent(ra.getNode('title'),ja._("Delete Comment"));h.loadModules(["DialogX"],function(sa){var ta=new sa({modal:true,width:465,addedBehaviors:[k]},ra.getRoot());ta.subscribe('confirm',function(){fa.removeComment(oa.id,{source:this.source,oneclick:pa,target:event.target,timelinelogdata:this.$UFIController1.timelinelogdata});if(qa)qa.setState({isInlinePageDeleted:true});ta.hide();}.bind(this));ta.show();}.bind(this));};na.prototype.$UFIControllerh=function(oa,event){fa.setHideAsSpam(oa.id,true,{source:this.source,target:event.target});};na.prototype.$UFIControlleri=function(oa,event){fa.setHideAsSpam(oa.id,false,{source:this.source,target:event.target});};na.prototype.$UFIControllerj=function(oa,event){fa.translateComment(oa,{source:this.source,target:event.target});};na.prototype.$UFIControllerk=function(oa,pa,event){fa.banUser(oa,this.feedback.ownerid,pa,{source:this.source,target:event.target});};na.prototype.$UFIControllerl=function(oa,event){this.$UFIControllerk(oa,true,event);};na.prototype.$UFIControllerm=function(oa,event){this.$UFIControllerk(oa,false,event);};na.prototype.$UFIControllern=function(oa,pa){fa.fetchSpamComments(this.id,oa,pa,this.$UFIController1.viewas);};na.prototype.$UFIControllero=function(oa,event){fa.removePreview(oa,{source:this.source,target:event.target});};na.prototype.$UFIControllerp=function(oa){da.retrySubmit(oa,{source:this.source});};na.prototype.$UFIControllerq=function(){if(this.$UFIController2)return;var oa=n.byTag(this.root,'form');if(oa){i.removeClass(oa,'collapsed_comments');this.$UFIController2=true;}};na.prototype.setRange=function(oa){this.getRange().updateRange(oa.offset,oa.length);};na.prototype.setReplyRange=function(oa,pa){this.getReplyRange(oa).updateRange(pa.offset,pa.length);};na.prototype.render=function(oa){var pa=z.getKeyForInstance(this.$UFIController0,'inlineShare'),qa=this.comments.length||!ha(this.feedback.likesentences.current);if(qa&&la(oa))this.$UFIControllerq();var ra=this.getRange();if(this.$UFIController3===null)this.$UFIController3=ra.getOffset()+ra.getLength()-1;var sa=this.feedback.replysocialsentencemaxreplies||-1,ta={};ta[this.id]=this.getToplevelCommentList().getDeletedCount();var ua={},va={},wa={};va[this.id]=!this.featuredToplevelCommentList;this.comments.forEach(function(cb){var db=cb.id;ta[db]=this.getReplyCommentList(db).getDeletedCount();ua[db]=this.getToplevelCommentList().getPermalinkForComment(db);va[db]=!this.featuredReplyCommentLists[db];if(this.repliesMap[db]){var eb=this.repliesMap[db].length;wa[db]=db===this.feedback.permalinkcommentid||eb>1||(eb>0&&cb.interestingReplyOffset===(void 0));this.repliesMap[db].forEach(function(fb){var gb=fb.id;ua[gb]=ca.getCommentList(this.id,db).getPermalinkForComment(gb);}.bind(this));}}.bind(this));var xa={};xa[this.id]=new ba(ra.offset,ra.length);for(var ya in this.replyRanges)xa[ya]=new ba(this.replyRanges[ya].offset,this.replyRanges[ya].length);var za=!!this.featuredToplevelCommentList,ab=this.getToplevelCommentList().getForceNotPageable(),bb=o.createElement(r,{feedback:this.feedback,id:this.id,onTargetLikeToggle:this.$UFIControllera.bind(this),onCommentLikeToggle:this.$UFIControllerb.bind(this),onCommentRemove:this.$UFIControllere.bind(this),onCommentHideAsSpam:this.$UFIControllerh.bind(this),onCommentMarkAsNotSpam:this.$UFIControlleri.bind(this),onCommentEdit:this.$UFIControllerc.bind(this),onCommentTranslate:this.$UFIControllerj.bind(this),onCommentInlineBan:this.$UFIControllerl.bind(this),onCommentUndoInlineBan:this.$UFIControllerm.bind(this),onEditAttempt:this.$UFIControllerd.bind(this),onCancelEdit:this.$UFIControllerf.bind(this),onChangeRange:this.$UFIControllerr.bind(this),onSpamFetch:this.$UFIControllern.bind(this),onPreviewRemove:this.$UFIControllero.bind(this),onRetrySubmit:this.$UFIControllerp.bind(this),onOrderingModeChange:this.$UFIControllers.bind(this),contextArgs:this.$UFIController1,repliesMap:this.repliesMap,shortenTimestamp:this.shortenTimestamp,commentCounts:this.commentcounts,deletedCounts:ta,availableComments:this.comments,source:this.source,ranges:xa,pageSize:this.$UFIController1.pagesize,authorProfiles:this.authorProfiles,instanceid:this.$UFIController0,loggingOffset:this.$UFIController3,replySocialSentenceMaxReplies:sa,orderingMode:this.orderingMode,hideOrderingModeSelector:za,commentPermalinks:ua,canAddCommentMap:va,inlineShare:pa,initialRepliesExpandMap:wa,hideToplevelPager:ab});this.$UFIController4=o.render(bb,this.root);l.updateTimeStamps();if(this.$UFIController8())g.inform('ufi/changed',{form:this.$UFIController8()});if(oa!=x.UFIPayloadSourceType.INITIAL_SERVER&&oa!=x.UFIPayloadSourceType.COLLAPSED_UFI)g.inform('reflow');};na.prototype.deferredCallback=function(oa,pa,qa,ra){oa.callbackCount++;if(oa.callbackCount<oa.expectedCallbackCount)return;q.getMulti(pa,function(sa){this.authorProfiles=sa;ra(qa);if(qa==x.UFIPayloadSourceType.ENDPOINT_COMMENT_FETCH)g.inform('CommentUFI.Pager');}.bind(this));};na.prototype.fetchAndUpdate=function(oa,pa){y.getFeedbackTarget(this.id,function(qa){this.feedback=qa;var ra=this.getToplevelCommentList().getCommentCount(),sa=this.getRange(),ta=ka(sa.getRequestedOffset(),sa.getRequestedLength(),this.commentcounts[this.id],ra,pa),ua=[];if(this.feedback.actorforpost)ua.push(this.feedback.actorforpost);var va={expectedCallbackCount:0,callbackCount:0},wa=ta.offset,xa=ta.length,ya={viewAs:this.$UFIController1.viewas,feedContext:this.$UFIController1.feedcontext};this.getToplevelCommentList().getComments(wa,xa,ya,function(za,ab,bb){this.commentcounts[this.id]=ab;this.setRange(za);this.comments=[];for(var cb in bb)this.comments.push(bb[cb]);ma(ua,this.comments);if(this.feedback.isthreaded&&this.comments.length){va.expectedCallbackCount=this.comments.length;}else va.expectedCallbackCount=1;for(var db in bb){var eb=bb[db],fb=eb.id;if(this.feedback.isthreaded){var gb=this.getReplyCommentList(fb).getCommentCount(),hb;if(this.replyRanges[fb]){var ib=this.getReplyRange(fb);hb=ka(ib.getRequestedOffset(),ib.getRequestedLength(),this.commentcounts[fb],gb,pa);}else if(eb.interestingReplyOffset!==(void 0)){hb={offset:eb.interestingReplyOffset,length:1};}else{var jb=this.feedback.isranked?0:Math.min(gb,2);hb={offset:0,length:jb};}var kb=hb.offset,lb=hb.length;this.getReplyCommentList(fb).getComments(kb,lb,ya,function(mb,nb,ob,pb){this.commentcounts[mb]=ob;this.setReplyRange(mb,nb);this.repliesMap[mb]=[];for(var qb in pb)this.repliesMap[mb].push(pb[qb]);ma(ua,this.repliesMap[mb]);this.deferredCallback(va,ua,pa,oa);}.bind(this,fb,hb,gb));}}if(!this.feedback.isthreaded||!this.comments.length)this.deferredCallback(va,ua,pa,oa);}.bind(this,ta,ra));}.bind(this));};na.prototype.getToplevelCommentList=function(){if(this.featuredToplevelCommentList)return this.featuredToplevelCommentList;return ea.getCommentList(this.id,this.orderingMode);};na.prototype.getReplyCommentList=function(oa){if(oa in this.featuredReplyCommentLists)return this.featuredReplyCommentLists[oa];return ca.getCommentList(this.id,oa);};na.prototype.getRange=function(){if(!(this.orderingMode in this.ranges))this.ranges[this.orderingMode]=new ba();return this.ranges[this.orderingMode];};na.prototype.getReplyRange=function(oa){if(!(oa in this.replyRanges))this.replyRanges[oa]=new ba();return this.replyRanges[oa];};na.prototype.$UFIControllerr=function(oa,pa){if(oa==this.id){this.getRange().updateRequestedRange(pa.offset,pa.length);}else this.replyRanges[oa].updateRequestedRange(pa.offset,pa.length);this.fetchAndUpdate(this.render.bind(this),x.UFIPayloadSourceType.USER_ACTION);};na.prototype.$UFIController6=function(){o.unmountComponentAtNode(this.root);this.ufiCentralUpdatesSubscriptions.forEach(t.unsubscribe.bind(t));g.unsubscribe(this.clearPageSubscription);this.viewasUFICleanSubscription&&g.unsubscribe(this.viewasUFICleanSubscription);};na.prototype.$UFIController7=function(){this.$UFIController6();g.unsubscribe(this.clearPageletSubscription);};na.prototype.$UFIControllers=function(oa){this.orderingMode=oa;var pa=z.getKeyForInstance(this.$UFIController0,'inlineShare'),qa=o.createElement(r,{feedback:this.feedback,id:this.id,contextArgs:this.$UFIController1,commentCounts:this.commentcounts,onOrderingModeChange:this.$UFIControllers.bind(this),onTargetLikeToggle:this.$UFIControllera.bind(this),orderingMode:this.orderingMode,inlineShare:pa,hideOrderingModeSelector:false,loadingComments:true});this.$UFIController4=o.render(qa,this.root);this.fetchAndUpdate(this.render.bind(this),x.UFIPayloadSourceType.USER_ACTION);};e.exports=na;},null);
__d("MentionsTypeaheadViewItem.react",["Badge.react","ImageBlock.react","React","TypeaheadViewItem","cssURL","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=i,n=m.PropTypes,o=i.createClass({displayName:"MentionsTypeaheadViewItem",mixins:[j.Mixin],propTypes:Object.assign({},j.propTypes,{ariaDescribedBy:n.string}),render:function(){var p=this.props.entry,q=p.getAuxiliaryData(),r=null;if(q)if(q.verified){r=i.createElement(g,{type:"verified",size:"xsmall"});}else if(q.workUser)r=i.createElement(g,{type:"work",size:"xsmall"});var s=p.getPhoto()?i.createElement("span",{className:"_5u93",style:{backgroundImage:k(p.getPhoto())}}):i.createElement("span",null),t=null;if(p.getSubtitle())t=i.createElement("div",{className:"_5u95"},p.getSubtitle());var u=(("_5u91")+(this.props.highlighted?' '+"_5u92":''));return (i.createElement("li",{role:"option",className:u,"aria-label":p.getTitle(),"aria-selected":this.props.highlighted,"aria-describedby":this.props.ariaDescribedBy,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight},i.createElement(h,{spacing:"medium"},s,i.createElement("div",null,i.createElement("div",{className:"_5u94"},p.getTitle(),r),t))));}});e.exports=o;},null);
__d("GroupMentionsTypeaheadView.react",["Image.react","MentionsTypeaheadViewItem.react","React","cx","fbt","ix","uniqueID"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=i,o=n.PropTypes,p=k._("No Results"),q=i.createClass({displayName:"GroupMentionsTypeaheadView",propTypes:{id:o.string,viewProps:o.object,highlightedEntry:o.object,entries:o.array.isRequired,onSelect:o.func.isRequired,onHighlight:o.func,onRenderHighlight:o.func},getInitialState:function(){return {membersHeaderID:m(),nonMembersHeaderID:m()};},_renderItem:function(r,s){var t=r===this.props.highlightedEntry;return (i.createElement(h,{key:r.getUniqueID(),ariaDescribedBy:s,entry:r,highlighted:t,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this._onRenderHighlight}));},_renderMembers:function(r){var s,t=null;if(r.length){t=r.map(function(w,x){var y=x===0?this.state.membersHeaderID:null;return this._renderItem(w,y);}.bind(this));}else t=[i.createElement("li",{className:"_2ph-",role:"option","aria-describedby":this.state.membersHeaderID,"aria-label":p},p)];var u=null;if(this.props.viewProps.member.aux)u=i.createElement("span",{className:"_1knr"},' \u00b7 ',this.props.viewProps.member.aux);var v=[i.createElement("li",{id:this.state.membersHeaderID,className:"_1kns"},this.props.viewProps.member.title,u)];(s=v).push.apply(s,t);return v;},_renderNonMembers:function(r){var s;if(!r.length)return null;var t=null;if(this.props.viewProps.nonMember.aux)t=i.createElement("span",{className:"_1knr"},' \u00b7 ',this.props.viewProps.nonMember.aux);var u=[i.createElement("li",{id:this.state.nonMembersHeaderID,className:"_1kns"},i.createElement(g,{src:l('/images/groups/secret-tag.png'),className:"_1knt"}),this.props.viewProps.nonMember.title,t)];(s=u).push.apply(s,r.map(function(v,w){var x=w===0?this.state.nonMembersHeaderID:null;return this._renderItem(v,x);}.bind(this)));return u;},render:function(){var r=[],s=[];this.props.entries.forEach(function(u){var v=u.getAuxiliaryData();if(v.renderType==='member'){r.push(u);}else s.push(u);});var t=(("_5u8_")+(!r.length&&!s.length?' '+"_5u90":''));return (i.createElement("ul",{className:t,role:"listbox",id:this.props.id},this._renderMembers(r),this._renderNonMembers(s)));}});e.exports=q;},null);
__d("UFIMentionsInputProxy.react",["Bootloader","React","cx","emptyFunction","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h.createClass({displayName:"UFIMentionsInputProxy",getInitialState:function(){return {component:null};},componentDidMount:function(){if(this.props.initialData){this._bootload();}else this._cmdBuffer=[];},componentDidUpdate:function(){if(this.state.component)this._drainFnBuffer();},hasEnteredText:function(){return this._fillCmdBuffer({fn:'hasEnteredText',args:[]});},setSignature:function(m){this._fillCmdBuffer({fn:'setSignature',args:[m]});},focus:function(){this._bootload();this._fillCmdBuffer({fn:'focus',args:[]});},submitComment:function(event){this._fillCmdBuffer({fn:'submitComment',args:[event]});},insertMention:function(m){this._fillCmdBuffer({fn:'insertMention',args:[m]});},insertEmoticon:function(m){this._fillCmdBuffer({fn:'insertEmoticon',args:[m]});},_bootload:function(){g.loadModules(["UFIMentionsInput.react"],function(m){return this.setState({component:m});}.bind(this));},_shouldDrainBuffer:function(){return this._cmdBuffer.length>0;},_fillCmdBuffer:function(m){if(this.refs.mentionsinputchild){return this._execCmd(m);}else this._cmdBuffer=this._cmdBuffer.concat([m]);},_drainFnBuffer:function(){if(this._shouldDrainBuffer()){var m=this._cmdBuffer[0];this._execCmd(m);this._cmdBuffer=this._cmdBuffer.slice(1);k(this._drainFnBuffer);}},_execCmd:function(m){var n=this.refs.mentionsinputchild;return n[m.fn].apply(n,m.args);},_renderProxyInput:function(){var m="_1osa mentionsHidden";return (h.createElement("input",{className:m,name:"add_comment_text",ref:"proxyInput",onFocus:this.focus,tabIndex:"-1"}));},_renderDummy:function(){var m="UFIAddCommentInput _1osb _1osc";return (h.createElement("div",{onFocus:this.focus,onClick:this.focus,onTouchStart:j,onMouseOver:this._bootload},h.createElement("div",{className:m},this._renderProxyInput(),this.props.placeholder)));},render:function(){var m=this.state.component;if(!m)return this._renderDummy();return (h.createElement(m,h.__spread({key:"mentionsinputchild",ref:"mentionsinputchild"},this.props),this.props.children));}});e.exports=l;},null);
__d("MentionsInputTypeaheadView.react",["MentionsTypeaheadViewItem.react","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=h,k=j.PropTypes,l=h.createClass({displayName:"MentionsInputTypeaheadView",propTypes:{id:k.string,highlightedEntry:k.object,entries:k.array.isRequired,onSelect:k.func.isRequired,onHighlight:k.func,onRenderHighlight:k.func},_renderItem:function(m){var n=m===this.props.highlightedEntry;return (h.createElement(g,{key:m.getUniqueID(),entry:m,highlighted:n,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));},render:function(){var m=(("_5u8_")+(!this.props.entries.length?' '+"_5u90":''));return (h.createElement("ul",{className:m,role:"listbox",id:this.props.id},this.props.entries.map(this._renderItem)));}});e.exports=l;},null);
__d("FbFeedHighlight",["JSXDOM","CSS","DOM","DOMScroll","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=1000,m=1000,n=null;function o(){return (g.div({className:"_1usz"},g.div({className:"_1us-"}),g.div({className:"_1us_"}),g.div({className:"_1ut0"}),g.div({className:"_1ut1"})));}var p={highlightAndScrollTo:function(q){p.highlight(q);p.scrollTo(q);},highlightSingle:function(q){var r=o();i.appendContent(q,r);setTimeout(function(){if(n)i.remove(n);n=r;h.addClass(q,"_1ut2");},0);setTimeout(function(){h.removeClass(q,"_1ut2");setTimeout(function(){i.remove(r);if(r==n)n=null;},l+m);},l+m);},highlight:function(q){var r=p.highlightPermanent(q);setTimeout(function(){h.removeClass(q,"_1ut2");setTimeout(i.remove.bind(null,r),l+l);},l+m);},highlightPermanent:function(q){var r=o();i.appendContent(q,r);setTimeout(h.addClass.bind(null,q,"_1ut2"),0);return r;},scrollTo:function(q){setTimeout(j.scrollTo.bind(null,q),0);}};e.exports=p;},null);